<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>php.ini安全配置最佳实践 - 嘶吼 RoarTalk &#8211; 回归最本质的信息安全,互联网安全新媒体,4hou.com</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta property="wb:webmaster" content="4517e8fe39b18975" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <meta name="description" content="之前有一段时间，我在本网站撰写了一篇有关于使用php.ini配置文件的一些与安全相关的最佳实践的文章。对于那些不知道的php.ini文件的人（如果你使用过PHP，你就应该知道这个文件），我要说的是，php.ini文件是你在…" />
    <meta name="keywords" content="" />
        <link href="http://img.4hou.com/wp-content/themes/4houv2/images/favicon.ico" rel="shortcut icon">
    <link href="http://img.4hou.com/wp-content/themes/4houv2/images/favicon_114.png" rel="apple-touch-icon">
    <link href="http://img.4hou.com/wp-content/themes/4houv2/images/favicon_76.png" sizes="76x76" rel="apple-touch-icon">
    <link href="http://img.4hou.com/wp-content/themes/4houv2/images/favicon_120.png" sizes="120x120" rel="apple-touch-icon">
    <link href="http://img.4hou.com/wp-content/themes/4houv2/images/favicon_152.png" sizes="152x152" rel="apple-touch-icon">

    <!-- 引入 lib -->
    <script src="http://www.4hou.com/wp-content/themes/4houv2/lib/jquery.min.js"></script>
    <script src="http://www.4hou.com/wp-content/themes/4houv2/lib/swiper.jquery.min.js"></script>
    <link rel="stylesheet" href="http://www.4hou.com/wp-content/themes/4houv2/lib/swiper.min.css">
    <link rel="stylesheet" href="http://www.4hou.com/wp-content/themes/4houv2/lib/allmin.css">
    <!--[if lt IE 11]>
    <script src="http://www.4hou.com/wp-content/themes/4houv2/lib/html5shiv.min.js"></script>
    <script src="http://www.4hou.com/wp-content/themes/4houv2/lib/respond.js"></script>
    <![endif]-->
    <!-- 引入 css js -->
    <link rel="stylesheet" href="http://www.4hou.com/wp-content/themes/4houv2/css/style.css">
    <link rel="stylesheet" href="http://www.4hou.com/wp-content/themes/4houv2/lib/allmin.css">
    <script src="http://www.4hou.com/wp-content/themes/4houv2/js/public.js"></script>
    <script src="http://www.4hou.com/wp-content/themes/4houv2/js/main.js"></script>
    <script src="http://www.4hou.com/wp-content/themes/4houv2/js/index-more.js"></script>
    </head>
<body>
<style type="text/css">
.memberlistanimate{width: 122px}
.memberlistanimateleave{width: 122px}
.nameheader{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width: 78px;display: block;}
</style>

<header class="header">
            <article class="header_center">
                <div class="logowrap">
            <a href="http://www.4hou.com"><div class="logo icons"></div></a>
            <h1>回归最本质的信息安全</h1>
        </div>
        <div class="login">
            <form action="/" class="navbar-form inSearch " name="searchform" onsubmit="return checksubmit()">
                <div class="br">
                    <span class="in-btn icons"></span>
                    <input type="text" name="s" id="search" class="animated">
                    <div class="clear icons"></div>
                </div>
                <div id="submitBtnplace" class="icons animated" value=""></div>
                <!--<input type="submit" id="submitBtn" class="icons animated" value="">-->
            </form>
                            <!--登录注册按钮-->
                 <div id="register">
                     <a href="http://www.4hou.com/register" data-event-category="Referral to Signup" data-event-action="click" data-event-label="Signup Menu button / Header">注册</a>
                 </div>
                 <div id="sing">
                      <a href="http://www.4hou.com/login" class="pzh_login">登录</a>
                 </div>

                 <div class="burger2 menu" id="burger">
                  <div class="icon"></div>
                 </div>

            
           <!-- <div id="register">注册</div>
            <div id="sing">登录</div>
            <div class="burger2 menu" id="burger">
                <div class="icon"></div>
            </div>-->
        </div>
    </article>
</header>
<nav class="navbox animated">
    <section class="navbox_cen">
        <article class="navboxleft">
            <ul class="nav navbar-nav index-nav" id="inNav">
					<li>
							<li class="cat-item cat-item-18"><a href="http://www.4hou.com/category/info" >资讯</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://www.4hou.com/category/technology" >技术</a>
</li>
	<li class="cat-item cat-item-20"><a href="http://www.4hou.com/category/xactivity" >活动</a>
</li>
	<li class="cat-item cat-item-29"><a href="http://www.4hou.com/category/vulnerable" >漏洞</a>
</li>
					</li>
                    <li class="cat-item cat-item-29"><a href="http://www.4hou.com/piao" >嘶票</a>
                    </li>
            </ul>
        </article>
        <article class="navboxright">
            <div class="contrib"> <a href="http://www.4hou.com/contribute" class="tougao" data-event-category="Referral to Signup" data-event-action="click" data-event-label="Signup Menu button / Header">投稿</a></div>
        </article>
    </section>
</nav>
<div id="modelbg"></div>
    <style>


    ::selection {
    background:#fea283;
    color:#fff;
}
::-moz-selection {
    background:#fea283;
    color:#fff;
}
::-webkit-selection {
    background:#fea283;
    color:#fff;
}


        .article_cen p img{height: auto !important;}
        .commentlist .children{width: 90%; padding-right: 15px; border-color: transparent ;}
        .commentname,.commenteml{width: 60%; margin-left:5% ;margin-bottom: 30px;border-bottom: 1px solid #dbdbdb;}
        .article_cen ol li{list-style-type: decimal;}
         .article_cen ol li p{overflow: inherit;}
        .commentname label{font-size: 16px;color: #666; margin-right: 10px;line-height: 32px;}
        .commentname input{width: 50%;border: none; outline: none;}
        .commenteml label{font-size: 16px;color: #666; margin-right: 10px;line-height: 32px;}
        .commenteml input{width: 50%;border: none; outline: none;}
        #zooming{display: none;width: 100%;height: 100%; position: fixed;z-index: 999;left: 0px; top: 0px; background-color: rgba(0,0,0,.6);}
        .zoomaniatae{display: block !important;}
        .imgcon{}
        #imgcon{position: absolute;left: 50%; top: 20%;max-width: 80%}
        .article_cen img{cursor: pointer;}
        #zooming{cursor: pointer;}
        .imgconadimate{animation:imgcon 0.5s 1 forwards;
        -webkit-animation:imgcon 0.5s 1 forwards;}
        .article_authorbox{    width: 222px;min-height: 214px;
        padding-bottom: 20px;
        float: right;
        position: relative;}
        .interested{position: relative;}
        .interested>h1{font-size: 18px; font-weight: 900; position: absolute; top: -36px;color: #5e5e5e}
       .user-comment span{font-size: 13px; position: relative; top: 2px;}
        .article_authoradd{position: fixed;}
        .stratend{background:url(http://www.4hou.com/wp-content/themes/4houv2/img/starend.png); !important;background-size: contain !important;}
        .wpfp-span{opacity: 0;width:100%; height: 100%;display: block; left: 0px; top: 0px; }
        .wpfp-link{width:100%; height: 100%;display: block; left: 0px; top: 0px; }
        .wpfp-span img{display: none;}
        .interested{width: 222px;padding-bottom: 20px;background-color: #fff;margin-top: 70px; padding-bottom: 10px; padding-top: 10px;border: 1px solid #f5c2b1}
        .interested li{width: 100%;position: relative;padding-top: 8px; padding-bottom: 8px;  line-height: 24px; padding-left: 20px;padding-right: 14px}
        .interested li i{width: 6px;height: 6px;border-radius: 50%; background-color: #f63;position: absolute; left: 8px; top: 18px;}
        .interested li a{color: #666;font-size: 14px; line-height: 18px;}
        .interested li:hover{background-color: #f9e7e3;-moz-transition: all 0.4s ease-in-out;
        .footer{position: relative;z-index: 99}   
        .article_authorbox_top{position: relative;} 
        

        -o-transition: all 0.4s ease-in-out; -webkit-transition: all 0.4s ease-in-out; transition: all 0.4s ease-in-out;}
    
        @-webkit-keyframes imgcon{
            0%{ opacity:0; -webkit-transform:scale3d(.3, .3, .3); transform:scale3d(.3, .3, .3) }
            50%{ opacity:1 }
        }
        @keyframes imgcon{
            0%{ opacity:0; -webkit-transform:scale3d(.3, .3, .3); transform:scale3d(.3, .3, .3) }
            50%{ opacity:1 }
        }
        .asideanimate{animation:asideanimate 1s 1 forwards;
        -webkit-animation:asideanimate 1s 1 forwards; position: fixed;}
        @-webkit-keyframes asideanimate{
            0%{ opacity:0; -webkit-transform:translate3d(0,-20%, 0); transform:translate3d(0, -20%, 0) }
            50%{ opacity:1 }
        }
        @keyframes asideanimate{
            0%{ opacity:0; -webkit-transform:translate3d(0,-20%, 0); transform:translate3d(0, -20%, 0) }
            50%{ opacity:1 }
        }
        .asideanimateleave{animation:asideanimateleave 1s 1 forwards;
        -webkit-animation:asideanimateleave 1s 1 forwards;}
        @-webkit-keyframes asideanimateleave{
            0%{ opacity:1; -webkit-transform:translate3d(0,0, 0); transform:translate3d(0, 0, 0) }
            50%{ opacity:0;-webkit-transform:translate3d(0,-20%, 0); transform:translate3d(0, -20%, 0) }
        }
        @keyframes asideanimateleave{
            0%{ opacity:1; -webkit-transform:translate3d(0,0, 0); transform:translate3d(0, 0, 0) }
            50%{ opacity:0;-webkit-transform:translate3d(0,-20%, 0); transform:translate3d(0, -20%, 0) }
        }
        @media screen and (max-width:650px) {
            .member_list{right: -30px !important;top: 34px !important;}
            .article_authorbox{display: none;}
            .nameheader{display: none;}
            .shang_box{width: 90%; margin-left:-45% }
            #imgcon{width: 90% !important; margin-left: -45% !important;max-width: inherit !important}
            .dy{padding: 12px 15px!important;font-size: 14px !important; line-height: 22px !important;}
        }
        .article_author{float:none !important;padding-top: 1px;}
        .article_cen pre{color: #666 !important; line-height: 26px; background-color: #f1f1f1}
        .articlecontent blockquote>p{ color: #666; font-size: 16px; }
    </style>
    <section class="articlewrap">
        <article class="articlecontent">
            <div class="article_top">
                <h1 class="art_title">php.ini安全配置最佳实践</h1>
                <p class="art_time">9小时 前发布</p>
                <div class="art_nav">
                    <!--<a href="">翻译文章</a>
                    <span>／</span>
                    <a href="">新闻</a>
                    <span>／</span>
                    <a href="">原创</a>-->
                                        <a href="http://www.4hou.com">首页 </a></a>
                    <span>／</span>
                    <a href="http://www.4hou.com/category/web">Web安全</a>
                    <span>／</span>
                    <a href="">正文</a>

                    </ul>
                </div>
                <div class="art_type">
                    <div class="newtype">
                        <div class="read ">
                            <i class="icons"></i>
                            <span>2,503</span>
                        </div>
                        <div class="comment ">
                            <i class="icons"></i>
                            <span>0</span>
                        </div>
                        <div class="Praise">
                            <i class="icons"></i>
                            <span>0</span>
                        </div>
                    </div>
                </div>
            </div>
             <p class="dy" style="padding: 24px 60px;font-size: 16px;line-height: 30px;color: #808080;background-color: #f6f6f6;"><span style="font-weight: bold;">导语：</span>php.ini 是PHP运行周期内的最主要的配置文件，该配置文件中的很多配置选项都与PHP应用程序的安全性有关。</p>

            <div class="article_cen">
                <!--文章摘要-->
               
                <p><p style="text-align: left;">之前有一段时间，我在本网站撰写了一篇有关于使用php.ini配置文件的一些与安全相关的最佳实践的文章。对于那些不知道的php.ini文件的人（如果你使用过PHP，你就应该知道这个文件），我要说的是，php.ini文件是你在安装PHP后的“主设置”文件。这是PHP解释器（在Web和命令行方面）寻找如何设置自己和一些选项打开/关闭的地方。</p>
<p style="text-align: left;">由于它是全局的配置文件，因此可以包括许多不同类型的设置：</p>
<pre class="brush:html;toolbar:false">·&nbsp;输出缓冲限制
·&nbsp;禁用PHP函数
·&nbsp;最大执行时间/内存使用量
·&nbsp;错误处理和显示首选项
·&nbsp;允许include或打开访问远程的资源</pre>
<p style="text-align: left;">…当然还有更多的设置选项。这也是你可以加载外部扩展并配置更多特定字段的设置，如会话处理，正则表达式，邮件服务器配置和各种数据库扩展。现在你可以很明显的明白此文件的重要性，并且内部选项的错误设置可能会在你的应用程序的安全性上留下 “裂缝” 。</p>
<p style="text-align: left;">在这有一点需要指出 &#8211; 有一个选项（with-config-file-scan-dir）你可以编译成指向另一个安装了PHP的目录，并将其中的*.ini文件进行加载，寻找PHP设置。这个操作是在php.ini生成之后做的，所以在这里总是有机会可以覆盖掉一些主要的设置。</p>
<p style="text-align: left;">不要误会我的解释，在应用程序代码级别上可以做很多事情，可以帮助你提高应用程序的安全性以及一些通过配置设置无法轻松完成的事情。当你谈论php.ini安全性的时候，你其实正在看的是一些非常基本的东西。即使在PHP附带的默认配置文件中也有很多地方你可以进行潜在的滥用行为，甚至你不需要了解这些选项。有很多文章提出了一些关于某些设置要禁用的建议，以及其他选项的应该设置的合理级别，但似乎没有哪篇文章是保持了最新的信息。</p>
<p style="text-align: left;">我不得不向<a href="http://twitter.com/funkatron" target="_blank" textvalue="Ed Finkler">Ed Finkler</a>提出需求，在他原来编写的概念验证工具——&nbsp;<a href="https://websec.io/2013/12/06/phpsecinfo.com" target="_blank" textvalue="PHPSecInfo">PHPSecInfo</a>中打破了这一点。他的工具是一个PHP实用程序，你可以放入你的Web应用程序，这个工具可以可视化地指出你的应用程序的痛点在哪里。工具会根据通过/失败状态对HTML进行着色，并提供有关该问题的更多信息以及设置选项值的良好建议。不幸的是，它已经有很长一段时间没有更新了，但它仍然是一个有用的工具。如果你使用它，请注意一点——它可以为访问你的站点的用户提供大量的信息披露。它不建议在生产经常使用，但可能是在你初始的配置和安装过程中非常有用的一个工具。</p>
<p style="text-align: left;">正如我所提到的，我收集了我可以找到的所有与php.ini相关的安全信息，并决定对这些信息进行分析能有一些实际的意义。而不是只是写一篇文章这么简单，我决定让这些信息对普通用户更加有用，这些用户将在任何框架或应用程序平台之外吸取有关安全的PHP服务器端配置的教训。所以，我创建了<a href="https://github.com/psecio/iniscan" target="_blank" textvalue="Iniscan">Iniscan</a>工具 —— 一个命令行实用程序，你可以针对你的php.ini文件运行安全扫描，并在建议你在此基础级别上保护应用程序时提供一些最佳做法。</p>
<p style="text-align: left;"><span style="font-size: 20px;"><strong>Iniscan &#8211; 概述</strong></span></p>
<p style="text-align: left;"><a href="https://github.com/psecio/iniscan" target="_blank" textvalue="Iniscan">Iniscan</a>项目背后的目标是聚集各种最佳做法来保证配置文件的安全性。这包括更普通的PHP大众以及那些正在寻找他们所运行的特定版本的PHP的内容的用户。扫描器会使用给定的选项值（默认或从命令行选项中指定）扫描php.ini文件，并将php.ini的一些设置与其自己的规则集进行比较，来寻找安全问题。</p>
<p style="text-align: left;">要在自己的系统上进行尝试，可以使用Composer轻松安装它：</p>
<pre class="brush:html;toolbar:false">{&nbsp;&quot;require&quot;:&nbsp;{&nbsp;&quot;psecio/iniscan&quot;:&nbsp;&quot;dev-master&quot;&nbsp;}&nbsp;}</pre>
<p style="text-align: left;">一旦下载完成，你可以通过命令行针对你自己的php.ini来启动执行：</p>
<pre class="brush:html;toolbar:false">bin/iniscan&nbsp;scan&nbsp;--path=/path/to/php.ini</pre>
<p style="text-align: left;">这将产生类似于下面这样的扫描结果：</p>
<pre class="brush:html;toolbar:false">==&nbsp;Executing&nbsp;INI&nbsp;Scan&nbsp;[12.05.2013&nbsp;17:59:40]&nbsp;==
Results&nbsp;for&nbsp;php.ini:
============
Status&nbsp;|&nbsp;Severity&nbsp;|&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Description
----------------------------------------------------------------------
PASS&nbsp;&nbsp;&nbsp;|&nbsp;ERROR&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;session.use_cookies&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Accepts&nbsp;cookies&nbsp;to&nbsp;manage&nbsp;sessions
PASS&nbsp;&nbsp;&nbsp;|&nbsp;ERROR&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;session.use_only_cookies&nbsp;|&nbsp;Must&nbsp;use&nbsp;cookies&nbsp;to&nbsp;manage&nbsp;sessions,&nbsp;don&#39;t&nbsp;accept&nbsp;session-ids&nbsp;in&nbsp;a&nbsp;link
FAIL&nbsp;&nbsp;&nbsp;|&nbsp;WARNING&nbsp;&nbsp;|&nbsp;session.cookie_domain&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;It&nbsp;is&nbsp;recommended&nbsp;that&nbsp;you&nbsp;set&nbsp;the&nbsp;default&nbsp;domain&nbsp;for&nbsp;cookies.
PASS&nbsp;&nbsp;&nbsp;|&nbsp;ERROR&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;session.cookie_httponly&nbsp;&nbsp;|&nbsp;Setting&nbsp;session&nbsp;cookies&nbsp;to&nbsp;&#39;http&nbsp;only&#39;&nbsp;makes&nbsp;them&nbsp;only&nbsp;readable&nbsp;by&nbsp;the&nbsp;browser</pre>
<p style="text-align: left;">扫描的结果输出提供了这几个事情：</p>
<p style="text-align: left;">· 检查通过或失败的状态</p>
<p style="text-align: left;">· 问题的严重程度</p>
<p style="text-align: left;">· php.ini中进行检查的“key”</p>
<p style="text-align: left;">· 对检查出的问题和原因的总结描述</p>
<p style="text-align: left;">如果你对实际的检查过程很感兴趣，请查看src/Psecio/Iniscan/rules.json文件中的定义和工具将会检查的一些值。</p>
<p style="text-align: left;">当报告出任何检查失败的情况时，命令将以非零状态退出，使你更容易以编程的方式检查整体的通过或失败的状态。</p>
<p style="text-align: left;">还有一组可以提供的命令行选项，这些选项可以使扫描更加灵活：</p>
<p style="text-align: left;">· &#8211;path定义要检查的php.ini文件的路径。如果没有给出，它会尝试从PHP的内部设置中寻找。</p>
<p style="text-align: left;">· &#8211;fail-only&nbsp;告诉Iniscan只显示检查失败的选项，而不需要显示检查通过的内容。</p>
<p style="text-align: left;">· &#8211;format&nbsp;允许你以各种格式输出扫描结果（目前支持默认的CLI输出以及JSON和XML）</p>
<p style="text-align: left;">· &#8211;threshold&nbsp;定义你想要看到的最低失败值（例如&#8211;threshold = ERROR将显示错误而不是警告）</p>
<p style="text-align: left;">· &#8211;php指定你要用于评估的PHP版本。如果没有指定这个值，Iniscan则会从中PHP_VERSION 中读取</p>
<p style="text-align: left;">· &#8211;output&nbsp;定义要将扫描结果输出写入的目录（如使用JSON和XML的输出格式）</p>
<p style="text-align: left;">因此，如果你只想查看安全问题并将结果输出到JSON数据集，则可以使用下面的命令：</p>
<p style="text-align: left;">bin/iniscan scan &#8211;path=/path/to/php.ini &#8211;fail-only &#8211;format=json &#8211;output=/path/to/output-dir</p>
<p style="text-align: left;">还包括两个“列表”命令，以便你了解该工具执行的检查：</p>
<pre class="brush:html;toolbar:false">bin/iniscan&nbsp;list-tests</pre>
<p style="text-align: left;">以及你当前正在处理的php.ini设置文件：</p>
<pre class="brush:html;toolbar:false">bin/iniscan&nbsp;show</pre>
<p style="text-align: left; margin-top: 15px;"><span style="font-size: 20px;"><strong>PHP.ini安全性一瞥</strong></span></p>
<p style="text-align: left;">接下来，我会尝试通过规则列表中的每个条目，并讨论这些条目为什么需要被检查，我会将其分解成几个部分，并描述一些基本的可能会因为糟糕的设置而出现的安全问题。其中一些已经<a href="https://websec.io/2012/08/13/Stay-Safe-in-Your-Phpini.html" target="_blank" textvalue="在另一篇文章中">在另一篇文章中</a>提及。</p>
<p style="text-align: left;"><strong>一般的PHP设置选项</strong></p>
<p style="text-align: left;">有几个设置与任何特定的PHP功能无关，这些功能更加通用一些。其中有些是有争议的，尽管它们可能导致一些问题（如expose_php），但其中几个可以产生真正的影响。例如，如果你知道你的应用程序永远不会通过任何类似于include / require或<a href="http://php.net/fopen" target="_blank" textvalue="fopen">fopen</a>打开远程位置的文件，那么你可以关闭allow_url_fopen和allow_url_include设置。这可以防止意外的远程文件包含问题所导致的代码执行，例如将用户上传的“.php”文件放在可公开访问的目录中，然后包含执行。</p>
<p style="text-align: left;">还有一些涉及到与最终用户共享什么样的信息有关的错误处理。如果启用error_reporting和display_errors，那么在开发过程中输出的错误值是绝对有助于调试脚本并跟踪错误的。然而，在生产和面向公众的环境中，相同的信息可能会泄露你的应用程序的某些敏感信息，你可能不希望存在潜在的攻击。例如，假设生产中没有关闭错误开关，最终用户正在尝试通过一些SQL注入测试来实施入侵。如果由于这些请求而出现错误，那么该攻击者将获得有关应用程序内部的一些信息，并且由于PHP本身倾向于在某些错误上提供堆栈跟踪，因此有关组成应用程序的实际文件的信息也会泄露。</p>
<p style="text-align: left;"><strong>会话设置选项</strong></p>
<p style="text-align: left;">Session是使用PHP有用性方面的重要组成部分。在其他语言可能需要引入单独的会话处理程序的情况下，PHP包括了其默认的功能（并且已有很长时间）。正如你所料，这意味着配置就在这个文件里，一般来说PHP都在php.ini里进行配置。这个文件里已经定义了很多有关会话的设置，但这并不意味着它们是最安全的选项。当前默认的设置更多的是“这些将在大多数系统上工作”为目的的。</p>
<p style="text-align: left;">那么我们需要注意哪些呢？最初的几个选项是有关于处理会话处理程序的cookie。默认情况下，PHP会话使用带有PHPSESSID哈希值的cookie&nbsp;作为值。Iniscan工具会检查以确保你的session.use_cookies和session.use_only_cookies设置被启用，以防止会话被以任何其他方式注入。还有三个其他设置选项，更多的是保护实际的Cookie本身：session.cookie_domain限制可以访问它们的域，cookie_httponly防止从Web环境以外的来源进行访问，cookie_secure设置以及阻止访问HTTPS / SSL连接之外的Cookie&nbsp;。</p>
<p style="text-align: left;">除此之外，还有一些更多的自定义检查工作，一个是处理脚本将其会话写入的路径，另一个处理熵文件的路径。第一个设置选项——session.save_path告诉PHP在哪里写会话文件。默认情况是写入/tmp也就是本地文件系统上的临时目录。这有一个明显的问题，它与该目录的默认权限有关。原来的意图/tmp是要有一个任何应用程序可以读写的地方，包括运行PHP的Web服务器。所以，想象一下如果有人通过另一种方法来破坏服务器，并且能够读取到这些会话文件的内容时会发生什么呢。默认情况下，PHP只需要在会话中使用数据，使用base64将其编码并将其写入文件。Iniscan会检查你设置的路径——save_path并确保它不是对任何人都是可读/写的。</p>
<p style="text-align: left;">第二个自定义会话检查可以帮助增强PHPSESSID——PHP会话cookie值使用的哈希值的随机性。虽然默认散列生成的结果是可以接受的，但PHP开发组希望允许用户可以帮助它更随机。而不是试图将更多的功能引入到你的代码中，他们在一个较低的级别定义了session.entropy_file设置选项。默认情况下，此设置未定义，但在PHP 5.4.0及更高版本中，它使用/dev/urandom或/dev/arandom，作为值，如果可用的话。</p>
<p style="text-align: left;">这些都是随机数据的良好来源，但如果你的版本低于PHP 5.4.0呢？你可以分配任何你想要的设置的entropy_file文件，PHP将会在该会话ID的随机生成过程中使用该文件的内容。过去有一些问题，PHP的会话ID生成是可预测的，因为它的实现是“随机的”（注意那里的引号），并且可以预测其他请求的结果，并允许进行会话固定攻击。</p>
<p style="text-align: left;"><strong>自定义安全检查</strong></p>
<p style="text-align: left;">还有一些是Iniscan的定制检查，这些检查不仅仅只是检查“某个选项的值设置了没？”或“某个选项确认是否关闭了”。一个与通过disable_functions设置选项禁用函数有关的设置，允许你阻止PHP执行某些函数，并可以关闭诸如<a href="http://php.net/exec" target="_blank" textvalue="exec">exec</a>，<a href="http://php.net/passthru" target="_blank" textvalue="passthru">passthru</a>或其他文件系统执行功能之类的函数。这可以防止未经授权的代码进行系统调用，并且可能（取决于执行用户的访问级别）对本地文件进行更改。</p>
<p style="text-align: left;">另一个更为具体的检查，是在特定版本的PHP上检查一个安全问题。<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1635" target="_blank" textvalue="CVE-2013-1635">CVE-2013-1635</a>引用的问题影响了PHP 5.3.22和5.4.13+版本，并且与SOAP扩展的WSDL缓存目录的问题相关soap.wsdl_cache_dir-可以在open_basedir限制之外设置为启用。虽然本身并不完全是“最佳实践”，但这是值得注意的事情。自定义检查允许Iniscan使用更复杂的逻辑来查看是否有风险（例如检测当前的PHP版本）。</p>
<p style="text-align: left;"><span style="font-size: 20px;"><strong>开源！</strong></span></p>
<p style="text-align: left;">最后的一个提醒，在写这篇文章之前 &#8211;&nbsp;<a href="https://github.com/psecio/iniscan" target="_blank" textvalue="Iniscan">Iniscan</a>项目是开放源代码的，并托管在Github上，并且始终保持开放贡献的态度。它不一定是代码，总是会有一些事情没有想到或特定于你的配置，可能会让它失败。如果你遇到这些<a href="https://github.com/psecio/iniscan/issues" target="_blank" textvalue="问题">问题</a>，请<a href="https://github.com/psecio/iniscan/issues" target="_blank" textvalue="提交一个">提交一个</a>有关该<a href="https://github.com/psecio/iniscan/issues" target="_blank" textvalue="问题的issue，">问题的issue，</a>这将有助于你解决遇到的问题。该项目已经受到Github和Packagist的大量安装的关注，但它总是可以使用input或pull请求来帮助它更加好用。</p>
<p style="text-align: left;">希望这个工具能够帮助PHP社区以简单而有效的方式加强服务器端的安全。该项目一直在寻找好的想法和“下一步”要做的事情，所以如果你有一些好的建议，甚至只是一般的反馈，<a href="http://mailto:iniscan@phpdeveloper.org" target="_blank" textvalue="请让我知道">请让我知道</a>！</p>
<p style="text-align: left;"><span style="font-size: 20px;"><strong>资源</strong></span></p>
<p style="text-align: left;"><a href="https://github.com/psecio/iniscan" target="_blank" textvalue="Iniscan 开源项目">Iniscan 开源项目</a></p>
<p style="text-align: left;"><a href="http://php.net/manual/en/ini.php" target="_blank" textvalue="PHP 手册中关于php.ini &nbsp; &nbsp; &nbsp;的介绍">PHP 手册中关于php.ini &nbsp; &nbsp; &nbsp;的介绍</a></p>
<p style="text-align: left;"><a href="https://websec.io/2012/08/13/Stay-Safe-in-Your-Phpini.html" target="_blank" textvalue="在你的 php.ini 保持安全">在你的 php.ini 保持安全</a></p>
                <div class="foot_description" style="background-color: #fff;">
                    本文翻译自：https://websec.io/2013/12/06/Iniscan-Security-Best-Practices-phpini-Scanner.html
，如若转载，请注明原文地址：                        <a href="http://www.4hou.com/web/7714.html" target=_blank>http://www.4hou.com/web/7714.html</a>
                                    </div>


                 </p>
            </div>
            <div class="article_con">
                <!--文章内容-->
            </div>
            <div class="post-like">
                <a href="javascript:;" data-action="ding" target=_blank data-id="7714" class="favorite">
                <div class="zanbox">
                    <dd class="zanbefor"></dd>
                    <dd class="zanafter"></dd>
                </div>
                <span class="zantext">点赞</span>
                <span class="count">
            0</span>
                </a>
            </div>
            <div class="active_bottom">
                <ul>
                    <a class="Sina" href="http://service.weibo.com/share/share.php?url=http://www.4hou.com/web/7714.html" title="分享到新浪微博" target="_blank"><li class="sinahover"></li></a>
                    <a onclick="window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+encodeURIComponent(document.location.href));return false;" title="分享到QQ空间" class="WeChat" href="javascript:void(0)" target="_blank"><li class="kj"></li></a>
                    <a onclick="dashangToggle()" class="friend" title="分享到微信、朋友圈等" target="_blank"><li class="wx"></li></a>

                </ul>
                <div class="strat icons"><span class='wpfp-span'><img src='http://img.4hou.com/wp-content/plugins/wp-favorite-posts/img/star.png' alt='Favorite' title='Favorite' class='wpfp-img' /><a class='wpfp-link' href='?wpfpaction=add&amp;postid=7714' title='收藏' rel='nofollow'>收藏</a></span></div>
                <div class="hide_box"></div>
                <div class="shang_box">
                    <a class="shang_close" href="javascript:void(0)" onClick="dashangToggle()" title="关闭"><img src="http://img.4hou.com/wp-content/themes/4houv2/images/close.jpg" alt="取消" /></a>
                    <img class="shang_logo" width="120px" src="http://img.4hou.com/wp-content/themes/4houv2/images/logo.png" alt="嘶吼" />
                    <div class="shang_tit">
                        <p>感谢您的支持，我会继续努力的!</p>
                    </div>
                    <div class="shang_payimg">
                        <img src="http://www.4hou.com/wp-content/themes/4houv2/qrcode.php?url=http%3A%2F%2Fwww.4hou.com%2Fweb%2F7714.html" alt="扫码支持" title="扫一扫" />
                    </div>

                    <div class="shang_info">
                        <p>打开<span id="shang_pay_txt">微信</span>扫一扫后点击右上角即可分享哟</p>
                    </div>
                </div>
            </div>
            
            <div class="avatarbottomwrap">
                 <div class="avatarboxleft">
                        <div class="avatarbottom">
                           
                            <a class="upload-img"><img alt='李白' src='http://img.4hou.com/wp-content/uploads/2017/06/b08c1c8edfe23d6947c6-96x96.jpg' class='avatar avatar-96 photo' height='96' width='96' /></a>
                        </div>
                        <h1 class="authornamebottom"><a href="http://www.4hou.com/member?Author=李白" class="upload-img" target=_blank>
                                李白                             </a></h1>
                        <p class="authorzybottom">你的血让我诗性大发</p>

                        <div class="authorbottombox">
                            <!--<div class="gzbtn">关注</div>
                            <div class="sxbtn">私信</div>-->
                                                            <span class="gzbtn"  style="cursor: pointer;" onclick="location.href='/mybox?action=reply&to_user=李白&type=send'">发私信</span>
                                                    </div>
                 </div>
                <div class="authorother">
                 <a class="morearticle" href="http://www.4hou.com/member?Author=李白" class="upload-img" target=_blank>
                            <span class="swiper-pagination-bullet swiper-pagination-bullet-active"></span>
                            <span class="swiper-pagination-bullet swiper-pagination-bullet-active"></span>
                            <span class="swiper-pagination-bullet swiper-pagination-bullet-active"></span>
                             </a>
                    <div class="swiper-container">

                                                    <div class="swiper-wrapper">
                               
                                <div class="swiper-slide">
                                                                        <div><a href="http://www.4hou.com/web/7714.html" target=_blank>
                                            <img data-original="http://img.4hou.com/wp-content/uploads/2017/09/0fc0eb24f5d90ff76993.jpg?imageView2/1/w/140/h/104/format/png"  class="wp-post-image"width="140" height="104"  />                                        </a></div>
                                                                        <div><a href="http://www.4hou.com/penetration/7529.html" target=_blank>
                                            <img data-original="http://img.4hou.com/wp-content/uploads/2017/09/ea4947354fe7343c1a48.jpg?imageView2/1/w/140/h/104/format/png"  class="wp-post-image"width="140" height="104"  />                                        </a></div>
                                                                        <div><a href="http://www.4hou.com/penetration/7016.html" target=_blank>
                                            <img data-original="http://img.4hou.com/wp-content/uploads/2017/08/3a09aada8e42a9eee4c6.png?imageView2/1/w/140/h/104/format/png"  class="wp-post-image"width="140" height="104"  />                                        </a></div>
                                                                        <div><a href="http://www.4hou.com/penetration/5529.html" target=_blank>
                                            <img data-original="http://img.4hou.com/wp-content/uploads/2017/06/5fa8c99bdaed7d956c84.jpg?imageView2/1/w/140/h/104/format/png"  class="wp-post-image"width="140" height="104"  />                                        </a></div>
                                                                    </div>
                            </div>
                                        </div>
                </div>
                <script type="text/javascript">
                    function dashangToggle(){
                        $(".hide_box").fadeToggle();
                        $(".shang_box").fadeToggle();
                    }
                </script>
                <script> 
                    var mySwiper = new Swiper('.swiper-container', {
                        direction : 'vertical',
                        pagination : '.swiper-pagination',
                        paginationClickable :true,
                        spaceBetween : 20
                    })
                </script>
            </div>
                            <div class="review" style="margin-bottom:80px;">
    <h3 id="reply-title" class="comment-reply-title">发表评论 <small></h3>
    <form action="http://www.4hou.com/wp-comments-post.php" method="post" id="commentform">
        <p class="commentname"><label for="author">昵称</label>
            <input type="text" name="author" id="author" value="" size="14" tabindex="1" aria-required='true' placeholder = "请输入昵称" required />
        </p>
        <p class="commenteml">
            <label for="email">邮箱</label>
            <input type="text" name="email" id="email" value="" size="25" tabindex="2" aria-required='true' placeholder = "请输入邮箱地址" required />
        </p>
        <p class="comment-form-comment">
           <label for="comment">评论</label>
           <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea>
        </p>

        <p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" />
        <input type='hidden' name='comment_post_ID' value="7714" id='comment_post_ID' />
            <input type='hidden' name='comment_parent' id='comment_parent' value='0' />
        </p>
    </form>
					
<div class="new-review">
   <ol class="commentlist">
      </ol>
   <div class="hr clearfix">&nbsp;</div>
</div>
</div>             
        </article>

        <!--作者其他文章-->
        <aside class="article_authorbox">
          <div class="article_authorbox_top">
                <div class="article_author">
            <div class="article_author_avatar">
                 <a class="upload-img"><img alt='李白' src='http://img.4hou.com/wp-content/uploads/2017/06/b08c1c8edfe23d6947c6-96x96.jpg' class='avatar avatar-96 photo' height='96' width='96' /></a>
            </div>
            <h1 class="article_author_name"><a href="http://www.4hou.com/member?Author=李白" class="upload-img" target=_blank>
                    李白                </a></h1>
            <p class="article_author_type">你的血让我诗性大发 </p>
            <div class="article_author_bottom">
                                        <span class="send-info" onclick="location.href='/mybox?action=reply&to_user=李白&type=send'">发私信</span>
                         
            </div>
          </div>  
            <div class="interested">
                <h1>可能喜欢</h1>
                                                    <li>
                    <i></i>
                    <a href="http://www.4hou.com/info/news/7807.html" target="_blank">第二届SSC安全峰会，做西北安全的风向标</a> 
                </li> 
                                <li>
                    <i></i>
                    <a href="http://www.4hou.com/technology/7586.html" target="_blank">CSS in JS攻击面综合分析</a> 
                </li> 
                                <li>
                    <i></i>
                    <a href="http://www.4hou.com/technology/7711.html" target="_blank">以扑克游戏网站为例，实战Flash应用程序渗透测试</a> 
                </li> 
                                <li>
                    <i></i>
                    <a href="http://www.4hou.com/info/news/7800.html" target="_blank">下一站极棒黑客大赛，人“攻”智能</a> 
                </li> 
                                <li>
                    <i></i>
                    <a href="http://www.4hou.com/info/news/7797.html" target="_blank">Google又造出一款挖洞神器，在5大主流浏览器上找到31个漏洞</a> 
                </li> 
                                                </div>
       </div>

          
        </aside>
    </section>
    <div id="zooming">
        <img src="" id="imgcon">
    </div>
    <script>
        $(document).ready(function() {
            $.fn.postLike = function() {
                if ($(this).hasClass('done')) {
                    return false;
                } else {
                    $(this).addClass('done');
                    var id = $(this).data("id"),
                        action = $(this).data('action'),
                        rateHolder = $(this).children('.count');
                    var ajax_data = {
                        action: "bigfa_like",
                        um_id: id,
                        um_action: action
                    };
                    $.post("/wp-admin/admin-ajax.php", ajax_data,
                        function(data) {
                            $(rateHolder).html(data);
                        });
                    return false;
                }
            };
            $(document).on("click", ".favorite",
                function() {
                    $(this).postLike();
                });


            $("img").attr("title","");
            var altcon=$(".art_title").text();
            $("img").attr("alt",altcon);
            // 图片放大
            $(".article_cen").find('img').on("click",function(){
                var imgsrc=$(this).attr("src");
                var winthimg=$(this).width();
                var zooming=winthimg*1.2;
                $("#imgcon").css({width:zooming});
                $("#imgcon").css({marginLeft:-zooming/2});
                $("#imgcon").attr("src",imgsrc);
                $("#zooming").addClass("zoomaniatae");
                $("#imgcon").addClass("imgconadimate");
            });
            $("#zooming").on("click",function(){
                $("#imgcon").removeClass("imgconadimate");
                $("#zooming").removeClass("zoomaniatae");

            });

            $(window).scroll(function(){
                var scrtop=$(window).scrollTop();
                if(scrtop>450){
                    $(".article_authorbox_top").removeClass("asideanimateleave").addClass('asideanimate')
                    // $(".interested").hide()
                }
                else if(scrtop<450&&scrtop>350){
                     $(".article_authorbox_top").addClass("asideanimateleave").removeClass('asideanimate')
                     $(".interested").show()

                }
            });
            var start=$(".strat .wpfp-span .wpfp-link").text()
            if(start=="已收藏"){
                $(".strat").addClass("stratend")
            }else{
                $(".strat").removeClass("stratend")
            }

            $(".avatar-96").width(72);
            $(".avatar-96").height(72);
            $(".avatar-120").width(50);
            $(".avatar-120").height(50);

        });
    </script>
<style type="text/css">
.footer{height:auto; background-color: #282828}
.footer_about{width: 1200px;height: 50px;padding-top: 26px; margin: 0 auto;border-bottom-color: transparent !important; position: relative;}
.footer_about>a{font-size: 16px;height: 16px !important;line-height: 16px !important; float: left; padding-right: 18px; border-right:1px solid #ccc;}
.last-child-a{border:none !important}
.footer_bottom_cen p{ margin-top: 5px; margin-right: 25px;text-align: left; margin-bottom: 6px;float: left;}
.footer_bottom_cen>div{width: 450px;float: left;margin-right: 8px}
.footer_bottom{height: 74px}
.footerlogos{width: 130px; height: 24px; position: absolute;right: 10%; top:24px;}
.footerlogos dd{float: left; margin-right: 20px;cursor: pointer;}
.footerlogos dd a{display: block;width: 100%; height: 100%}
.wechartlogo{width: 20px; height: 20px; background-position:-227px 0px;}
.weibologo{width: 20px; height: 20px; background-position:-269px 0px;}
.zhihulogo{width: 20px; height: 20px; background-position:-361px 0px;}
.wechartlogo i{width: 80px;height: 78px;background-size: contain !important; right: 137px;display: none;opacity: 1;background: url(http://www.4hou.com/wp-content/themes/4houv2/img/wechatqr.png) no-repeat;position: absolute;top: -28px;}
.wechartlogo:hover i{display: block;}
.footer_bottom{width: 1200px; background-color: #282828; margin:0 auto } 
.footer_bottom_cen>div img{float: left; margin-right: 4px;margin-top: 4px; margin-left: 4px;width: 66px;}
.footer_bottom_cen{width: 100%}
.cloudserver{float: right !important; margin: 0 auto !important;width: 385px !important; margin-top: -31px}
.cloudserver img{float: left;}
.cloudserver dd{float: left;}
@media screen and (max-width:1260px) {
    .footer{width: 100%; padding: 0px 20px;}
    .footer_about{width: 100%}
    .footer_bottom{width: 100%}
    .footer_bottom div{width: 100%;display: none;}
}
@media screen and (max-width:660px) {
    .footer_about{padding-top: 14px; margin-bottom: 22px;}
    .footerlogos{display: none;}
    .footer_bottom{height: 44px;}

}
</style>
<footer class="footer">
    <div class="footer_about">
        <a href="/about" target=_blank>关于我们</a>
        <!--<a href="">加入我们</a>-->
        <a href="/submit" target=_blank>我要投稿</a>
        <a href="/service" target=_blank>广告及服务</a>
        <a href="/partner" target=_blank class="last-child-a">友情链接</a>
        <div class="footerlogos">
                <dd class="wechartlogo icons">
                  <i></i>
                </dd>
                <dd class="weibologo icons">
                 <a href="http://weibo.com/u/6069423878" target=_blank></a>
                </dd>
                <dd class="zhihulogo icons">
                    <a href="https://zhuanlan.zhihu.com/roartalk" target=_blank></a>
                    
                </dd>
        </div>
    </div>

    <section class="footer_bottom">
        <article class="footer_bottom_cen">
            <p>©2017 北京嘶吼文化传媒有限公司&nbsp;&nbsp;&nbsp;京ICP备16063439号</p>
            <p class="mobilefooter">©2017 北京嘶吼文化传媒有限公司&nbsp;&nbsp;|&nbsp;&nbsp;京ICP备16063439号</p>
            <div class="cloudserver">
                <span>本站由</span>
                <img src="http://img.4hou.com/wp-content/themes/4houv2/img/bdcloud.png">
                <img src="http://img.4hou.com/wp-content/themes/4houv2/img/bdcloud1.png">
                <img src="http://img.4hou.com/wp-content/themes/4houv2/img/ucloud.png">
                <span>提供云计算服务</span>
            </div>
        </article>
    </section>
    <section class="footer_top" style="display:none">
        <article class="footer_top_cen">
            <div class="homeqrcode">
                <dd class="icons"></dd>
                <div class="wb">
                    <a href="http://weibo.com/u/6069423878" target=_blank>
                    <i class="icons"></i>
                    <p>关注嘶吼传媒</p>
                    </a>
                </div>

                <div class="sh">
                    <a href="https://zhuanlan.zhihu.com/roartalk" target=_blank>
                    <i class="icons"></i>
                    <p>关注嘶吼</p>
                    </a>
                </div>
            </div>
            
            <h1>合作伙伴</h1>
            <div class="footer_friend">
                <a href="http://www.xinhuanet.com/talking/chinasafety/" target=_blank>新华网安全中国</a>
                <a href="http://jaq.alibaba.com/" target=_blank>阿里聚安全</a>
                <a href="http://www.seclover.com/" target=_blank>四叶草安全</a>
                <a href="https://sec.vip.com/" target=_blank>唯品会安全应急响应中心</a>
                <a href="https://www.duoyinsu.com/" target=_blank>安识科技</a>
                <a href="http://xianzhi.aliyun.com" target=_blank>云盾先知</a>
                <a href="http://www.ardsec.com/" target=_blank>兴华永恒</a>
                <a href="https://www.sobug.com/" target=_blank>SOBUG</a>
            </div>
        </article>
    </section>
    
</footer>
<aside class="side" >
    <div class="side_top icons "></div>
    <div class="iconbox">
        <div class="side_wechart icons iconhover">微信
            <dd></dd>
        </div>
        <a href="http://weibo.com/u/6069423878" target=_blank><div class="side_webo icons iconhover">微博</div></a>
        <a href="http://www.4hou.com/feed/" target=_blank><div class="side_rss icons iconhover">RSS</div></a>
        <a href="https://zhuanlan.zhihu.com/roartalk" target=_blank><div class="side_zh icons iconhover">知乎</div></a>
    </div>
    <div class="side_bottom icons"></div>
    
</aside>

<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ac201c14c3d2a4747423252be421e1bc";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-91554508-1', 'auto');
    ga('send', 'pageview');

</script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script type="text/javascript"  src="//idm-su.baidu.com/su.js"></script>
</body>
</html>