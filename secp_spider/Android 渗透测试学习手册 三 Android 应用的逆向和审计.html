<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />	
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<title>Android 渗透测试学习手册（三）Android 应用的逆向和审计 - SecPulse.COM | 安全脉搏</title>
<meta name="description" content="前言" />
<meta name="keywords" content="apk 文件,apktool,反编译,安全决策,客户端注入攻击,数据泄漏,文件包含漏洞,未授权区域,查找漏洞,泄漏漏洞,目录遍历,程序漏洞,逆向" />

<link rel='stylesheet' id='style-css'  href='https://www.secpulse.com/wp-content/themes/sec/style.css?ver=2014.9.21' type='text/css' media='all' />
<link rel='stylesheet' id='jquery.fancybox-css'  href='https://www.secpulse.com/wp-content/themes/sec/css/jquery.fancybox.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='https://www.secpulse.com/wp-content/themes/sec/css/font-awesome.min.css?ver=1.0' type='text/css' media='all' />
<script type='text/javascript' src='https://www.secpulse.com/wp-content/themes/sec/js/jquery.min.js?ver=2.15'></script>
<script type='text/javascript' src='https://www.secpulse.com/wp-content/themes/sec/js/jquery.fancybox.js?ver=2.15'></script>
<script type='text/javascript' src='https://www.secpulse.com/wp-content/themes/sec/js/helpers/jquery.fancybox-buttons.js?ver=2.15'></script>
<script type='text/javascript' src='https://www.secpulse.com/wp-content/themes/sec/js/jquery.mousewheel-3.0.6.pack.js?ver=1.0'></script>
<script type='text/javascript' src='https://www.secpulse.com/wp-content/themes/sec/js/owl.carousel.min.js?ver=1.0'></script>
<script type='text/javascript' src='https://www.secpulse.com/wp-content/themes/sec/js/custom.js?ver=1.0'></script>
<script type='text/javascript' src='https://www.secpulse.com/wp-content/themes/sec/js/comments-ajax.js?ver=1.3'></script>
<link rel='canonical' href='https://www.secpulse.com/archives/56049.html' />
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?7f4cc5524dcb1aec487b4266c18bae48";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</head>
<body class="single single-post postid-56049 single-format-standard">
	<header id="header" class="header clr">
		<div class="header-top inner clr">
	<hgroup class="logo-main"><h1 class="logo"><a href="https://www.secpulse.com/" rel="home" title="安全脉搏">安全脉搏</a></h1><h4 class="xs-hidden">分享技术，悦享品质 
	</h4>
	</hgroup>

<div class="login xs-hidden">
				<div class="logindiv">
					<div class="img">
<img src="https://www.secpulse.com/wp-content/uploads/2017/05/rabbit.jpeg" width="36" height="36" alt="" class="avatar avatar-36 wp-user-avatar wp-user-avatar-36 photo avatar-default" /></div><span href="javascript:void(0);" title="用户" class="yh">用户</span><i
						class="fa fa-caret-down fa-2"></i>
					<ul class="login-links">
						<li class="log"><a
							href="https://www.secpulse.com/wp-login.php"
							target="_blank"><i class="fa fa-arrow-right"></i><span>登陆</span></a></li>
						<li class="exit"><a
							href="https://www.secpulse.com/wp-login.php?action=register"><i
								class="fa fa-user-times"></i><span>注册</span></a></li>
					</ul>
	
  </div>
			</div>
			<div class="top-search xs-hidden">
  <form id="search" method="get" action="https://www.secpulse.com" >
	<input type="text" name="s" id="s" autocomplete="off"  placeholder="输入搜索内容">
	<button class="btn-search"> <i class="fa fa-search"></i></button>
</form></div>
			<div class="menu-button">
				<i class="fa fa-bars fa-3x"></i>
			</div>
		</div>


		<div class="main-nav  xs-hidden">
			<div class="inner clr"><nav class="left-nav clr"><ul id="menu-%e5%af%bc%e8%88%aa" class="header-menu-nav"><li id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-15"><a href="https://www.secpulse.com/">首页</a></li>
<li id="menu-item-17" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-17"><a href="https://www.secpulse.com/archives/category/articles">文章</a>
<ul class="sub-menu">
	<li id="menu-item-34048" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34048"><a href="https://www.secpulse.com/archives/category/articles/intranet-penetration">内网渗透</a></li>
	<li id="menu-item-34047" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34047"><a href="https://www.secpulse.com/archives/category/articles/code-audit">代码审计</a></li>
	<li id="menu-item-34046" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34046"><a href="https://www.secpulse.com/archives/category/articles/web">Web安全</a></li>
	<li id="menu-item-34565" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34565"><a href="https://www.secpulse.com/archives/category/articles/sec-doc">安全文献</a></li>
	<li id="menu-item-34568" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34568"><a href="https://www.secpulse.com/archives/category/articles/social-engineering">社会工程</a></li>
	<li id="menu-item-35948" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35948"><a href="https://www.secpulse.com/archives/category/articles/wireless">无线安全</a></li>
	<li id="menu-item-35949" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-35949"><a href="https://www.secpulse.com/archives/category/articles/mobile-security">移动安全</a></li>
	<li id="menu-item-35950" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-35950"><a href="https://www.secpulse.com/archives/category/articles/system">系统安全</a>
	<ul class="sub-menu">
		<li id="menu-item-35951" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35951"><a href="https://www.secpulse.com/archives/category/articles/system/linux">Linux</a></li>
		<li id="menu-item-35952" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35952"><a href="https://www.secpulse.com/archives/category/articles/system/windows">Windows</a></li>
	</ul>
</li>
	<li id="menu-item-35953" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35953"><a href="https://www.secpulse.com/archives/category/articles/reverse-break">逆向破解</a></li>
</ul>
</li>
<li id="menu-item-18" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-18"><a href="https://www.secpulse.com/archives/category/news">资讯</a>
<ul class="sub-menu">
	<li id="menu-item-35956" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35956"><a href="https://www.secpulse.com/archives/category/news/china-news">国内资讯</a></li>
	<li id="menu-item-35957" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35957"><a href="https://www.secpulse.com/archives/category/news/world-news">国外资讯</a></li>
</ul>
</li>
<li id="menu-item-379" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-379"><a href="https://www.secpulse.com/archives/category/construction">安全建设</a>
<ul class="sub-menu">
	<li id="menu-item-51480" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-51480"><a href="https://www.secpulse.com/archives/category/construction/securityissue">安全管理</a></li>
	<li id="menu-item-54332" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-54332"><a href="https://www.secpulse.com/archives/category/construction/%e4%b8%9a%e5%8a%a1%e5%ae%89%e5%85%a8">业务安全</a></li>
	<li id="menu-item-35955" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35955"><a href="https://www.secpulse.com/archives/category/construction/bigdata">数据分析</a></li>
	<li id="menu-item-54333" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-54333"><a href="https://www.secpulse.com/archives/category/construction/security-reports">安全报告</a></li>
</ul>
</li>
<li id="menu-item-368" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-368"><a href="https://www.secpulse.com/archives/category/exclusive">独家</a>
<ul class="sub-menu">
	<li id="menu-item-35947" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35947"><a href="https://www.secpulse.com/archives/category/articles/industrial-safety">工控安全</a></li>
	<li id="menu-item-35954" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35954"><a href="https://www.secpulse.com/archives/category/exclusive/ctf-writeup">CTF</a></li>
	<li id="menu-item-50217" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-50217"><a href="https://www.secpulse.com/archives/category/exclusive/duoyinsu">多因素令牌</a></li>
	<li id="menu-item-51479" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-51479"><a href="https://www.secpulse.com/archives/category/exclusive/dataleakage">数据泄露</a></li>
</ul>
</li>
<li id="menu-item-16" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-16"><a href="https://www.secpulse.com/archives/category/tools">工具</a></li>
<li id="menu-item-52" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-52"><a href="https://www.secpulse.com/archives/category/hiring">招聘</a></li>
<li id="menu-item-50" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-50"><a href="https://www.secpulse.com/newsend">投稿</a></li>
<li id="menu-item-6645" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6645"><a href="https://www.secpulse.com/archives/category/vul">漏洞</a></li>
</ul></nav>  <nav class="right-nav clr "><ul id="menu-%e5%af%bc%e8%88%aa%e4%ba%8c" class="header-menu-nav"><li id="menu-item-33967" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-33967"><a title="付费渗透测试" href="http://service.secpulse.com">安全服务</a></li>
<li id="menu-item-52043" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-52043"><a title="安全从业者最实用的安全导航" href="http://nav.secpulse.com">安全导航</a></li>
<li id="menu-item-33966" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-33966"><a title="安识科技" href="https://www.duoyinsu.com">多因素</a></li>
</ul></nav></div>
		</div>
		<div class="nav-bg"></div>
   <nav class="mini-nav visible-xs"><ul id="menu-%e5%af%bc%e8%88%aa-1" class="menu-mini-nav"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-15"><a href="https://www.secpulse.com/">首页</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-17"><a href="https://www.secpulse.com/archives/category/articles">文章</a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34048"><a href="https://www.secpulse.com/archives/category/articles/intranet-penetration">内网渗透</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34047"><a href="https://www.secpulse.com/archives/category/articles/code-audit">代码审计</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34046"><a href="https://www.secpulse.com/archives/category/articles/web">Web安全</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34565"><a href="https://www.secpulse.com/archives/category/articles/sec-doc">安全文献</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-34568"><a href="https://www.secpulse.com/archives/category/articles/social-engineering">社会工程</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35948"><a href="https://www.secpulse.com/archives/category/articles/wireless">无线安全</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-35949"><a href="https://www.secpulse.com/archives/category/articles/mobile-security">移动安全</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-35950"><a href="https://www.secpulse.com/archives/category/articles/system">系统安全</a>
	<ul class="sub-menu">
		<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35951"><a href="https://www.secpulse.com/archives/category/articles/system/linux">Linux</a></li>
		<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35952"><a href="https://www.secpulse.com/archives/category/articles/system/windows">Windows</a></li>
	</ul>
</li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35953"><a href="https://www.secpulse.com/archives/category/articles/reverse-break">逆向破解</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-18"><a href="https://www.secpulse.com/archives/category/news">资讯</a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35956"><a href="https://www.secpulse.com/archives/category/news/china-news">国内资讯</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35957"><a href="https://www.secpulse.com/archives/category/news/world-news">国外资讯</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-379"><a href="https://www.secpulse.com/archives/category/construction">安全建设</a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-51480"><a href="https://www.secpulse.com/archives/category/construction/securityissue">安全管理</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-54332"><a href="https://www.secpulse.com/archives/category/construction/%e4%b8%9a%e5%8a%a1%e5%ae%89%e5%85%a8">业务安全</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35955"><a href="https://www.secpulse.com/archives/category/construction/bigdata">数据分析</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-54333"><a href="https://www.secpulse.com/archives/category/construction/security-reports">安全报告</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-368"><a href="https://www.secpulse.com/archives/category/exclusive">独家</a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35947"><a href="https://www.secpulse.com/archives/category/articles/industrial-safety">工控安全</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-35954"><a href="https://www.secpulse.com/archives/category/exclusive/ctf-writeup">CTF</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-50217"><a href="https://www.secpulse.com/archives/category/exclusive/duoyinsu">多因素令牌</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-51479"><a href="https://www.secpulse.com/archives/category/exclusive/dataleakage">数据泄露</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-16"><a href="https://www.secpulse.com/archives/category/tools">工具</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-52"><a href="https://www.secpulse.com/archives/category/hiring">招聘</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-50"><a href="https://www.secpulse.com/newsend">投稿</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6645"><a href="https://www.secpulse.com/archives/category/vul">漏洞</a></li>
</ul></nav>     </header><section class="xs-main index-main clr">
<div class="inner">
<div class="xs-left">
<nav class="crumbs">现在位置： <a title="返回首页" href="https://www.secpulse.com">首页</a> &gt; <a href="https://www.secpulse.com/archives/category/articles">文章</a> &gt; <a href="https://www.secpulse.com/archives/category/articles/mobile-security" rel="category tag">移动安全</a> &gt; <a href="https://www.secpulse.com/archives/category/news" rel="category tag">资讯</a> &gt;  正文 </nav><article id="post-56049" class="post-56049 post type-post status-publish format-standard has-post-thumbnail hentry category-mobile-security category-news tag-apk- tag-apktool tag-1641 tag-63565 tag-63563 tag-38223 tag-3992 tag-63564 tag-63559 tag-63561 tag-3627 tag-63562 tag-63560">
	<header class="single-header">
		<h1>Android 渗透测试学习手册（三）Android 应用的逆向和审计</h1>
			<div class="single-meta">
				
		    <div class="time"><i></i> <a href="javascript:void(0);">2017 /2/24 22:33</a></div>
			<div class="eye xs-hidden"><i class="fa fa-eye fa-1"></i><a href="javascript:void(0);">6,403</a> </div>			<div class="comments xs-hidden"><i class="fa fa-comments fa-1"></i><a href="https://www.secpulse.com/archives/56049.html#respond">沙发</a></div>
			
			
		</div>
		<!-- .entry-meta -->
	</header>
	<!-- .single-header -->

	<div class="single-main">
		<h2>前言</h2>
<blockquote><p>上文讲述了<a href="https://www.secpulse.com/archives/56023.html" target="_blank">《Android 渗透测试学习手册（二）准备实验环境》</a>在本章中，我们将查看 Android 应用程序或 .<a href="https://www.secpulse.com/archives/tag/apk 文件" target="_blank">apk 文件</a>，并了解其不同的组件。 我们还将使用工具（ 如 Apktool，dex2jar 和 jd-gui） 来逆向应用程序。 我们将进一步学习如何通过逆向和分析源代码来寻找 Android 应用程序中的各种漏洞。 我们还将使用一些静态分析工具和脚本来<a href="https://www.secpulse.com/archives/tag/查找漏洞" target="_blank">查找漏洞</a>并利用它们。</p></blockquote>
<section>
<section class="">
<h2>3.1 Android 应用程序拆解</h2>
</section>
</section>
<blockquote><p>Android 应用程序是在开发应用程序时创建的数据和资源文件的归档文件。 Android 应用程序的扩展名是<span class=""> .apk ，意思是应用程序包，在大多数情况下包括以下文件和文件夹：<br />
</span></p></blockquote>
<ul class="list-paddingleft-2">
<li><span class="">Classes.dex (文件)<br />
</span></li>
<li><span class="">AndroidManifest.xml (文件)<br />
</span></li>
<li><span class="">META-INF (文件夹)<br />
</span></li>
<li><span class="">resources.arsc (文件)<br />
</span></li>
<li><span class="">res(文件夹)<br />
</span></li>
<li><span class="">assets(文件夹)<br />
</span></li>
<li><span class="">lib (文件夹)</span></li>
</ul>
<blockquote><p><span class="">为了验证这一点，我们可以使用任何归档管理器应用程序（ 如 7zip，WinRAR 或任何首选应用程序） 简单地解压缩应用程序。 在 Linux 或 Mac 上，我们可以简单地使用 unzip 命令来展示压缩包的内容，如下面的截图所示：</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/127.png"><img class="alignnone size-full wp-image-56089" src="http://www.secpulse.com/wp-content/uploads/2017/02/127.png" alt="1" width="476" height="319" /></a><br />
<span class=""><br />
</span></p>
<blockquote><p><span class="">这里，我们使用 -l （ list） 标志，以便简单地展示压缩包的内容，而不是解压它。 我们还可以使用 file 命令来查看它是否是一个有效的压缩包。</span></p>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/219.png"><img class="alignnone size-full wp-image-56090" src="http://www.secpulse.com/wp-content/uploads/2017/02/219.png" alt="2" width="486" height="57" /></a></p></blockquote>
<p>&nbsp;</p>
<blockquote><p><span class="">Android 应用程序由各种组件组成，它们一起创建可工作的应用程序。 这些组件是活动，服务，广播接收器，内容供应器和共享首选项。 在继续之前，让我们快速浏览一下这些不同的组件：</span></p></blockquote>
<ul class="list-paddingleft-2">
<li><span class="">活动（ Activity） ：这些是用户可以与之交互的可视界面。这些可以包括按钮，图像， TextView 或任何其他可视组件。</span></li>
</ul>
<ul class="list-paddingleft-2">
<li><span class="">服务（ Service） ：这些 Android 组件在后台运行，并执行开发人员指定的特定任务。这些任务可以包括从 HTTP 下载文件到在后台播放音乐的任何内容。</span></li>
</ul>
<ul class="list-paddingleft-2">
<li><span class="">广播接收器（ Broadcast Receiver） ：这些是 Android 应用程序中的接收器，通过Android 系统或设备中存在的其他应用程序，监听传入的广播消息。一旦它们接收到广播消息，就可以根据预定义的条件触发特定动作。条件可以为收到 SMS，来电呼叫，电量改变等等。</span></li>
</ul>
<ul class="list-paddingleft-2">
<li><span class="">共享首选项（ Shared Preference） ：应用程序使用这些首选项，以便为应用程序保存小型数据集。此数据存储在名为 shared_prefs 的文件夹中。这些小数据集可以包括名值对，例如游戏中的用户得分和登录凭证。不建议在共享首选项中存储敏感信息，因为它们可能易受数据窃取和泄漏的影响。</span></li>
</ul>
<ul class="list-paddingleft-2">
<li><span class="">意图（ Intent） ：这些组件用于将两个或多个不同的 Android 组件绑定在一起。意图可以用于执行各种任务，例如启动动作，切换活动和启动服务。</span></li>
</ul>
<ul class="list-paddingleft-2">
<li><span class="">内容供应器（ Content Provider） ：这些组件用于访问应用程序使用的结构化数据集。应用程序可以使用内容供应器访问和查询自己的数据或存储在手机中的数据。</span></li>
</ul>
<p>&nbsp;</p>
<blockquote><p><span class="">现在我们知道了 Android 应用程序内部结构，以及应用程序的组成方式，我们可以继续逆向Android 应用程序。 当我们只有 .apk 文件时，这是获得可读的源代码和其他数据源的方式。</span></p></blockquote>
<section>
<section class="">
<h2>3.2 <a href="https://www.secpulse.com/archives/tag/逆向" target="_blank">逆向</a> Android 应用</h2>
</section>
</section>
<blockquote><p><span class="">正如我们前面讨论的，Android应用程序只是一个数据和资源的归档文件。 即使这样，我们不能简单地解压缩归档包（.apk） 来获得可读的源代码。 对于这些情况，我们必须依赖于将字节代码（ 如在 classes.dex 中） 转换为可读源代码的工具。</span></p></blockquote>
<blockquote><p>将字节码转换为可读文件的一种方法，是使用一个名为 dex2jar 的工具。 .dex 文件是由Java 字节码转换的 Dalvik 字节码，使其对移动平台优化和高效。 这个免费的工具只是将Android 应用程序中存在的 .dex 文件转换为相应的 .jar 文件。 请遵循以下步骤：</p></blockquote>
<blockquote><p><span class="">1. 从 https://code.google.com/p/dex2jar/ 下载 dex2jar 工具。</span></p>
<p><span class="">2. 现在我们可以使用它来运行我们的应用程序的 .dex 文件，并转换为 .jar 格 式。</span></p>
<p><span class="">3. 现在，我们需要做的是，转到命令提示符并访问 dex2jar 所在的文件夹。</span></p></blockquote>
<blockquote><p><span class="">接下来，我们需要运行 d2j-dex2jar.bat 文件（ 在 Windows 上） 或 d2j-dex2jar.sh 文件（ 在 Linux /Mac 上） ，并提供应用程序名称和路径作为参数。 这里的参数中，我们可以简单地使用 .apk 文件，或者我们甚至可以解压缩 .apk 文件，然后传递 classes.dex 文件，如下面的截图所示：</span></p></blockquote>
<p><span class=""><a href="http://www.secpulse.com/wp-content/uploads/2017/02/314.png"><img class="alignnone size-full wp-image-56091" src="http://www.secpulse.com/wp-content/uploads/2017/02/314.png" alt="3" width="444" height="43" /></a><br />
</span></p>
<blockquote><p><span class="">正如我们在上面截图中看到的，dex2jar 已经成功地将应用程序的 .dex 文件转换为名为 helloworld-dex2jar.jar 的 .jar 文件。 现在，我们可以在任何 Java 图形查看器（ 如JD-GUI） 中打开此 .jar 文件，JD-GUI 可以从其官方网站 http://jd.benow.ca/ 下载。</span></p></blockquote>
<blockquote><p>4. 一旦我们下载并安装 JD-GUI，我们现在可以继续打开它。 它看起来像下面的截图所示：</p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/413.png"><img class="alignnone size-full wp-image-56092" src="http://www.secpulse.com/wp-content/uploads/2017/02/413.png" alt="4" width="626" height="411" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">5. 在这里，我们现在可以打开之前步骤中转换的 .jar 文件，并查看 JD-GUI 中的所有Java 源代码。为了打开 .jar 文件，我们可以简单地访问 File | Open 。</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/68.png"><img class="alignnone size-full wp-image-56093" src="http://www.secpulse.com/wp-content/uploads/2017/02/68.png" alt="6" width="627" height="362" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">在右侧窗格中，我们可以看到 Java 应用程序的 Java 源代码和所有方法。 请注意，重新编译过程会为你提供原始 Java 源代码的近似版本。 这在大多数情况下无关紧要; 但是，在某些情况下，你可能会看到转换的 .jar 文件中缺少某些代码。 此外，如果应用程序开发人员使用一些防止反编译的保护，如 proguard 和 dex2jar，当我们使用 dex2jar 或 Apktool 反编译应用程序时，我们不会看到准确的源代码; 相反，我们将看到一堆不同的源文件，这不是原始源代码的准确表示。<br />
</span></p></blockquote>
<section>
<section class="">
<h2>3.3 使用<a href="https://www.secpulse.com/archives/tag/Apktool" target="_blank">Apktool </a>逆向 Android 应用</h2>
</section>
</section>
<blockquote><p><span class="">另一种逆向 Android应用程序的方法是将 .dex 文件转换为 smali 文件。 smali 是一种文件格式，其语法与称为 Jasmine 的语言类似。我们现在不会深入了解 smali 文件格式。有关更多信息，请参阅在线 wiki https://code.google.com/p/smali/wiki/ ，以便深入了解 smali。</span></p></blockquote>
<blockquote><p>一旦我们下载 Apktool 并配置它，按照前面的章节的指示，我们都做好了进一步的准备。 与JD-GUI 相比，Apktool 的主要优点是它是双向的。这意味着如果你反编译一个应用程序并修改它，然后使用 Apktool 重新编译它，它能跟完美重新编译，并生成一个新的 .apk 文件。然而，dex2jar 和 JD-GUI 不能做类似功能，因为它提供近似代码，而不是准确的代码。</p></blockquote>
<blockquote><p>因此，为了使用 Apktool 反编译应用程序，我们所需要做的是，将 .apk 文件与Apktool 二进制文件一起传递给命令行。一旦反编译完成，Apktool 将使用应用程序名称创建一个新的文件夹，其中会存储所有的文件。为了反编译，我们只需调用 apktool d [app-name].apk 。这里， -d 标志表示反编译。</p></blockquote>
<blockquote><p>在以下屏幕截图中，我们可以看到使用 Apktool 进行<a href="https://www.secpulse.com/archives/tag/反编译" target="_blank">反编译</a>的应用程序：</p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/78.png"><img class="alignnone size-full wp-image-56094" src="http://www.secpulse.com/wp-content/uploads/2017/02/78.png" alt="7" width="627" height="192" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">现在，如果我们进入 smali 文件夹，我们将看到一堆不同的 smali 文件，它们包含开发应用程序时编写的 Java 类的代码。在这里，我们还可以打开一个文件，更改一些值，并使用Apktool 再次构建它。为了从 smali 构建一个改动的应用程序，我们将使用 Apktool 中的 b （ build） 标志。</span></p>
<p><span class="">apktool b [decompiled folder name] [target-app-name].apk</span></p></blockquote>
<blockquote><p><span class="">但是，为了反编译，修改和重新编译应用程序，我个人建议使用另一个名为 Virtuous TenStudio（ VTS） 的工具。这个工具提供与 Apktool 类似的功能，唯一的区别是 VTS 提供了一个漂亮的图形界面，使其相对容易使用。此工具的唯一限制是，它只在 Windows 环境中运行。我们可以从官方下载链接 http://www.virtuous-ten-studio.com/ 下载 VTS。以下是反编译同一项目的应用程序的屏幕截图：<br />
</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/85.png"><img class="alignnone size-full wp-image-56095" src="http://www.secpulse.com/wp-content/uploads/2017/02/85.png" alt="8" width="594" height="321" /></a></p>
<p>&nbsp;</p>
<section>
<section class="">
<h2>3.4 审计 Android 应用</h2>
</section>
</section>
<blockquote><p><span class="">Android 应用程序通常包含许多安全漏洞，大多数时候是由于开发人员的错误和安全编码实践的无视。 在本节中，我们将讨论基于 Android 应用程序的漏洞，以及如何识别和利用它们。</span></p></blockquote>
<h3><span class="">内容供应器泄露</span></h3>
<blockquote><p><span class="">许多应用程序使用内容供应器来存储和查询应用程序中的数据或来自电话的数据。 除非已经定义了内容提供者可以使用权限来访问，否则任何其他应用都可以使用应用所定义的内容供应器，来访问应用的数据。 所有内容供应器具有唯一的统一资源标识符（ URI） 以便被识别和查询。 内容提供者的 URI 的命名标准惯例是以 content:// 开始。</span></p></blockquote>
<blockquote><p><span class="">如果 Android API 版本低于 17，则内容供应器的默认属性是始终导出。 这意味着除非开发人员指定权限，否则任何应用程序都可以使用应用程序的内容供应器，来访问和查询数据。 所有内容供应器都需要在 AndroidManifest.xml 中注册。 因此，我们可以对应用程序使用Apktool，并通过查看 AndroidManifest.xml 文件检查内容供应器。</span></p></blockquote>
<blockquote><p>定义内容供应器的一般方法如下所示：<span class=""><br />
</span></p>
<section><span class="">&lt;provider<br />
android:name=</span><span class="">"com.test.example.DataProvider"<br />
</span><span class="">android:authorities =</span><span class="">"com.test.example.DataProvider"</span><span class="">&gt;</span></section>
</blockquote>
<blockquote><p><span class="">所以现在，我们将举一个漏洞应用程序的例子，并尝试利用内容供应器<a href="https://www.secpulse.com/archives/tag/泄漏漏洞" target="_blank">泄漏漏洞</a>：</span></p></blockquote>
<blockquote><p>1. 为了反编译应用程序，我们将使用 Apktool 来使用 apktool d [appname].apk 反编译应用程序。</p></blockquote>
<blockquote><p>2. 为了找到内容供应器，我们可以简单地查看定义它们的 AndroidManifest.xml 文件，或者我们可以使用一个简单的 grep 命令，从应用程序代码中获取内容供应器，如下所示：</p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/95.png"><img class="alignnone size-full wp-image-56096" src="http://www.secpulse.com/wp-content/uploads/2017/02/95.png" alt="9" width="591" height="45" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">3. 我们可以使用 grep 命令来查找内容提供者，使用 grep –R 'content://' 。 此命令将在每个子文件夹和文件中查找内容供应器，并将其返回给我们。<br />
</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/105.png"><img class="alignnone size-full wp-image-56097" src="http://www.secpulse.com/wp-content/uploads/2017/02/105.png" alt="10" width="733" height="304" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">4. 现在，我们在模拟器中安装应用程序。 为了查询内容供应器并确认漏洞是可利用的，我们需要在 Android 设备或模拟器中安装该应用程序。 使用以下代码，我们将在设备上安装易受攻击的 app.apk 文件：</span></p></blockquote>
<blockquote><section>$ adb install vulnerable-app.apk<br />
1869 KB/s (603050 bytes in 0.315s)<br />
pkg: /data/local/tmp/vulnerable-app.apk<br />
Success</section>
</blockquote>
<blockquote><p><span class=""> 5. 我们可以通过创建另一个没有任何权限的应用程序来查询内容供应器，然后查询漏洞应用程序的内容供应器。 为了快速获得信息，我们还可以使用 adb 查询内容供应器，我们可以在以下命令中看到：</span></p></blockquote>
<blockquote><section>adb shell content query - - uri [URI of the content provider]</section>
</blockquote>
<blockquote><section><span class=""> 以下是在漏洞应用程序上运行的命令，输出展示了存储在应用程序中的注释：</span></section>
</blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/1111.png"><img class="alignnone size-full wp-image-56098" src="http://www.secpulse.com/wp-content/uploads/2017/02/1111.png" alt="11" width="735" height="93" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">在这里，我们还可以使用 MWR 实验室的另一个名为 Drozer 的工具，以便在 Android 应用程序中找到泄漏的内容供应器漏洞。 我们可以从官方网站 https://labs.mwrinfosecurity.com/tools/drozer/ 下载并安装 Drozer。</span></p></blockquote>
<blockquote><p>6. 一旦我们安装了它，我们需要将代理组件 agent.apk 安装到我们的模拟器，它位于下载的 .zip 文件内。 该代理是系统和设备相互交互所需的。 我们还需要在每次启动模拟器时转发一个特定的端口（31415） ，以便建立连接。 要在 Mac 和其他类似平台上安装设<span class="">备，我们可以按照 https://www.mwrinfosecurity.com/system/assets/559/original/mwri_drozer-users-guide_2013-09-11.pd 上提供的在线指南。<br />
</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/128.png"><img class="alignnone size-full wp-image-56099" src="http://www.secpulse.com/wp-content/uploads/2017/02/128.png" alt="12" width="727" height="175" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">7. 一旦完成，我们可以启动应用程序，并单击"Embedded Server（ 嵌入式服务器） "文本。从那里，我们需要回到设备，启动 Drozer 应用程序，并通过单击名为 Disabled 的左上角切换按钮启用服务器。<br />
</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/136.png"><img class="alignnone size-full wp-image-56100" src="http://www.secpulse.com/wp-content/uploads/2017/02/136.png" alt="13" width="442" height="456" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">8. 此后，我们需要访问终端并启动 Drozer，并将其连接到模拟器/设备。 为此，我们需要输入 drozer console connect ，如下面的截图所示：<br />
</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/144.png"><img class="alignnone size-full wp-image-56101" src="http://www.secpulse.com/wp-content/uploads/2017/02/144.png" alt="14" width="546" height="62" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">9. 在这里，我们可以运行 app.provider.finduri 模块来查找所有内容供应器，如下所示：</span></p></blockquote>
<blockquote><section>dz&gt; run app.provider.finduri com.threebanana.notes<br />
Scanning com.threebanana.notes…<br />
content://com.threebanana.notes.provider.NotePad/notes<br />
content://com.threebanana.notes.provider.NotePadPending/notes/<br />
content://com.threebanana.notes.provider.NotePad/media<br />
content://com.threebanana.notes.provider.NotePad/topnotes/<br />
content://com.threebanana.notes.provider.NotePad/media_with_owner/<br />
content://com.threebanana.notes.provider.NotePad/add_media_for_note<br />
content://com.threebanana.notes.provider.NotePad/notes_show_deleted<br />
content://com.threebanana.notes.provider.NotePad/notes_with_images/</section>
</blockquote>
<blockquote><p><span class=""> 10. 一旦我们有了 URI，我们现在可以使用 Drozer 应用程序查询它。 为了查询它，我们需要运行 app.provider.query 模块并指定内容供应器的 URI，如下面的截图所示：</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/154.png"><img class="alignnone size-full wp-image-56102" src="http://www.secpulse.com/wp-content/uploads/2017/02/154.png" alt="15" width="606" height="234" /></a></p>
<p>&nbsp;</p>
<blockquote><p><span class="">如果 Drozer 能够查询和显示来自内容供应器的数据，这意味着内容供应器泄漏数据并且存在漏洞，因为 Drozer 没有被明确地授予使用数据集的任何权限。</span></p></blockquote>
<blockquote><p>11. 为了修复此漏洞，开发人员需要做的是，在创建内容供应器时指定参数 android:exported = false ，或者创建一些新的权限，另一个应用程序在访问供应器之前必须请求它。</p></blockquote>
<section>
<section class="">
<h2>3.5 不安全的文件存储</h2>
</section>
</section>
<blockquote><p><span class="">通常，开发人员为应用程序存储数据时，未指定文件的正确文件权限。 这些文件有时被标记为全局可读，并且可以由任何其它应用程序访问而不需要请求权限。</span></p></blockquote>
<blockquote><p>为了检查这个漏洞，我们所需要做的是访问 adb shell ，之后使用 cd 进入 /data/data/[package name of the app] 。</p></blockquote>
<blockquote><p>如果我们在这里执行一个简单的 ls -l ，就可以看到文件和文件夹的文件权限：</p></blockquote>
<blockquote><section># ls -l /data/data/com.aditya.example/files/userinfo.xml<br />
-rw-rw-rw- app_200 app_200 22034 2013-11-07 00:01 userinfo.xml</section>
</blockquote>
<blockquote><p><span class="">这里我们可以使用 find 来搜索权限。</span></p></blockquote>
<blockquote><section>find /data/data/ -perm [permissions value]</section>
</blockquote>
<blockquote><p><span class="">如果我们执行 cat userinfo.xml ，它储存了应用的用户的用户名和密码。</span></p></blockquote>
<blockquote><section>#grep 'password' /data/data/com.aditya.example/files/userinfo.xml<br />
mysecretpassword</section>
</blockquote>
<blockquote><p><span class=""> 这意味着任何其他应用程序也可以查看和窃取用户的机密登录凭据。 可以通过在开发应用程序时指定正确的文件权限，以及一起计算密码与盐的散列来避免此漏洞。</span></p></blockquote>
<h3><a href="https://www.secpulse.com/archives/tag/目录遍历" target="_blank">目录遍历</a>或本地<a href="https://www.secpulse.com/archives/tag/文件包含漏洞" target="_blank">文件包含漏洞</a></h3>
<blockquote><p><span class="">顾名思义，应用程序中的路径遍历漏洞允许攻击者使用漏洞应用程序的供应器读取其他系统文件。</span></p></blockquote>
<blockquote><p>此漏洞也可以使用我们之前讨论的工具 Drozer 进行检查。 在这里，我们用例子来说明由 Seafastian Guerrero 发现的 Adobe Reader Android 应用<a href="https://www.secpulse.com/archives/tag/程序漏洞" target="_blank">程序漏洞</a>（http://blog.seguesec.com/2012/09/path-traversal-vulnerability-on-adobe-reader-android-application） 。 此漏洞存在于 Adobe Reader 10.3.1 中，并在以后的版本中进行了修补。 你可以从 http://androiddrawer.com 下载各种 Android 应用程序的旧版本。</p></blockquote>
<blockquote><p>我们将启动 Drozer，并运行 app.provider.finduri 模块来查找内容供应器 URI。</p></blockquote>
<blockquote><section>dz&gt; run app.provider.finduri com.adobe.reader<br />
Scanning com.adobe.reader...<br />
content://com.adobe.reader.fileprovider/<br />
content://com.adobe.reader.fileprov</section>
</blockquote>
<blockquote><p><span class="">一旦我们找到了 URI，我们现在可以使用 app.provider.read 搜索并利用本地文件包含漏洞。</span></p></blockquote>
<blockquote><p><span class=""><br />
在这里，我尝试从系统中读取一些文件，如 /etc/hosts 和 /proc/cpuinfo ，它们默认存在于所有的 Android 实例中，因为它是基于 Linux 的文件系统。</span></p></blockquote>
<blockquote><section>dz&gt; run app.provider.read content://com.adobe.reader.fileprovider/../../../../etc/host<br />
s127.0.0.1 localhost</p>
</section>
<p><span class=""><br />
正如我们在下面的屏幕截图中看到的，我们已经成功地使用 Adobe Reader 漏洞内容供应器读取了 Android 文件系统中的文件。<br />
</span></p></blockquote>
<p><a href="http://www.secpulse.com/wp-content/uploads/2017/02/163.png"><img class="alignnone size-full wp-image-56103" src="http://www.secpulse.com/wp-content/uploads/2017/02/163.png" alt="16" width="594" height="266" /></a></p>
<p>&nbsp;</p>
<h3><a href="https://www.secpulse.com/archives/tag/客户端注入攻击" target="_blank">客户端注入攻击</a></h3>
<blockquote><p><span class="">客户端攻击通常发生在应用程序未检查用户输入的时候。例如，在对 SQLite 数据库的查询期间，应用程序正在解析用户输入，因为它位于查询语句中。</span></p></blockquote>
<blockquote><p>让我们举一个应用程序的示例，它检查本地 SQLite 数据库，来根据登录凭据验证用户。 因此，当用户提供用户名和密码时，正在运行的查询将如下所示：</p></blockquote>
<blockquote><section><span class="">SELECT </span>* <span class="">FROM </span><span class="">'users' </span><span class="">where </span>username=<span class="">'user-input-username' </span><span class="">and password</span>=<span class="">'user-input-password'</span></section>
</blockquote>
<blockquote><p><span class=""><br />
现在，在正常情况下，这将正常工作，用户输入其真正的登录凭据，并且查询取决于条件将返回 true 或 false 。<br />
</span></p></blockquote>
<blockquote><section><span class="">SELECT </span>* <span class="">FROM </span><span class="">'users' </span><span class="">where </span>username=<span class="">'aditya' </span><span class="">and password</span>=<span class="">'mysecretpass</span></section>
</blockquote>
<blockquote><p><span class=""><br />
</span><span class="">但是，如果攻击者输入 SQL 语句而不是正常的用户名怎么办？ 请参考以下代码：<br />
</span></p></blockquote>
<blockquote><section><span class="">SELECT </span>* <span class="">FROM </span><span class="">'users' </span><span class="">where </span>username=<span class="">'1' </span><span class="">or </span><span class="">'1' </span>= <span class="">'1' </span>- - <span class="">and password</span>=<span class="">'mysecretpassword</span></section>
</blockquote>
<blockquote><p><span class="">因此，在这种情况下，即使用户不知道用户名和密码，他们可以通过使用 1'or'1'='1 查询来轻松绕过它，这在所有情况下都返回 true 。 因此，应用程序开发人员必须在应用程序中进行适当的检查，来检查用户输入。</span></p></blockquote>
<blockquote><p>我们还可以使用 Drozer 的 app.provider.query 来利用 SQL 注入漏洞。 其语法看起来像：</p></blockquote>
<blockquote><section>run app.provider.query [Content Provider URI] --projection "* FROM SQLITE_MASTER WHER<br />
E type='table';- -"</section>
</blockquote>
<blockquote><p><span class="">现在，这将返回 SQLite 数据库中整个表的列表，它的信息存储在 SQLITE_MASTER 中。 您还可以继续并执行更多的 SQL 查询，来从应用程序提取更多的信息。 为了使用 Drozer 实战漏洞利用，你可以从 https://www.mwrinfosecurity.com/products/drozer/community-edition/ 下载他们的漏洞应用程序。<br />
</span></p></blockquote>
<section>
<section class="">
<h2>3.6 OWASP 移动 Top10</h2>
</section>
</section>
<blockquote><p><span class=""><br />
Web 应用程序开放安全项目（ OWASP） 是涉及安全和漏洞搜索的标准之一。 它还发布了前10 名漏洞的列表，其中包括在各种平台中最常见和重要的漏洞。可以在 https://www.owasp.org/index.php/Projects/OWASP_Mobile_Security_Project_-_Top_Ten_Mobile_Risks 上找到 OWASP 移动版的前 10 个指南。 如果我们查看 OWASP 移动项目，以下是它涵盖的移动应用程序的 10 个安全问题：</span></p></blockquote>
<ul class="list-paddingleft-2">
<li><span class="">服务端弱控制</span></li>
<li><span class="">不安全的数据存储</span></li>
<li><span class="">传输层保护不足</span></li>
<li><span class="">意外的数据泄漏</span></li>
<li><span class="">缺少授权和认证</span></li>
<li><span class="">无效的加密</span></li>
<li><span class="">客户端注入</span></li>
<li><span class="">通过不可信输入的安全决策</span></li>
<li><span class="">不正确的会话处理</span></li>
<li><span class="">缺乏二进制保护</span></li>
</ul>
<blockquote><p><span class="">让我们逐一介绍它们，并快速了解它们在移动应用程序中的关系，以及我们如何检测它们：</span></p></blockquote>
<h3>服务端弱控制</h3>
<blockquote><p><span class="">第一个 OWASP 漏洞是服务端弱控制，顾名思义，服务端不以安全的方式将数据从移动应用程序发送到服务端，或者在发送数据时暴露一些敏感的 API。 例如，考虑一个 Android 应用程序发送登录凭据到服务器进行身份验证，而不验证输入。 攻击者可以以这样的方式修改凭证，以便访问服务器的敏感或<a href="https://www.secpulse.com/archives/tag/未授权区域" target="_blank">未授权区域</a>。 此漏洞可视为移动应用程序和 Web 应用程序中的一个漏洞。</span></p></blockquote>
<h3>不安全的数据存储</h3>
<blockquote><p><span class="">这仅仅意味着，应用相关信息以用户可访问的方式在设备上存储。 许多 Android 应用程序在共享首选项，SQLite（ 纯文本格式） 或外部存储器中，存储与用户相关的私密信息或应用程序信息。 开发人员应该始终记住，即使应用程序在数据文件夹（/data/data/package-name ）</span><span class="">中存储敏感信息，只要手机已 root，恶意应用程序/攻击者就可以访问它。</span></p></blockquote>
<h3>传输层保护不足</h3>
<blockquote><p><span class="">许多 Android 开发人员依赖于通过不安全模式的网络来发送数据，例如 HTTP 或没有正确实现 SSL 的形式。 这使得应用程序易受到网络上发生的所有不同类型的攻击，例如流量拦截，从应用程序向服务器发送数据时操纵参数，以及修改响应来访问应用程序的锁定区域。</span></p></blockquote>
<h3>意外的<a href="https://www.secpulse.com/archives/tag/数据泄漏" target="_blank">数据泄漏</a></h3>
<blockquote><p><span class="">当应用程序将数据存储在本身易受攻击的位置时，会出现此漏洞。 这些可能包括剪贴板，URL 缓存，浏览器 Cookie，HTML5 DataStorage ，统计数据等。 一个例子是用户登录到他们的银行应用程序，他们的密码已经复制到剪贴板。 现在，即使是恶意应用程序也可以访问用户剪贴板中的数据。</span></p></blockquote>
<h3>缺少授权和认证</h3>
<blockquote><p><span class="">如果 Android 应用程序或一般的移动应用程序在没有适当安全措施的情况下，尝试基于客户端检查来验证或授权用户，则这些应用程序最容易受到攻击。 应该注意的是，一旦手机已root，大多数客户端保护可以被攻击者绕过。 因此，建议应用程序开发人员使用服务器端身份验证和授权进行适当的检查，一旦验证成功，请使用随机生成的令牌，以便在移动设备上验证用户。</span></p></blockquote>
<h3>无效的加密</h3>
<blockquote><p><span class="">这仅仅表示使用不安全的密码函数来加密数据部分。 这可能包括一些已知存在漏洞的算法，如 MD5，SHA1，RC2，甚至是没有适当的安全措施的定制算法。</span></p></blockquote>
<h3>客户端注入</h3>
<blockquote><p><span class="">这在Android应用程序中是可行的，主要成因是使用 SQLite 进行数据存储。 我们将在本书的各章中执行注入攻击。</span></p></blockquote>
<h3>通过不可信输入的<a href="https://www.secpulse.com/archives/tag/安全决策" target="_blank">安全决策</a></h3>
<blockquote><p><span class="">在移动应用程序中，开发人员应始终过滤和验证用户提供的输入或其他相关输入，并且不应该像在应用程序中那样使用它们。 不受信任的输入通常会导致应用程序中的其他安全风险，如客户端注入。</span></p></blockquote>
<h3>不正确的会话处理</h3>
<blockquote><p>
<span class="">在为移动应用程序执行会话处理时，开发人员需要处理很多因素，例如认证 cookie 的正常过期，安全令牌创建，cookie 生成和轮换，以及无法使后端的会话无效。 必须在 Web 应用程序和 Android 应用程序之间维护正确的安全同步。</span></p></blockquote>
<h3>缺乏二进制保护</h3>
<blockquote><p><span class="">这意味着不能正确地防止应用程序被逆向或反编译。 诸如 Apktool 和 dex2jar 之类的工具可用于逆向 Android 应用程序，如果没有遵循正确的开发实践，它会暴露应用程序的各种安全风险。 为了防止通过逆向攻击来分析应用程序，开发人员可以使用 ProGuard 和 DashO 等工具。</span></p></blockquote>
<section>
<h2>总 结</h2>
</section>
<blockquote><p><span class="">在本章中，我们学习了使用各种方法来逆转 Android 应用程序并分析源代码。 我们还学习了如何修改源代码，然后重新编译应用程序，来绕过某些保护。此外，我们还看到了如何使用Drozer 等工具寻找 Android 应用程序中的漏洞。你还可以通过 http://labs.securitycompass.com/exploit-me/ 亲自尝试 Exploit-Me 实验室中的各种漏洞，它由 Security Compass 开发。</span></p></blockquote>
<blockquote><p>在下一章中，我们将进一步尝试 Android 应用程序的流量拦截，并在我们的渗透测试中使用它。</p></blockquote>
<p>【本文由飞龙使者编译 <a href="http://www.kanxue.com/?article-read-728.htm" target="_blank">看雪学院</a>原创，安全脉搏编整理发布】<b> </b></p>
		<div class="pageShenming">
【安全脉搏：分享技术、悦享品质。文章仅代表作者看法，如有不同观点，欢迎添加安全脉搏微信号：SecPulse，进行交流。】</div>
<div class="post-tags"><span>Tags: </span><a href="https://www.secpulse.com/archives/tag/apk-%e6%96%87%e4%bb%b6" rel="tag">apk 文件</a><a href="https://www.secpulse.com/archives/tag/apktool" rel="tag">apktool</a><a href="https://www.secpulse.com/archives/tag/%e5%8f%8d%e7%bc%96%e8%af%91" rel="tag">反编译</a><a href="https://www.secpulse.com/archives/tag/%e5%ae%89%e5%85%a8%e5%86%b3%e7%ad%96" rel="tag">安全决策</a><a href="https://www.secpulse.com/archives/tag/%e5%ae%a2%e6%88%b7%e7%ab%af%e6%b3%a8%e5%85%a5%e6%94%bb%e5%87%bb" rel="tag">客户端注入攻击</a><a href="https://www.secpulse.com/archives/tag/%E6%95%B0%E6%8D%AE%E6%B3%84%E6%BC%8F" rel="tag">数据泄漏</a><a href="https://www.secpulse.com/archives/tag/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E" rel="tag">文件包含漏洞</a><a href="https://www.secpulse.com/archives/tag/%e6%9c%aa%e6%8e%88%e6%9d%83%e5%8c%ba%e5%9f%9f" rel="tag">未授权区域</a><a href="https://www.secpulse.com/archives/tag/%e6%9f%a5%e6%89%be%e6%bc%8f%e6%b4%9e" rel="tag">查找漏洞</a><a href="https://www.secpulse.com/archives/tag/%e6%b3%84%e6%bc%8f%e6%bc%8f%e6%b4%9e" rel="tag">泄漏漏洞</a><a href="https://www.secpulse.com/archives/tag/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86" rel="tag">目录遍历</a><a href="https://www.secpulse.com/archives/tag/%e7%a8%8b%e5%ba%8f%e6%bc%8f%e6%b4%9e" rel="tag">程序漏洞</a><a href="https://www.secpulse.com/archives/tag/%e9%80%86%e5%90%91" rel="tag">逆向</a></div>
		</div>
	<!-- .single-content -->
		<div class="pageActive">
	<div class="mark-like-btn">
							</div>
	<!-- Baidu Button BEGIN -->
	<div class="bdshare">
		<div class="bdsharebuttonbox">
			<a href="#" class="bds_more" data-cmd="more"></a><a href="#"
				class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#"
				class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#"
				class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
		</div>
		<script>
		window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"32"},"share":{}};
		with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
		</script>

	</div>
</div>    <section id="text-6" class="widget-container widget_text hidden-xs">			<div class="textwidget"><center><a href="https://www.duoyinsu.com" target="_blank" title="安识科技 专业安全服务商"><img src="https://www.secpulse.com/wp-includes/images/secweixin.png" style="width:785px;height:315px"></a><center></div>
		</section><section id="related_post-2" class="widget-container widget_related_post hidden-xs"><h3 class="widget-title">相关文章</h3>

	<ul class="related_post">
				<li><a href="https://www.secpulse.com/archives/56611.html" title="详细阅读 Android 渗透测试学习手册（七）不太知名的 Android 漏洞">
		 <img src="https://www.secpulse.com/wp-content/themes/sec/timthumb.php?src=https://www.secpulse.com/wp-content/uploads/2017/03/2222222.jpg&h=150&w=249&zc=1" alt="Android 渗透测试学习手册（七）不太知名的 Android 漏洞" class="xg-img"/>
		<p>Android 渗透测试学习手册（七）不&hellip;</P></a></li>
				<li><a href="https://www.secpulse.com/archives/56309.html" title="详细阅读 【MiSRC】技术分享-浅谈android hook技术">
		 <img src="https://www.secpulse.com/wp-content/themes/sec/timthumb.php?src=https://www.secpulse.com/wp-content/uploads/2017/03/timthumb.png&h=150&w=249&zc=1" alt="【MiSRC】技术分享-浅谈android hook技术" class="xg-img"/>
		<p>【MiSRC】技术分享-浅谈androi&hellip;</P></a></li>
				<li><a href="https://www.secpulse.com/archives/56023.html" title="详细阅读 Android 渗透测试学习手册（二）准备实验环境">
		 <img src="https://www.secpulse.com/wp-content/themes/sec/timthumb.php?src=https://www.secpulse.com/wp-content/uploads/2017/02/微信截图_20170224132930.png&h=150&w=249&zc=1" alt="Android 渗透测试学习手册（二）准备实验环境" class="xg-img"/>
		<p>Android 渗透测试学习手册（二）准&hellip;</P></a></li>
			</ul>


</section></article>


<!-- 引用 -->
<div id="comments" class="comments-area">
	<h2 class="comments-title">
		抢沙发
	</h2>
			<div id="respond" class="comment-respond row">
		


			<form action="https://www.secpulse.com/wp-comments-post.php" method="post" id="commentform">
		
				
						
			<div id="comboxinfo">
					<div class="cominfodiv cominfodiv-author ">
					<p for="author" class="nicheng">
     <input type="text" name="author" id="author" class="texty" value="" tabindex="1" /> <span class="required">昵称*</span>
      </p>
</div>
					<div class="cominfodiv cominfodiv-email">
					<p for="email">	<input type="text" name="email" id="email" class="texty" value="" tabindex="2" /> <span class="required">邮箱*</span>
						</p>
					</div>
					<div class="cominfodiv cominfodiv-url">
					 	<p for="url"><input type="text" name="url" id="url" class="texty" value="" tabindex="3" /><span>网址 </span>
						</p>
					</div>
					
			
				
</div>		       <div class=" cominfodiv-nr">  
<textarea class="texty" name="w" id="comment" rows="10" tabindex="4" placeholder="输入评论内容..."></textarea><textarea name="comment" cols="100%" rows="4" style="display:none"></textarea>
							<div class="submitcom">
							
					<input id="submit" name="submit" type="submit" tabindex="5" value="提&nbsp;交"/>
					<input type='hidden' name='comment_post_ID' value='56049' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="25f01bb4d7" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="243"/></p>				</div>
				<div id="cancel_comment_reply"><a rel="nofollow" id="cancel-comment-reply-link" href="/archives/56049.html#respond" style="display:none;">取消回复</a></div>
			
</div>
			
				
			</form>
			
			
			<script type="text/javascript">
				document.getElementById("comment").onkeydown = function (moz_ev){
				var ev = null;
				if (window.event){
				ev = window.event;
				}else{
				ev = moz_ev;
				}
				if (ev != null && ev.ctrlKey && ev.keyCode == 13){
				document.getElementById("submit").click();}
				}
			</script></div>
	 		
</div>
<!-- #comments --></div>
		
<div class="xs-right sidebar xs-hidden xss-hidden">
	<div class="authorbox">
	<div class="author-top">
<div id="author-img">
<img src="https://www.secpulse.com/wp-content/uploads/2017/01/tt1-150x150.jpg" width="96" height="96" alt="yuyang" class="avatar avatar-96 wp-user-avatar wp-user-avatar-96 alignnone photo" />
</div>
<div class="au-name">
<a href="https://www.secpulse.com/archives/author/yuyang" title="由yuyang发布" rel="author">yuyang</a><br>
 <span class="au-title">总共23篇文章</span>
</div> </div>
	<div class="author-word"><span class="quotes q1"></span>
安全脉搏编辑~	<span class="quotes q2"></span></div>
	</div>
	
				<aside id="recent-posts-2" class="widget-container widget_recent_entries">		<div class="si-title"><h2>最新脉搏</h2></div>		<ul>
					<li>
				<a href="https://www.secpulse.com/archives/60653.html">《安天365安全研究》第5期</a>
						</li>
					<li>
				<a href="https://www.secpulse.com/archives/60630.html">供应链攻击：CCleaner 5.33官方下载被植入恶意代码（附技术详解）</a>
						</li>
					<li>
				<a href="https://www.secpulse.com/archives/60605.html">2017先知创新大会：有ZHI而来</a>
						</li>
					<li>
				<a href="https://www.secpulse.com/archives/60576.html">甲方工作杂谈</a>
						</li>
					<li>
				<a href="https://www.secpulse.com/archives/60394.html">Catfish—缓存漏洞&#038;&#038;配合CSRF到Getshell</a>
						</li>
				</ul>
		</aside><aside id="hot_comment-3" class="widget-container widget_hot_comment"><div class="si-title"><h2>脉搏热评</h2></div>
	<ul class="hot_comment_widget">
		
<li><i class="fa fa-angle-right fa-1"></i><a href= "https://www.secpulse.com/archives/59497.html" rel="bookmark" title="XSS挑战之旅学习总结 (7条评论)" >XSS挑战之旅学习总结</a></li>
<li><i class="fa fa-angle-right fa-1"></i><a href= "https://www.secpulse.com/archives/59065.html" rel="bookmark" title="web安全之如何全面发现系统后台 (6条评论)" >web安全之如何全面发现系统后台</a></li>
<li><i class="fa fa-angle-right fa-1"></i><a href= "https://www.secpulse.com/archives/59770.html" rel="bookmark" title="电商的支付风控怎么玩？ (3条评论)" >电商的支付风控怎么玩？</a></li>
<li><i class="fa fa-angle-right fa-1"></i><a href= "https://www.secpulse.com/archives/59466.html" rel="bookmark" title="安天移动安全联合猎豹揭秘无形之贼Dosoft免杀病毒 (2条评论)" >安天移动安全联合猎豹揭秘无形之贼Doso&hellip;</a></li>
<li><i class="fa fa-angle-right fa-1"></i><a href= "https://www.secpulse.com/archives/59262.html" rel="bookmark" title="跟着DVWA学Web安全开发 (2条评论)" >跟着DVWA学Web安全开发</a></li>			</ul>

</aside><aside id="random_post-2" class="widget-container widget_random_post"><div class="si-title"><h2>随机脉搏</h2></div>

	<ul class="random_post">
		<li><i class="fa fa-angle-right fa-1"></i><a href="https://www.secpulse.com/archives/17768.html" rel="bookmark" title="详细阅读 海底捞某管理后台弱口令+平行权限漏洞">海底捞某管理后台弱口令+平行权限漏洞</a></li>
		<li><i class="fa fa-angle-right fa-1"></i><a href="https://www.secpulse.com/archives/41156.html" rel="bookmark" title="详细阅读 咕咚网官方APP存在SQL注入漏洞（跨5个库+附绕过验证脚本）">咕咚网官方APP存在SQL注入漏洞（跨5个库+附绕过验证脚本）</a></li>
		<li><i class="fa fa-angle-right fa-1"></i><a href="https://www.secpulse.com/archives/8957.html" rel="bookmark" title="详细阅读 搜房分站phpinfo一枚">搜房分站phpinfo一枚</a></li>
		<li><i class="fa fa-angle-right fa-1"></i><a href="https://www.secpulse.com/archives/15233.html" rel="bookmark" title="详细阅读 电信手机商城二级域名过滤不严导致上传jspshell">电信手机商城二级域名过滤不严导致上传jspshell</a></li>
		<li><i class="fa fa-angle-right fa-1"></i><a href="https://www.secpulse.com/archives/36884.html" rel="bookmark" title="详细阅读 大型国有企业五矿稀土SQL注入和任意文件遍历漏洞">大型国有企业五矿稀土SQL注入和任意文件遍历漏洞</a></li>
					</ul>


</aside><aside id="text-11" class="widget-container widget_text"><div class="si-title"><h2>脉搏官方微信公众号</h2></div>			<div class="textwidget"><img src="https://www.secpulse.com/wp-includes/images/SecPulse.png" width="280px" height="364px" /></div>
		</aside>				</div>
	</div>

	</section>

  <div class="inner row visible-lg-block">

	<div class="friends">
		<h3>友情链接</h3>
		<ul>
			<li><a href="https://xianzhi.aliyun.com/forum/?secpulse" target="_blank">先知安全社区</a><span>|</span></li>
			<li><a href="https://threathunter.org/" target="_blank">ThreatHunter社区</a><span>|</span></li>
			<li><a href="http://www.ijiandao.com/" target="_blank">网络尖刀</a><span>|</span></li>
			<li><a href="http://navisec.it/" target="_blank">NaviSec导航</a><span>|</span></li>
		    <li><a href="https://www.easyaq.com/" target="_blank">E安全</a><span>|</span></li>
			<li><a href="http://www.sec-wiki.com/" target="_blank">Sec-Wiki</a><span>|</span></li>
			<li><a href="http://www.waitalone.cn/" target="_blank">独自等待</a><span>|</span></li>
			<li><a href="http://www.shellsec.com/" target="_blank">神刀网</a><span>|</span></li>
			<li><a href="http://www.ineice.com/" target="_blank">爱内测</a><span>|</span></li>
			<li><a href="http://www.itet.cn/" target="_blank">北京ITET培训中心</a><span>|</span></li>
			<li><a href="http://www.ihonker.org/" target="_blank">中国红客联盟</a><span>|</span></li>
			<li><a href="http://www.bigniu.com/" target="_blank">比戈大牛</a><span>|</span></li>
			<li><a href="http://www.tiejiang.org/" target="_blank">铁匠运维网</a><span>|</span></li>
			<li><a href="http://www.nagain.com" target="_blank">娜迦信息</a><span>|</span></li>
			<li><a href="https://www.secsilo.com/" target="_blank">SecSilo</a><span>|</span></li>
			<li><a href="https://team.armyzer0.com" target="_blank">armyzer0</a><span>|</span></li>
			<li><a href="http://www.nosafe.org" target="_blank">NoSafe</a></li>
		</ul>
	</div>

	<div class="friends">
		<h3>合作伙伴</h3>
		<ul>
			<a href="https://www.duoyinsu.com" class="external" target="_blank">
				<img src="https://www.secpulse.com/wp-content/uploads/anshi-logo.png"
				alt="安识科技" width="150px" height="45px">
			</a>
			<a href="http://aq.163.com/module/partner.html" class="external"
				target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/netease.jpg"
				alt="网易安全中心" width="150px" height="45px">
			</a>
			<a href="https://security.alibaba.com/" class="external"
				target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/asrc.jpg"
				alt="阿里安全中心" width="150px" height="45px">
			</a>
			
			<a href="http://yaq.qq.com/" class="external" target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/yaqnew.png" alt="腾讯御安全"
				width="140px" height="45px">
			</a>
			
			<a href="http://www.4hou.com" class="external" target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/4hou.png"
				alt="嘶吼RoarTalk" width="150px" height="45px">
			</a>
			
			<a href="http://www.ichunqiu.com/?from=secpulse" class="external" target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/ichunqiu.png" alt="i春秋学院"
				width="140px" height="45px">
			</a>

			<a href="#" class="external" target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/bigsec.png" alt="bigsec岂安科技"
				width="140px" height="45px">
			</a>
		
			<a href="http://www.milw0rm.cn/" class="external" target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/milw0rm.png"
				alt="Milw0rm Team" width="120px" height="40px">
			</a>


			<a href="#" class="external" target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/cloversec.png"
				alt="四叶草安全" width="130px" height="45px">
			</a>
			<a href="https://www.aqdog.com" class="external" target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/aqdog.png"
				alt="安犬云平台" width="140px" height="45px">
			</a>
			
			<a href="http://www.e365.org/" class="external" target="_blank"> <img
				src="https://www.secpulse.com/wp-content/uploads/e365.png"
				alt="易安在线" width="130px" height="45px">
			</a>
			
			
			

		</ul>
	</div>
</div>
<footer class="footer clr" id="footer">
	<div class="inner inner-footer">
		<div class="footer-secpulse">
			<h3>SecPulse</h3>
			<ul>
				<li><a href="/about">关于SecPulse</a></li>
				<!--<li><a href="http://test.secpulse.com">SecPulse专测</a> <sup>NEW!</sup></li>-->
				<li><a href="/hire">加入我们</a></li>
				<li><a href="/report">寻求报道</a></li>
				<li><a href="/contact-us">联系我们</a></li>
			</ul>
		</div>
		<div class="footer-subscribe xs-hidden">
			<h3>订阅</h3>
			<ul>
				<li><a href="/feed">RSS订阅</a></li>
				<li><a href="/feed">邮箱订阅</a></li>
				<li><a href="/feed">线下活动订阅</a></li>
				<li></li>
				<li><a href="http://weibo.com/311057789">官方微博</a></li>
				<!-- <li><a href="https://twitter.com/secpulse">Twitter</a></li> -->
			</ul>
		</div>
		<div class="footer-partner">
			<h3>全力驱动</h3>
			<ul class="cf">
				<li><a href="https://www.secpulse.com" class="external"
					target="_blank"><img
						src="https://www.secpulse.com/wp-content/uploads/seclogo.png"
						alt="安全脉搏" width="200px"></a></li>
			</ul>
		</div>
		<div class="footer-copyright xs-hidden">
			<p>本站由SecPulse安全脉搏团队全力维护。</p>
			<p>
				Powered By <a title="安全脉搏" href="https://www.secpulse.com">SecPulse</a>
			</p>
			<p>©2013-2017 安全脉搏</p>
			<p>沪ICP备16016474号</p>
			<img src="https://www.secpulse.com/wp-includes/images/qrcode.jpg"
				alt="Qrcode" height="150px" width="150px">

		</div>
	</div>
</footer>
<div id="shangxia">
	<div id="shang" title="↑ 返回顶部"></div>
              <div id="comt" title="查看评论"></div>
              <div id="xia" title="↓ 移至底部"></div>
</div>
<script type='text/javascript' src='https://www.secpulse.com/wp-content/plugins/akismet/_inc/form.js?ver=3.1.2'></script>
</body>

</html>
